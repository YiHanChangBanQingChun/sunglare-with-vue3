{"version":3,"file":"js/4378.d533c52f.js","mappings":"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","sources":["webpack://sun-glare-project/./node_modules/@geoscene/core/layers/support/arcgisLayers.js","webpack://sun-glare-project/./node_modules/@geoscene/core/layers/support/fetchService.js","webpack://sun-glare-project/./node_modules/@geoscene/core/layers/support/lazyLayerLoader.js","webpack://sun-glare-project/./node_modules/@geoscene/core/support/requestPresets.js"],"sourcesContent":["/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport e from\"../../core/Error.js\";import{getFilename as r,urlToObject as a}from\"../../core/urlUtils.js\";import{parse as t,parseNonStandardSublayerUrl as s}from\"./arcgisLayerUrl.js\";import{fetchFeatureService as l}from\"./fetchService.js\";import{sceneServiceLayerTypeToClassName as n}from\"./layerUtils.js\";import{layerLookupMap as o}from\"./lazyLayerLoader.js\";import{fetchArcGISServiceJSON as u}from\"../../support/requestPresets.js\";const c={FeatureLayer:!0,SceneLayer:!0};async function i(e){const r=e.properties?.customParameters,a=await p(e.url,r),t={...e.properties,url:e.url};if(!a.sublayerIds)return null!=a.layerOrTableId&&(t.layerId=a.layerOrTableId,t.sourceJSON=a.sourceJSON),new a.Constructor(t);const s=new(0,(await import(\"../GroupLayer.js\")).default)({title:a.parsedUrl.title});return m(s,a,t),s}function y(e,r){return e?e.find((e=>e.id===r)):null}function m(e,r,a){function t(e,t){const s={...a,layerId:e,sublayerTitleMode:\"service-name\"};return null!=t&&(s.sourceJSON=t),new r.Constructor(s)}r.sublayerIds.forEach((a=>{const s=t(a,y(r.sublayerInfos,a));e.add(s)})),r.tableIds.forEach((a=>{const s=t(a,y(r.tableInfos,a));e.tables.add(s)}))}async function p(r,a){let s=t(r);if(null==s&&(s=await d(r,a)),null==s)throw new e(\"arcgis-layers:url-mismatch\",\"The url '${url}' is not a valid arcgis resource\",{url:r});const{serverType:l,sublayer:o}=s;let i;const y={FeatureServer:\"FeatureLayer\",StreamServer:\"StreamLayer\",VectorTileServer:\"VectorTileLayer\"};switch(l){case\"MapServer\":if(null!=o)i=\"FeatureLayer\";else{i=await S(r,a)?\"TileLayer\":\"MapImageLayer\"}break;case\"ImageServer\":{const e=await u(r,{customParameters:a}),{tileInfo:t,cacheType:s}=e;i=t?\"LERC\"!==t?.format?.toUpperCase()||s&&\"elevation\"!==s.toLowerCase()?\"ImageryTileLayer\":\"ElevationLayer\":\"ImageryLayer\";break}case\"SceneServer\":{const e=await u(s.url.path,{customParameters:a});if(i=\"SceneLayer\",e){const r=e?.layers;if(\"Voxel\"===e?.layerType)i=\"VoxelLayer\";else if(r?.length){const e=r[0]?.layerType;null!=e&&null!=n[e]&&(i=n[e])}}break}default:i=y[l]}const m=\"FeatureServer\"===l,p={parsedUrl:s,Constructor:null,layerOrTableId:m?o:void 0,sublayerIds:null,tableIds:null};if(c[i]&&null==o){const e=await I(r,l,a);m&&(p.sublayerInfos=e.layerInfos,p.tableInfos=e.tableInfos);1!==e.layerIds.length+e.tableIds.length?(p.sublayerIds=e.layerIds,p.tableIds=e.tableIds):m&&(p.layerOrTableId=e.layerIds[0]??e.tableIds[0],p.sourceJSON=e.layerInfos?.[0]??e.tableInfos?.[0])}return p.Constructor=await b(i),p}async function d(e,t){const l=await u(e,{customParameters:t});let n=null,o=null;const c=l.type;if(\"Feature Layer\"===c||\"Table\"===c?(n=\"FeatureServer\",o=l.id??null):\"indexedVector\"===c?n=\"VectorTileServer\":l.hasOwnProperty(\"mapName\")?n=\"MapServer\":l.hasOwnProperty(\"bandCount\")&&l.hasOwnProperty(\"pixelSizeX\")?n=\"ImageServer\":l.hasOwnProperty(\"maxRecordCount\")&&l.hasOwnProperty(\"allowGeometryUpdates\")?n=\"FeatureServer\":l.hasOwnProperty(\"streamUrls\")?n=\"StreamServer\":f(l)?(n=\"SceneServer\",o=l.id):l.hasOwnProperty(\"layers\")&&f(l.layers?.[0])&&(n=\"SceneServer\"),!n)return null;const i=null!=o?s(e):null;return{title:null!=i&&l.name||r(e),serverType:n,sublayer:o,url:{path:null!=i?i.serviceUrl:a(e).path}}}function f(e){return null!=e&&e.hasOwnProperty(\"store\")&&e.hasOwnProperty(\"id\")&&\"number\"==typeof e.id}async function I(e,r,a){let t,s=!1;if(\"FeatureServer\"===r){const r=await l(e,{customParameters:a});s=!!r.layersJSON,t=r.layersJSON||r.serviceJSON}else t=await u(e,{customParameters:a});const n=t?.layers,o=t?.tables;return{layerIds:n?.map((e=>e.id)).reverse()||[],tableIds:o?.map((e=>e.id)).reverse()||[],layerInfos:s?n:[],tableInfos:s?o:[]}}async function b(e){return(0,o[e])()}async function S(e,r){return(await u(e,{customParameters:r})).tileInfo}export{i as fromUrl};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport{fetchArcGISServiceJSON as e}from\"../../support/requestPresets.js\";async function r(r,s){const a=await e(r,s);a.layers=a.layers.filter(t);const n={serviceJSON:a};if((a.currentVersion??0)<10.5)return n;const i=await e(r+\"/layers\",s);return n.layersJSON={layers:i.layers.filter(t),tables:i.tables},n}function t(e){return!e.type||\"Feature Layer\"===e.type}export{r as fetchFeatureService};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nconst a={BingMapsLayer:async()=>(await import(\"../BingMapsLayer.js\")).default,BuildingSceneLayer:async()=>(await import(\"../BuildingSceneLayer.js\")).default,CSVLayer:async()=>(await import(\"../CSVLayer.js\")).default,DimensionLayer:async()=>(await import(\"../DimensionLayer.js\")).default,ElevationLayer:async()=>(await import(\"../ElevationLayer.js\")).default,FeatureLayer:async()=>(await import(\"../FeatureLayer.js\")).default,GeoJSONLayer:async()=>(await import(\"../GeoJSONLayer.js\")).default,GeoRSSLayer:async()=>(await import(\"../GeoRSSLayer.js\")).default,GroupLayer:async()=>(await import(\"../GroupLayer.js\")).default,ImageryLayer:async()=>(await import(\"../ImageryLayer.js\")).default,ImageryTileLayer:async()=>(await import(\"../ImageryTileLayer.js\")).default,IntegratedMeshLayer:async()=>(await import(\"../IntegratedMeshLayer.js\")).default,KMLLayer:async()=>(await import(\"../KMLLayer.js\")).default,LineOfSightLayer:async()=>(await import(\"../LineOfSightLayer.js\")).default,LinkChartLayer:async()=>(await import(\"../LinkChartLayer.js\")).default,MapImageLayer:async()=>(await import(\"../MapImageLayer.js\")).default,MapNotesLayer:async()=>(await import(\"../MapNotesLayer.js\")).default,MediaLayer:async()=>(await import(\"../MediaLayer.js\")).default,OGCFeatureLayer:async()=>(await import(\"../OGCFeatureLayer.js\")).default,OpenStreetMapLayer:async()=>(await import(\"../OpenStreetMapLayer.js\")).default,OrientedImageryLayer:async()=>(await import(\"../OrientedImageryLayer.js\")).default,PointCloudLayer:async()=>(await import(\"../PointCloudLayer.js\")).default,RouteLayer:async()=>(await import(\"../RouteLayer.js\")).default,SceneLayer:async()=>(await import(\"../SceneLayer.js\")).default,StreamLayer:async()=>(await import(\"../StreamLayer.js\")).default,SubtypeGroupLayer:async()=>(await import(\"../SubtypeGroupLayer.js\")).default,TileLayer:async()=>(await import(\"../TileLayer.js\")).default,UnknownLayer:async()=>(await import(\"../UnknownLayer.js\")).default,UnsupportedLayer:async()=>(await import(\"../UnsupportedLayer.js\")).default,VectorTileLayer:async()=>(await import(\"../VectorTileLayer.js\")).default,VoxelLayer:async()=>(await import(\"../VoxelLayer.js\")).default,WFSLayer:async()=>(await import(\"../WFSLayer.js\")).default,WMSLayer:async()=>(await import(\"../WMSLayer.js\")).default,WMTSLayer:async()=>(await import(\"../WMTSLayer.js\")).default,WebTileLayer:async()=>(await import(\"../WebTileLayer.js\")).default};export{a as layerLookupMap};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport e from\"../request.js\";async function t(t,o){const{data:r}=await e(t,{responseType:\"json\",query:{f:\"json\",...o?.customParameters,token:o?.apiKey}});return r}export{t as fetchArcGISServiceJSON};"],"names":["c","FeatureLayer","SceneLayer","async","i","e","r","properties","customParameters","a","p","url","t","sublayerIds","layerOrTableId","layerId","sourceJSON","Constructor","s","default","title","parsedUrl","m","y","find","id","sublayerTitleMode","forEach","sublayerInfos","add","tableIds","tableInfos","tables","d","serverType","l","sublayer","o","FeatureServer","StreamServer","VectorTileServer","S","u","tileInfo","cacheType","format","toUpperCase","toLowerCase","path","layers","layerType","length","n","I","layerInfos","layerIds","b","type","hasOwnProperty","f","name","serviceUrl","layersJSON","serviceJSON","map","reverse","filter","currentVersion","BingMapsLayer","BuildingSceneLayer","CSVLayer","DimensionLayer","ElevationLayer","GeoJSONLayer","GeoRSSLayer","GroupLayer","ImageryLayer","ImageryTileLayer","IntegratedMeshLayer","KMLLayer","LineOfSightLayer","LinkChartLayer","MapImageLayer","MapNotesLayer","MediaLayer","OGCFeatureLayer","OpenStreetMapLayer","OrientedImageryLayer","PointCloudLayer","RouteLayer","StreamLayer","SubtypeGroupLayer","TileLayer","UnknownLayer","UnsupportedLayer","VectorTileLayer","VoxelLayer","WFSLayer","WMSLayer","WMTSLayer","WebTileLayer","data","responseType","query","token","apiKey"],"sourceRoot":""}