"use strict";(self["webpackChunksun_glare_project"]=self["webpackChunksun_glare_project"]||[]).push([[3652],{42638:function(e,t,n){n.d(t,{el:function(){return L},mT:function(){return x}});n(44114);var r=n(19470),o=n(47966),i=n(15114),s=n(9737),c=n(68491),l=n(43166),a=n(72465),u=n(30075),f=(n(2516),n(86039)),m=n(55772),p=n(42116);async function h(e,t,n,r){const o=(0,p.Dl)(e),i=t[0].spatialReference,s={...r,query:{...o.query,f:"json",sr:JSON.stringify(i),target:JSON.stringify({geometryType:(0,m.$B)(t[0]),geometries:t}),cutter:JSON.stringify(n)}},c=await(0,f["default"])(o.path+"/cut",s),{cutIndexes:l,geometries:a=[]}=c.data;return{cutIndexes:l,geometries:a.map((e=>{const t=(0,m.rS)(e);return t.spatialReference=i,t}))}}var y=n(4244),d=n(63504);async function g(e,t,n){const r="string"==typeof e?(0,y.An)(e):e,o=t[0].spatialReference,i=(0,m.$B)(t[0]),s={...n,query:{...r.query,f:"json",sr:o.wkid??JSON.stringify(o),geometries:JSON.stringify((0,d.X)(t))}},{data:c}=await(0,f["default"])(r.path+"/simplify",s);return(0,d.V)(c.geometries,i,o)}const b=i.A.getLogger("geoscene.geometry.support.normalizeUtils");function M(e){return"polygon"===e.type}function k(e){return"polygon"===e[0].type}function C(e){return"polyline"===e[0].type}function w(e,t){if(!(e instanceof c.A||e instanceof s.A)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw b.error(e),new o.A(e)}const n=(0,l.r8)(e),r=[];for(const o of n){const e=[];r.push(e),e.push([o[0][0],o[0][1]]);for(let n=0;n<o.length-1;n++){const r=o[n][0],i=o[n][1],s=o[n+1][0],c=o[n+1][1],l=Math.sqrt((s-r)*(s-r)+(c-i)*(c-i)),a=(c-i)/l,u=(s-r)/l,f=l/t;if(f>1){for(let c=1;c<=f-1;c++){const n=c*t,o=u*n+r,s=a*n+i;e.push([o,s])}const n=(l+Math.floor(f-1)*t)/2,o=u*n+r,s=a*n+i;e.push([o,s])}e.push([s,c])}}return M(e)?new s.A({rings:r,spatialReference:e.spatialReference}):new c.A({paths:r,spatialReference:e.spatialReference})}function I(e,t,n){if(t){const t=w(e,1e6);e=(0,u.ci)(t,!0)}return n&&(e=(0,l.kS)(e,n)),e}function S(e,t,n){if(Array.isArray(e)){const r=e[0];if(r>t){const n=(0,l.kd)(r,t);e[0]=r+n*(-2*t)}else if(r<n){const t=(0,l.kd)(r,n);e[0]=r+t*(-2*n)}}else{const r=e.x;if(r>t){const n=(0,l.kd)(r,t);e=e.clone().offset(n*(-2*t),0)}else if(r<n){const t=(0,l.kd)(r,n);e=e.clone().offset(t*(-2*n),0)}}return e}function P(e,t){let n=-1;for(let r=0;r<t.cutIndexes.length;r++){const o=t.cutIndexes[r],i=t.geometries[r],s=(0,l.r8)(i);for(let e=0;e<s.length;e++){const t=s[e];t.some((n=>{if(n[0]<180)return!0;{let n=0;for(let e=0;e<t.length;e++){const r=t[e][0];n=r>n?r:n}n=Number(n.toFixed(9));const r=-360*(0,l.kd)(n,180);for(let o=0;o<t.length;o++){const t=i.getPoint(e,o);i.setPoint(e,o,t.clone().offset(r,0))}return!0}}))}if(o===n){if(k(e))for(const t of(0,l.r8)(i))e[o]=e[o].addRing(t);else if(C(e))for(const t of(0,l.r8)(i))e[o]=e[o].addPath(t)}else n=o,e[o]=i}return e}async function L(e,t,n){if(!Array.isArray(e))return L([e],t);t&&"string"!=typeof t&&b.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const o="string"==typeof t?t:t?.url??r.A.geometryServiceUrl;let i,f,m,p,y,d,M,k,C=0;const w=[],x=[];for(const r of e)if(null!=r)if(i||(i=r.spatialReference,f=(0,a.Vp)(i),m=i.isWebMercator,d=m?102100:4326,p=l.j7[d].maxX,y=l.j7[d].minX,M=l.j7[d].plus180Line,k=l.j7[d].minus180Line),f)if("mesh"===r.type)x.push(r);else if("point"===r.type)x.push(S(r.clone(),p,y));else if("multipoint"===r.type){const e=r.clone();e.points=e.points.map((e=>S(e,p,y))),x.push(e)}else if("extent"===r.type){const e=r.clone()._normalize(!1,!1,f);x.push(e.rings?new s.A(e):e)}else if(r.extent){const e=r.extent,t=(0,l.kd)(e.xmin,y)*(2*p);let n=0===t?r.clone():(0,l.kS)(r.clone(),t);e.offset(t,0),e.intersects(M)&&e.xmax!==p?(C=e.xmax>C?e.xmax:C,n=I(n,m),w.push(n),x.push("cut")):e.intersects(k)&&e.xmin!==y?(C=e.xmax*(2*p)>C?e.xmax*(2*p):C,n=I(n,m,360),w.push(n),x.push("cut")):x.push(n)}else x.push(r.clone());else x.push(r);else x.push(r);let A=(0,l.kd)(C,p),G=-90;const z=A,O=new c.A;for(;A>0;){const e=360*A-180;O.addPath([[e,G],[e,-1*G]]),G*=-1,A--}if(w.length>0&&z>0){const t=P(w,await h(o,w,O,n)),r=[],i=[];for(let n=0;n<x.length;n++){const o=x[n];if("cut"!==o)i.push(o);else{const o=t.shift(),s=e[n];null!=s&&"polygon"===s.type&&s.rings&&s.rings.length>1&&o.rings.length>=s.rings.length?(r.push(o),i.push("simplify")):i.push(m?(0,u.Gh)(o):o)}}if(!r.length)return i;const s=await g(o,r,n),c=[];for(let e=0;e<i.length;e++){const t=i[e];"simplify"!==t?c.push(t):c.push(m?(0,u.Gh)(s.shift()):s.shift())}return c}const E=[];for(let r=0;r<x.length;r++){const e=x[r];if("cut"!==e)E.push(e);else{const e=w.shift();E.push(!0===m?(0,u.Gh)(e):e)}}return E}function x(e,t){const n=(0,a.Vp)(t);if(n){const[t,r]=n.valid,o=r-t;if(e<t)for(;e<t;)e+=o;if(e>r)for(;e>r;)e-=o}return e}},43166:function(e,t,n){n.d(t,{j7:function(){return s},kS:function(){return l},kd:function(){return c},r8:function(){return a}});var r=n(68491),o=n(12790),i=n(55772);const s={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new r.A({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:o.A.WebMercator}),minus180Line:new r.A({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:o.A.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new r.A({paths:[[[180,-180],[180,180]]],spatialReference:o.A.WGS84}),minus180Line:new r.A({paths:[[[-180,-180],[-180,180]]],spatialReference:o.A.WGS84})}};function c(e,t){return Math.ceil((e-t)/(2*t))}function l(e,t){const n=a(e);for(const r of n)for(const e of r)e[0]+=t;return e}function a(e){return(0,i.Bi)(e)?e.rings:e.paths}},95049:function(e,t,n){n.d(t,{Bu:function(){return G},DW:function(){return P},FM:function(){return a},G9:function(){return i},Go:function(){return m},Kn:function(){return I},MM:function(){return y},Nl:function(){return z},Ny:function(){return M},O2:function(){return O},P3:function(){return u},UE:function(){return E},ZT:function(){return p},_1:function(){return x},_H:function(){return C},_W:function(){return b},_d:function(){return S},gQ:function(){return l},lO:function(){return f},lW:function(){return h},mA:function(){return d},n5:function(){return T},pM:function(){return L},pV:function(){return w},qJ:function(){return r},s4:function(){return o},xo:function(){return A},yH:function(){return k},zr:function(){return g}});n(44114);function r(e){return"function"==typeof e}function o(e,t,n,o){return r(e)?e(t,n,o):e}function i(e){return[e.r,e.g,e.b,e.a]}const s=" /-,\n";function c(e){let t=e.length;for(;t--;)if(!s.includes(e.charAt(t)))return!1;return!0}function l(e,t){const n=[];let r=0,o=-1;do{if(o=e.indexOf("[",r),o>=r){if(o>r){const t=e.substr(r,o-r);n.push([t,null,c(t)])}if(r=o+1,o=e.indexOf("]",r),o>=r){if(o>r){const i=t[e.substr(r,o-r)];i&&n.push([null,i,!1])}r=o+1}}}while(-1!==o);if(r<e.length-1){const t=e.substr(r);n.push([t,null,c(t)])}return n}function a(e,t,n){let r="",o=null;for(const i of t){const[t,n,s]=i;if(t)s?o=t:(o&&(r+=o,o=null),r+=t);else{const t=e.attributes[n];t&&(o&&(r+=o,o=null),r+=t)}}return f(r,n)}function u(e,t,n){const r=l(t,e);return e=>a(e,r,n)}function f(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function m(e,t,n,r,o,i,s=!0){const c=t/o,l=n/i,a=Math.ceil(c/2),u=Math.ceil(l/2);for(let f=0;f<i;f++)for(let n=0;n<o;n++){const m=4*(n+(s?i-f-1:f)*o);let p=0,h=0,y=0,d=0,g=0,b=0,M=0;const k=(f+.5)*l;for(let r=Math.floor(f*l);r<(f+1)*l;r++){const o=Math.abs(k-(r+.5))/u,i=(n+.5)*c,s=o*o;for(let l=Math.floor(n*c);l<(n+1)*c;l++){let n=Math.abs(i-(l+.5))/a;const o=Math.sqrt(s+n*n);o>=-1&&o<=1&&(p=2*o*o*o-3*o*o+1,p>0&&(n=4*(l+r*t),M+=p*e[n+3],y+=p,e[n+3]<255&&(p=p*e[n+3]/250),d+=p*e[n],g+=p*e[n+1],b+=p*e[n+2],h+=p))}}r[m]=d/h,r[m+1]=g/h,r[m+2]=b/h,r[m+3]=M/y}}function p(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function h(e){return e.data?.symbol??null}function y(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function d(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function g(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const b=(e,t=0)=>null==e||isNaN(e)?t:e,M=e=>e.tintColor?p(e.tintColor):{r:255,g:255,b:255,a:1},k=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function C(){return Promise.all([n.e(8574),n.e(1056)]).then(n.bind(n,68675))}function w(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function I(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function S(e){let t="normal",n="normal";if(e){const r=e.toLowerCase();r.includes("italic")?t="italic":r.includes("oblique")&&(t="oblique"),r.includes("bold")?n="bold":r.includes("light")&&(n="lighter")}return{style:t,weight:n}}function P(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function L(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=L(t);if(null!=e)return e}break;case"CIMTextSymbol":return L(e.symbol);case"CIMSolidFill":return e.color}}function x(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=x(e);if(null!=t)return t}break}case"CIMTextSymbol":return x(e.symbol);case"CIMSolidStroke":return e.color}}function A(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=A(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return A(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function G(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function z(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function O(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const E=e=>e.includes("data:image/svg+xml");function T(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}},49290:function(e,t,n){n.d(t,{Nk:function(){return a},mR:function(){return s}});n(44114);var r=n(37257),o=n(95049);function i(e,t,n,r){if(e)if("CIMTextSymbol"!==e.type){if(n&&e.effects)for(const n of e.effects)l(n,t);if(e.symbolLayers)for(const n of e.symbolLayers)switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":s(n,t,r);break;case"CIMPictureStroke":case"CIMSolidStroke":!r?.preserveOutlineWidth&&n.width&&(n.width*=t);break;case"CIMPictureFill":n.height&&(n.height*=t),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t);break;case"CIMHatchFill":i(n.lineSymbol,t,!0,{...r,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t),n.separation&&(n.separation*=t)}}else null!=e.height&&(e.height*=t)}function s(e,t,n){if(e&&(e.markerPlacement&&c(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=null!=e.size?e.size*t:0,"CIMVectorMarker"===e.type&&e.markerGraphics))for(const r of e.markerGraphics)e.scaleSymbolsProportionally||i(r.symbol,t,!0,n)}function c(e,t){switch((0,o.zr)(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}function l(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const n=e.dashTemplate.map((e=>e*t));e.dashTemplate=n}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function a(e){const t=[];return u((0,o.lW)(e),t),t.length?new r.A((0,o.ZT)(t[0])):null}function u(e,t){if(!e)return;let n;n="CIMTextSymbol"===e.type?e.symbol:e;const r="CIMPolygonSymbol"===e.type;if(n?.symbolLayers)for(const i of n.symbolLayers)if(!(i.colorLocked||r&&((0,o.mA)(i)||(0,o.MM)(i)&&i.markerPlacement&&(0,o.zr)(i.markerPlacement))))switch(i.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":i.tintColor&&f(t,i.tintColor);break;case"CIMVectorMarker":i.markerGraphics?.forEach((e=>{u(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":f(t,i.color);break;case"CIMHatchFill":u(i.lineSymbol,t)}}function f(e,t){for(const n of e)if(n.join(".")===t.join("."))return;e.push(t)}},1570:function(e,t,n){n.d(t,{$4:function(){return b},O1:function(){return M},Sw:function(){return k},eH:function(){return d},rc:function(){return g}});var r=n(8281),o=n(37257),i=n(86039),s=n(46795),c=n(18513),l=n(49290);const a="picture-fill",u="simple-fill",f="simple-line",m="simple-marker",p="text",h="cim",y=new s.q(1e3);function d(e){const t=e.style;let n=null;if(e)switch(e.type){case m:"cross"!==t&&"x"!==t&&(n=e.color);break;case u:"solid"===t?n=e.color:"none"!==t&&(n={type:"pattern",x:0,y:0,src:(0,r.s)(`geoscene/symbols/patterns/${t}.png`),width:5,height:5});break;case a:n={type:"pattern",src:e.url,width:(0,c.Lz)(e.width)*e.xscale,height:(0,c.Lz)(e.height)*e.yscale,x:(0,c.Lz)(e.xoffset),y:(0,c.Lz)(e.yoffset)};break;case p:n=e.color;break;case h:n=(0,l.Nk)(e)}return n}function g(e,t){const n=e+"-"+t;return void 0!==y.get(n)?Promise.resolve(y.get(n)):(0,i["default"])(e,{responseType:"image"}).then((e=>{const r=e.data,o=r.naturalWidth,i=r.naturalHeight,s=document.createElement("canvas");s.width=o,s.height=i;const c=s.getContext("2d");c.fillStyle=t,c.fillRect(0,0,o,i),c.globalCompositeOperation="destination-in",c.drawImage(r,0,0);const l=s.toDataURL();return y.put(n,l),l}))}function b(e){if(!e)return null;let t=null;switch(e.type){case u:case a:case m:t=b(e.outline);break;case f:{const n=(0,c.Lz)(e.width);null!=e.style&&"none"!==e.style&&0!==n&&(t={color:e.color,style:M(e.style),width:n,cap:e.cap,join:"miter"===e.join?(0,c.Lz)(e.miterLimit):e.join});break}default:t=null}return t}const M=(()=>{const e={};return t=>{if(e[t])return e[t];const n=t.replaceAll("-","");return e[t]=n,n}})(),k=new o.A([128,128,128])},45125:function(e,t,n){n.d(t,{$d:function(){return m},GG:function(){return E},N7:function(){return p},Sx:function(){return h},UQ:function(){return O},di:function(){return T},dt:function(){return M},yG:function(){return R}});var r=n(37257),o=n(85092),i=n(49067),s=(n(51020),n(79908)),c=n(456),l=n(37287),a=n(49290),u=(n(1570),n(28252));const f=new r.A("white");function m(e){if(null==e||!("symbolLayers"in e)||null==e.symbolLayers)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((e=>"object"===e.type));case"line-3d":return e.symbolLayers.some((e=>"path"===e.type));case"polygon-3d":return e.symbolLayers.some((e=>"object"===e.type||"extrude"===e.type));default:return!1}}function p(e){return(0,s.T7)(e.resource).href}function h(e,t){if(!e)return null;let n=null;return(0,o.wk)(e)?n=y(e):(0,o.$y)(e)&&(n="cim"===e.type?(0,a.Nk)(e):e.color?new r.A(e.color):null),n?d(n,t):null}function y(e){const t=e.symbolLayers;if(!t)return null;let n=null;return t.forEach((e=>{"object"===e.type&&e.resource?.href||(n="water"===e.type?e.color:e.material?e.material.color:null)})),n?new r.A(n):null}function d(e,t){if(null==t||null==e)return e;const n=e.toRgba();return n[3]=n[3]*t,new r.A(n)}function g(e,t,n){const r=e.symbolLayers;if(!r)return;const o=e=>d(t=t??e??(null!=n?f:null),n);r.forEach((e=>{if("object"!==e.type||!e.resource?.href||t)if("water"===e.type)e.color=o(e.color);else{const t=null!=e.material?e.material.color:null,r=o(t);null==e.material?e.material=new u.N({color:r}):e.material.color=r,null!=n&&"outline"in e&&null!=e.outline&&null!=e.outline.color&&(e.outline.color=d(e.outline.color,n))}}))}function b(e,t,n){(t=t??e.color)&&(e.color=d(t,n)),null!=n&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=d(e.outline.color,n))}function M(e,t,n){e&&(t||null!=n)&&(t&&(t=new r.A(t)),(0,o.wk)(e)?g(e,t,n):(0,o.$y)(e)&&b(e,t,n))}async function k(e,t){const n=e.symbolLayers;n&&await(0,i.jJ)(n,(async e=>C(e,t)))}async function C(e,t){switch(e.type){case"extrude":S(e,t);break;case"icon":case"line":case"text":w(e,t);break;case"path":L(e,t);break;case"object":await P(e,t)}}function w(e,t){const n=I(t);null!=n&&(e.size=n)}function I(e){for(const t of e)if("number"==typeof t)return t;return null}function S(e,t){e.size="number"==typeof t[2]?t[2]:0}async function P(e,t){const{resourceSize:n,symbolSize:r}=await A(e),o=x(t,n,r);e.width=G(t[0],r[0],n[0],o),e.depth=G(t[1],r[1],n[1],o),e.height=G(t[2],r[2],n[2],o)}function L(e,t){const n=x(t,c.O,[e.width,void 0,e.height]);e.width=G(t[0],e.width,1,n),e.height=G(t[2],e.height,1,n)}function x(e,t,n){for(let r=0;r<3;r++){const o=e[r];switch(o){case"symbol-value":{const e=n[r];return null!=e?e/t[r]:1}case"proportional":break;default:if(o&&t[r])return o/t[r]}}return 1}async function A(e){const{computeObjectLayerResourceSize:t}=await n.e(9376).then(n.bind(n,59376)),r=await t(e,10),{width:o,height:i,depth:s}=e,c=[o,s,i];let l=1;for(let n=0;n<3;n++){const e=c[n];if(null!=e){l=e/r[n];break}}for(let n=0;n<3;n++)null==c[n]&&(c[n]=r[n]*l);return{resourceSize:r,symbolSize:c}}function G(e,t,n,r){switch(e){case"proportional":return n*r;case"symbol-value":return null!=t?t:n;default:return e}}function z(e,t){const n=I(t);if(null!=n)switch(e.type){case"simple-marker":e.size=n;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=n,e.height=n*t):(e.width=n*t,e.height=n);break}case"simple-line":e.width=n;break;case"text":e.font.size=n}}async function O(e,t){if(e&&t)return(0,o.wk)(e)?k(e,t):void((0,o.$y)(e)&&z(e,t))}function E(e,t,n){if(e&&null!=t)if((0,o.wk)(e)){const r=e.symbolLayers;r&&r.forEach((e=>{if(e&&"object"===e.type)switch(n){case"tilt":e.tilt=t;break;case"roll":e.roll=t;break;default:e.heading=t}}))}else(0,o.$y)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle=t))}function T(e){if(!e)return null;const t=e.effects.filter((e=>"bloom"!==e.type)).map((e=>e.toJSON()));return(0,l.zu)(t)}async function R(e,t){const n=await e.fetchSymbol(t);return n||e.fetchCIMSymbol(t)}}}]);
//# sourceMappingURL=3652.ee6c7f72.js.map