{"version":3,"file":"js/9173.f54ccc01.js","mappings":"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","sources":["webpack://sun-glare-project/./node_modules/@geoscene/core/views/2d/engine/Bitmap.js","webpack://sun-glare-project/./node_modules/@geoscene/core/views/2d/engine/webgl/WGLRendererInfo.js","webpack://sun-glare-project/./node_modules/@geoscene/core/views/2d/engine/FeatureContainer.js","webpack://sun-glare-project/./node_modules/@geoscene/core/views/2d/engine/ImageryBitmapSource.js","webpack://sun-glare-project/./node_modules/@geoscene/core/views/2d/engine/webgl/TileContainer.js","webpack://sun-glare-project/./node_modules/@geoscene/core/views/2d/layers/graphics/GraphicBoundsRenderer.js","webpack://sun-glare-project/./node_modules/@geoscene/core/views/2d/layers/graphics/BaseGraphicContainer.js","webpack://sun-glare-project/./node_modules/@geoscene/core/views/2d/layers/graphics/HighlightGraphicContainer.js","webpack://sun-glare-project/./node_modules/@geoscene/core/views/layers/RefreshableLayerView.js","webpack://sun-glare-project/./node_modules/@geoscene/core/views/layers/support/popupUtils.js"],"sourcesContent":["/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport{applySome as t}from\"../../../core/maybe.js\";import{createResolver as e,onAbortOrThrow as s,throwIfNotAbortError as i}from\"../../../core/promiseUtils.js\";import{g as r,h,r as o,l as u,m as a}from\"../../../chunks/mat3.js\";import{c as n}from\"../../../chunks/mat3f32.js\";import{f as d}from\"../../../chunks/vec2f32.js\";import{DisplayObject as l}from\"./DisplayObject.js\";import c from\"./ImageryBitmapSource.js\";import{ContextType as _}from\"../../webgl/contextUtils.js\";import{SizedPixelFormat as p,PixelFormat as m,TextureWrapMode as x}from\"../../webgl/enums.js\";import{Texture as g}from\"../../webgl/Texture.js\";import{TextureDescriptor as f}from\"../../webgl/TextureDescriptor.js\";function w(t){return t&&\"render\"in t}function b(t){const e=document.createElement(\"canvas\");return e.width=t.width,e.height=t.height,t.render(e.getContext(\"2d\")),e}function v(e){return w(e)?e instanceof c?t(e.getRenderedRasterPixels(),(t=>t.renderedRasterPixels)):b(e):e}class T extends l{constructor(t=null,e=!1){super(),this.blendFunction=\"standard\",this._sourceWidth=0,this._sourceHeight=0,this._textureInvalidated=!1,this._texture=null,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.immutable=e,this.source=t,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null),null!=this._uploadStatus&&(this._uploadStatus.controller.abort(),this._uploadStatus=null)}get isSourceScaled(){return this.width!==this._sourceWidth||this.height!==this._sourceHeight}get height(){return void 0!==this._height?this._height:this._sourceHeight}set height(t){this._height=t}get source(){return this._source}set source(t){null==t&&null==this._source||(this._source=t,this.invalidateTexture(),this.requestRender())}get width(){return void 0!==this._width?this._width:this._sourceWidth}set width(t){this._width=t}beforeRender(t){super.beforeRender(t),this.updateTexture(t)}async setSourceAsync(t,i){null!=this._uploadStatus&&this._uploadStatus.controller.abort();const r=new AbortController,h=e();return s(i,(()=>r.abort())),s(r,(t=>h.reject(t))),this._uploadStatus={controller:r,resolver:h},this.source=t,h.promise}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this._source instanceof HTMLImageElement?(this._sourceHeight=this._source.naturalHeight,this._sourceWidth=this._source.naturalWidth):this._source&&(this._sourceHeight=this._source.height,this._sourceWidth=this._source.width))}updateTransitionProperties(t,e){t>=64&&(this.fadeTransitionEnabled=!1,this.inFadeTransition=!1),super.updateTransitionProperties(t,e)}setTransform(t){const e=r(this.transforms.dvs),[s,i]=t.toScreenNoRotation([0,0],[this.x,this.y]),n=this.resolution/this.pixelRatio/t.resolution,l=n*this.width,c=n*this.height,_=Math.PI*this.rotation/180;h(e,e,d(s,i)),h(e,e,d(l/2,c/2)),o(e,e,-_),h(e,e,d(-l/2,-c/2)),u(e,e,d(l,c)),a(this.transforms.dvs,t.displayViewMat3,e)}setSamplingProfile(t){this._texture&&(t.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(t.samplingMode))}bind(t,e){this._texture&&t.bindTexture(this._texture,e)}async updateTexture({context:t,painter:e}){if(!this._textureInvalidated)return;if(this._textureInvalidated=!1,this._texture||(this._texture=this._createTexture(t)),!this.source)return void this._texture.setData(null);this._texture.resize(this._sourceWidth,this._sourceHeight);const s=v(this.source);try{if(null!=this._uploadStatus){const{controller:t,resolver:i}=this._uploadStatus,r={signal:t.signal},{width:h,height:o}=this,u=this._texture,a=e.textureUploadManager;await a.enqueueTextureUpdate({data:s,texture:u,width:h,height:o},r),i.resolve(),this._uploadStatus=null}else this._texture.setData(s);this.ready()}catch(r){i(r)}}onDetach(){this.destroy()}_createTransforms(){return{dvs:n()}}_createTexture(t){const e=this.immutable&&t.type===_.WEBGL2,s=new f;return s.internalFormat=e?p.RGBA8:m.RGBA,s.wrapMode=x.CLAMP_TO_EDGE,s.isImmutable=e,s.width=this._sourceWidth,s.height=this._sourceHeight,new g(t,s)}}export{T as Bitmap,w as isImageSource,b as rasterize};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport{pt2px as e}from\"../../../../core/screenUtils.js\";import{getMetersPerUnitForSR as t}from\"../../../../core/unitUtils.js\";import{meterIn as i}from\"../../../../renderers/support/lengthUtils.js\";import{isDefined as s,isNumber as a}from\"./Utils.js\";import{Technique as l}from\"./techniques/Technique.js\";import{getTechniqueFromRenderer as r}from\"./techniques/utils.js\";import{getWebGLCapabilities as o}from\"../../../webgl/capabilities.js\";function n(e,t){const i=t.length;if(e<t[0].value||1===i)return t[0].size;for(let s=1;s<i;s++)if(e<t[s].value){const i=(e-t[s-1].value)/(t[s].value-t[s-1].value);return t[s-1].size+i*(t[s].size-t[s-1].size)}return t[i-1].size}class v{constructor(){this.symbolLevels=[],this.vvColorValues=new Float32Array(8),this.vvColors=new Float32Array(32),this.vvOpacityValues=new Float32Array(8),this.vvOpacities=new Float32Array(8),this.vvSizeMinMaxValue=new Float32Array(4),this.outsideLabelsVisible=!1,this._vvMaterialParameters={vvSizeEnabled:!1,vvColorEnabled:!1,vvRotationEnabled:!1,vvRotationType:\"geographic\",vvOpacityEnabled:!1},this._technique=l}getSizeVVFieldStops(e){const t=this._vvSizeFieldStops;if(t)switch(t.type){case\"static\":return t;case\"level-dependent\":return t.levels[e]??(()=>{let i=1/0,s=0;for(const o in t.levels){const t=parseFloat(o),a=Math.abs(e-t);a<i&&(i=a,s=t)}if(i===1/0)return{sizes:new Float32Array([0,0,0,0,0,0]),values:new Float32Array([0,0,0,0,0,0])};const a=2**((e-s)/2),l=t.levels[s],r=new Float32Array(l.values);return r[2]*=a,r[3]*=a,{sizes:l.sizes,values:r}})();default:return}}get vvMaterialParameters(){return this._vvMaterialParameters}update(e){null!=this._vvInfo&&this._updateVisualVariables(this._vvInfo.vvRanges,e)}setInfo(e,t,i){this._updateEffects(i),this._vvInfo=t,this._technique=r(e),this.rendererSchema=this._technique.createOrUpdateRendererSchema(this.rendererSchema,e)}getVariation(){return{...this._technique.getVariation(this.rendererSchema),outsideLabelsVisible:this.outsideLabelsVisible,supportsTextureFloat:o(\"2d\").supportsTextureFloat}}getVariationHash(){return this._technique.getVariationHash(this.rendererSchema)<<1|(this.outsideLabelsVisible?1:0)}_updateEffects(e){this.outsideLabelsVisible=null!=e&&e.excludedLabelsVisible}_updateVisualVariables(l,r){const o=this._vvMaterialParameters;if(o.vvOpacityEnabled=!1,o.vvSizeEnabled=!1,o.vvColorEnabled=!1,o.vvRotationEnabled=!1,!l)return;const v=l.size;if(v){if(o.vvSizeEnabled=!0,v.minMaxValue){const t=v.minMaxValue;let i,l;if(s(t.minSize)&&s(t.maxSize))if(a(t.minSize)&&a(t.maxSize))i=e(t.minSize),l=e(t.maxSize);else{const s=r.scale;i=e(n(s,t.minSize.stops)),l=e(n(s,t.maxSize.stops))}this.vvSizeMinMaxValue.set([t.minDataValue,t.maxDataValue,i,l])}if(v.scaleStops&&(this.vvSizeScaleStopsValue=e(n(r.scale,v.scaleStops.stops))),v.unitValue){const e=t(r.spatialReference)/i[v.unitValue.unit];this.vvSizeUnitValueToPixelsRatio=e/r.resolution}v.fieldStops&&(this._vvSizeFieldStops=v.fieldStops)}const u=l.color;u&&(o.vvColorEnabled=!0,this.vvColorValues.set(u.values),this.vvColors.set(u.colors));const c=l.opacity;c&&(o.vvOpacityEnabled=!0,this.vvOpacityValues.set(c.values),this.vvOpacities.set(c.opacities));const h=l.rotation;h&&(o.vvRotationEnabled=!0,o.vvRotationType=h.type)}}export{v as WGLRendererInfo};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport{createResolver as e}from\"../../../core/promiseUtils.js\";import t from\"../../../core/Queue.js\";import{AttributeStoreView as r}from\"./webgl/AttributeStoreView.js\";import s from\"./webgl/TileContainer.js\";import{WGLRendererInfo as i}from\"./webgl/WGLRendererInfo.js\";class o extends s{constructor(e){super(e),this._rendererInfo=new i,this._materialItemsRequestQueue=new t,this.attributeView=new r((()=>this.onAttributeStoreUpdate()))}destroy(){this.children.forEach((e=>e.destroy())),this.removeAllChildren(),this.attributeView.destroy(),this._materialItemsRequestQueue.clear()}setRendererInfo(e,t,r){this._rendererInfo.setInfo(e,t,r),this.requestRender()}async getMaterialItems(t,r){if(!t||0===t.length)return[];const s=e();return this._materialItemsRequestQueue.push({items:t,abortOptions:r,resolver:s}),this.requestRender(),s.promise}doRender(e){if(e.context.capabilities.enable(\"textureFloat\"),e.context.capabilities.enable(\"vao\"),this._materialItemsRequestQueue.length>0){let t=this._materialItemsRequestQueue.pop();for(;t;)this._processMaterialItemRequest(e,t),t=this._materialItemsRequestQueue.pop()}super.doRender(e)}renderChildren(e){for(const t of this.children)t.commit(e);this._rendererInfo.update(e.state),super.renderChildren(e)}updateTransforms(e){if(this.children.some((e=>e.hasData)))for(const t of this.children)t.setTransform(e)}createRenderParams(e){const t=super.createRenderParams(e);return t.rendererInfo=this._rendererInfo,t.attributeView=this.attributeView,t}onAttributeStoreUpdate(){}_processMaterialItemRequest(e,{items:t,abortOptions:r,resolver:s}){const{painter:i,pixelRatio:o}=e,a=t.map((e=>i.textureManager.rasterizeItem(e.symbol,o,e.glyphIds,r)));Promise.all(a).then((e=>{if(!this.stage)return void s.reject();const r=e.map(((e,r)=>({id:t[r].id,mosaicItem:e})));s.resolve(r)}),s.reject)}}export{o as FeatureContainer};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nclass l{constructor(l,e,t){this.pixelBlock=l,this.extent=e,this.originalPixelBlock=t}get width(){return null!=this.pixelBlock?this.pixelBlock.width:0}get height(){return null!=this.pixelBlock?this.pixelBlock.height:0}render(l){const e=this.pixelBlock;if(null==e)return;const t=this.filter({extent:this.extent,pixelBlock:this.originalPixelBlock??e});if(null==t.pixelBlock)return;t.pixelBlock.maskIsAlpha&&(t.pixelBlock.premultiplyAlpha=!0);const i=t.pixelBlock.getAsRGBA(),h=l.createImageData(t.pixelBlock.width,t.pixelBlock.height);h.data.set(i),l.putImageData(h,0,0)}getRenderedRasterPixels(){const l=this.filter({extent:this.extent,pixelBlock:this.pixelBlock});return null==l.pixelBlock?null:(l.pixelBlock.maskIsAlpha&&(l.pixelBlock.premultiplyAlpha=!0),{width:l.pixelBlock.width,height:l.pixelBlock.height,renderedRasterPixels:new Uint8Array(l.pixelBlock.getAsRGBA().buffer)})}}export{l as default};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport has from\"../../../../core/has.js\";import{WGLDrawPhase as e}from\"./enums.js\";import r from\"./WGLContainer.js\";import s from\"./brushes/WGLBrushInfo.js\";import t from\"./brushes/WGLBrushStencil.js\";const n=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;class i extends r{constructor(e){super(),this._tileInfoView=e}get requiresDedicatedFBO(){return!1}renderChildren(e){this.sortChildren(n),this.setStencilReference(e),super.renderChildren(e)}createRenderParams(e){const{state:r}=e,s=super.createRenderParams(e);return s.requiredLevel=this._tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(r.scale),s}prepareRenderPasses(r){const n=super.prepareRenderPasses(r);return n.push(r.registerRenderPass({name:\"stencil\",brushes:[t],drawPhase:e.DEBUG|e.MAP|e.HIGHLIGHT,target:()=>this.getStencilTarget()})),has(\"geoscene-tiles-debug\")&&n.push(r.registerRenderPass({name:\"tileInfo\",brushes:[s],drawPhase:e.DEBUG,target:()=>this.children})),n}getStencilTarget(){return this.children}setStencilReference(e){let r=1;for(const s of this.children)s.stencilRef=r++}}export{i as default};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport{disposeMaybe as t}from\"../../../../core/maybe.js\";import{g as e,m as r,h as s,d as i,r as o}from\"../../../../chunks/mat3.js\";import{c as a}from\"../../../../chunks/mat3f32.js\";import{f as n}from\"../../../../chunks/vec2f32.js\";import{f}from\"../../../../chunks/vec3f32.js\";import{normalizeMapX as l}from\"../../../../geometry/support/normalizeUtils.js\";import{DisplayObject as u}from\"../../engine/DisplayObject.js\";import{createProgramDescriptor as _}from\"../../engine/webgl/Utils.js\";import{BufferObject as c}from\"../../../webgl/BufferObject.js\";import{BlendFactor as h,PrimitiveType as m,DataType as d,Usage as p}from\"../../../webgl/enums.js\";import{VertexArrayObject as g}from\"../../../webgl/VertexArrayObject.js\";const v=Math.PI/180,x=4;class b extends u{constructor(t){super(),this._program=null,this._vao=null,this._vertexBuffer=null,this._indexBuffer=null,this._dvsMat3=a(),this._localOrigin={x:0,y:0},this._getBounds=t}destroy(){this._vao&&(this._vao.dispose(),this._vao=null,this._vertexBuffer=null,this._indexBuffer=null),this._program=t(this._program)}doRender(t){const{context:e}=t,r=this._getBounds();if(r.length<1)return;this._createShaderProgram(e),this._updateMatricesAndLocalOrigin(t),this._updateBufferData(e,r),e.setBlendingEnabled(!0),e.setDepthTestEnabled(!1),e.setStencilWriteMask(0),e.setStencilTestEnabled(!1),e.setBlendFunction(h.ONE,h.ONE_MINUS_SRC_ALPHA),e.setColorMask(!0,!0,!0,!0);const s=this._program;e.bindVAO(this._vao),e.useProgram(s),s.setUniformMatrix3fv(\"u_dvsMat3\",this._dvsMat3),e.gl.lineWidth(1),e.drawElements(m.LINES,8*r.length,d.UNSIGNED_INT,0),e.bindVAO()}_createTransforms(){return{dvs:a()}}_createShaderProgram(t){if(this._program)return;const e=\"precision highp float;\\n        uniform mat3 u_dvsMat3;\\n\\n        attribute vec2 a_position;\\n\\n        void main() {\\n          mediump vec3 pos = u_dvsMat3 * vec3(a_position, 1.0);\\n          gl_Position = vec4(pos.xy, 0.0, 1.0);\\n        }\",r=\"precision mediump float;\\n      void main() {\\n        gl_FragColor = vec4(0.75, 0.0, 0.0, 0.75);\\n      }\";this._program=t.programCache.acquire(e,r,y().attributes)}_updateMatricesAndLocalOrigin(t){const{state:a}=t,{displayMat3:u,size:_,resolution:c,pixelRatio:h,rotation:m,viewpoint:d}=a,p=v*m,{x:g,y:x}=d.targetGeometry,b=l(g,a.spatialReference);this._localOrigin.x=b,this._localOrigin.y=x;const y=h*_[0],B=h*_[1],M=c*y,j=c*B,A=e(this._dvsMat3);r(A,A,u),s(A,A,n(y/2,B/2)),i(A,A,f(_[0]/M,-B/j,1)),o(A,A,-p)}_updateBufferData(t,e){const{x:r,y:s}=this._localOrigin,i=2*x*e.length,o=new Float32Array(i),a=new Uint32Array(8*e.length);let n=0,f=0;for(const l of e)l&&(o[2*n]=l[0]-r,o[2*n+1]=l[1]-s,o[2*n+2]=l[0]-r,o[2*n+3]=l[3]-s,o[2*n+4]=l[2]-r,o[2*n+5]=l[3]-s,o[2*n+6]=l[2]-r,o[2*n+7]=l[1]-s,a[f]=n+0,a[f+1]=n+3,a[f+2]=n+3,a[f+3]=n+2,a[f+4]=n+2,a[f+5]=n+1,a[f+6]=n+1,a[f+7]=n+0,n+=4,f+=8);if(this._vertexBuffer?this._vertexBuffer.setData(o.buffer):this._vertexBuffer=c.createVertex(t,p.DYNAMIC_DRAW,o.buffer),this._indexBuffer?this._indexBuffer.setData(a):this._indexBuffer=c.createIndex(t,p.DYNAMIC_DRAW,a),!this._vao){const e=y();this._vao=new g(t,e.attributes,e.bufferLayouts,{geometry:this._vertexBuffer},this._indexBuffer)}}}const y=()=>_(\"bounds\",{geometry:[{location:0,name:\"a_position\",count:2,type:d.FLOAT}]});export{b as default};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport{destroyMaybe as e}from\"../../../../core/maybe.js\";import{FeatureContainer as t}from\"../../engine/FeatureContainer.js\";import r from\"./GraphicBoundsRenderer.js\";import{CompareFunction as s}from\"../../../webgl/enums.js\";let n=class extends t{constructor(e){super(e),this.hasHighlight=()=>!0}destroy(){super.destroy(),this._boundsRenderer=e(this._boundsRenderer)}enableRenderingBounds(e){this._boundsRenderer=new r(e),this.requestRender()}get hasLabels(){return!1}onTileData(e,t){e.patch(t),this.contains(e)||this.addChild(e),this.requestRender()}onTileError(e){e.clear(),this.contains(e)||this.addChild(e)}_renderChildren(e,t){for(const r of this.children)r.isReady&&r.hasData&&(r.commit(e),e.context.setStencilFunction(s.EQUAL,r.stencilRef,255),r.getDisplayList().replay(e,r,t))}};export{n as default};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/Error.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{WGLDrawPhase as s}from\"../../engine/webgl/enums.js\";import t from\"./BaseGraphicContainer.js\";import{ClearBufferBit as o}from\"../../../webgl/enums.js\";let i=class extends t{doRender(e){e.drawPhase===s.HIGHLIGHT&&super.doRender(e)}renderChildren(e){if(this.attributeView.update(),!this.children.some((e=>e.hasData)))return;this.attributeView.bindTextures(e.context),super.renderChildren(e);const{painter:r}=e,s=r.effects.highlight;s.bind(e),e.context.setColorMask(!0,!0,!0,!0),e.context.clear(o.COLOR_BUFFER_BIT),this._renderChildren(e,s.defines.concat([\"highlightAll\"])),s.draw(e),s.unbind()}};i=e([r(\"geoscene.views.2d.layers.support.HighlightGraphicContainer\")],i);const n=i;export{n as default};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/reactiveUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";const a=a=>{let c=class extends a{initialize(){this.handles.add(o((()=>this.layer),\"refresh\",(r=>{this.doRefresh(r.dataChanged).catch((r=>{s(r)||e.getLogger(this).error(r)}))})),\"RefreshableLayerView\")}};return r([t()],c.prototype,\"layer\",void 0),c=r([i(\"geoscene.layers.mixins.RefreshableLayerView\")],c),c};export{a as default};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport{getFeatureEditFields as e,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function n(n,p=n.popupTemplate){if(null==p)return[];const t=await p.getRequiredFields(n.fieldsIndex),{lastEditInfoEnabled:u}=p,{objectIdField:d,typeIdField:i,globalIdField:s,relationships:a}=n;if(t.includes(\"*\"))return[\"*\"];const o=u?await e(n):[],f=l(n.fieldsIndex,[...t,...o]);return i&&f.push(i),f&&d&&n.fieldsIndex?.has(d)&&!f.includes(d)&&f.push(d),f&&s&&n.fieldsIndex?.has(s)&&!f.includes(s)&&f.push(s),a&&a.forEach((e=>{const{keyField:l}=e;f&&l&&n.fieldsIndex?.has(l)&&!f.includes(l)&&f.push(l)})),f}function p(e,l){return e.popupTemplate?e.popupTemplate:null!=l&&l.defaultPopupTemplateEnabled&&null!=e.defaultPopupTemplate?e.defaultPopupTemplate:null}function t(e,l){return null!=p(e,{defaultPopupTemplateEnabled:l})}export{p as getFetchPopupTemplate,n as getRequiredFields,t as hasPopupTemplate};"],"names":["w","t","b","e","document","createElement","width","height","render","getContext","v","c","getRenderedRasterPixels","renderedRasterPixels","T","l","constructor","super","this","blendFunction","_sourceWidth","_sourceHeight","_textureInvalidated","_texture","stencilRef","coordScale","_height","pixelRatio","resolution","rotation","_source","_width","x","y","immutable","source","requestRender","bind","destroy","dispose","_uploadStatus","controller","abort","isSourceScaled","invalidateTexture","beforeRender","updateTexture","setSourceAsync","i","r","AbortController","h","s","reject","resolver","promise","HTMLImageElement","naturalHeight","naturalWidth","updateTransitionProperties","fadeTransitionEnabled","inFadeTransition","setTransform","transforms","dvs","toScreenNoRotation","n","_","Math","PI","d","o","u","a","displayViewMat3","setSamplingProfile","mips","descriptor","hasMipmap","generateMipmap","setSamplingMode","samplingMode","bindTexture","context","painter","_createTexture","setData","resize","signal","textureUploadManager","enqueueTextureUpdate","data","texture","resolve","ready","onDetach","_createTransforms","type","WEBGL2","f","internalFormat","p","RGBA8","m","RGBA","wrapMode","CLAMP_TO_EDGE","isImmutable","g","length","value","size","symbolLevels","vvColorValues","Float32Array","vvColors","vvOpacityValues","vvOpacities","vvSizeMinMaxValue","outsideLabelsVisible","_vvMaterialParameters","vvSizeEnabled","vvColorEnabled","vvRotationEnabled","vvRotationType","vvOpacityEnabled","_technique","getSizeVVFieldStops","_vvSizeFieldStops","levels","parseFloat","abs","sizes","values","vvMaterialParameters","update","_vvInfo","_updateVisualVariables","vvRanges","setInfo","_updateEffects","rendererSchema","createOrUpdateRendererSchema","getVariation","supportsTextureFloat","getVariationHash","excludedLabelsVisible","minMaxValue","minSize","maxSize","scale","stops","set","minDataValue","maxDataValue","scaleStops","vvSizeScaleStopsValue","unitValue","spatialReference","unit","vvSizeUnitValueToPixelsRatio","fieldStops","color","colors","opacity","opacities","_rendererInfo","_materialItemsRequestQueue","attributeView","onAttributeStoreUpdate","children","forEach","removeAllChildren","clear","setRendererInfo","getMaterialItems","push","items","abortOptions","doRender","capabilities","enable","pop","_processMaterialItemRequest","renderChildren","commit","state","updateTransforms","some","hasData","createRenderParams","rendererInfo","map","textureManager","rasterizeItem","symbol","glyphIds","Promise","all","then","stage","id","mosaicItem","pixelBlock","extent","originalPixelBlock","filter","maskIsAlpha","premultiplyAlpha","getAsRGBA","createImageData","putImageData","Uint8Array","buffer","key","level","row","col","_tileInfoView","requiresDedicatedFBO","sortChildren","setStencilReference","requiredLevel","getClosestInfoForScale","displayLevel","tileInfo","scaleToZoom","prepareRenderPasses","registerRenderPass","name","brushes","drawPhase","DEBUG","MAP","HIGHLIGHT","target","getStencilTarget","has","_program","_vao","_vertexBuffer","_indexBuffer","_dvsMat3","_localOrigin","_getBounds","_createShaderProgram","_updateMatricesAndLocalOrigin","_updateBufferData","setBlendingEnabled","setDepthTestEnabled","setStencilWriteMask","setStencilTestEnabled","setBlendFunction","ONE","ONE_MINUS_SRC_ALPHA","setColorMask","bindVAO","useProgram","setUniformMatrix3fv","gl","lineWidth","drawElements","LINES","UNSIGNED_INT","programCache","acquire","attributes","displayMat3","viewpoint","targetGeometry","B","M","j","A","Uint32Array","createVertex","DYNAMIC_DRAW","createIndex","bufferLayouts","geometry","location","count","FLOAT","hasHighlight","_boundsRenderer","enableRenderingBounds","hasLabels","onTileData","patch","contains","addChild","onTileError","_renderChildren","isReady","setStencilFunction","EQUAL","getDisplayList","replay","bindTextures","effects","highlight","COLOR_BUFFER_BIT","defines","concat","draw","unbind","initialize","handles","add","layer","doRefresh","dataChanged","catch","getLogger","error","prototype","async","popupTemplate","getRequiredFields","fieldsIndex","lastEditInfoEnabled","objectIdField","typeIdField","globalIdField","relationships","includes","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate"],"sourceRoot":""}