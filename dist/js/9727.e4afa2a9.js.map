{"version":3,"file":"js/9727.e4afa2a9.js","mappings":"uMAI8H,MAAMA,UAAUC,EAAAA,EAAEC,WAAAA,GAAcC,SAASC,WAAWC,KAAKC,eAAc,CAAE,CAAC,wBAAIC,GAAuB,OAAOF,KAAKC,aAAa,CAACE,YAAAA,CAAaC,GAAGN,MAAMK,aAAaC,GAAGJ,KAAKK,aAAa,CAACC,mBAAAA,CAAoBV,GAAG,MAAMD,EAAEC,EAAEW,mBAAmB,CAACC,KAAK,SAASC,QAAQ,CAACL,EAAAA,EAAEM,QAAQC,OAAOA,IAAIX,KAAKY,SAASC,UAAUC,EAAAA,GAAEC,MAAM,MAAM,IAAIjB,MAAMQ,oBAAoBV,GAAGD,EAAE,CAACU,WAAAA,GAAcL,KAAKY,SAASI,QAAQ,CAACZ,EAAEU,IAAIV,GAAGU,EAAEG,iBAAiB,EAAE,IAAI,IAAI,GAAGjB,KAAKY,SAASM,SAASd,GAAGA,EAAEe,cAAc,aAAanB,KAAKC,eAAc,IAAKD,KAAKY,SAASM,SAASd,GAAGA,EAAEe,cAAc,aAAanB,KAAKC,eAAc,EAAG,E,sTCA2H,IAAImB,EAAE,cAAcC,EAAAA,EAAExB,WAAAA,GAAcC,SAASC,WAAWC,KAAKsB,UAAS,EAAGtB,KAAKuB,UAAU,IAAIC,EAAAA,EAAExB,KAAKyB,iBAAgB,EAAGzB,KAAK0B,KAAK,UAAU1B,KAAK2B,YAAY,IAAIC,EAAAA,CAAC,CAACC,OAAAA,GAAU7B,KAAKsB,WAAWtB,KAAK8B,SAAS9B,KAAKsB,UAAS,GAAItB,KAAKyB,iBAAgB,CAAE,CAAC,YAAIM,GAAW,OAAO/B,KAAKsB,UAAUtB,KAAKgC,YAAY,CAACC,MAAAA,CAAOC,GAAGlC,KAAKmC,SAASF,OAAOC,GAAGE,OAAOF,KAAIpB,EAAAA,EAAAA,IAAEoB,IAAItC,EAAAA,EAAEyC,UAAUrC,MAAMsC,MAAMJ,EAAE,GAAG,CAACK,OAAAA,CAAQL,GAAG,OAAO,IAAI9B,EAAAA,EAAE,CAACoC,WAAW,CAAC,EAAEC,SAASP,EAAEQ,QAAQC,MAAM3C,KAAK2C,OAAO,CAACC,MAAAA,GAAS5C,KAAKuB,UAAUsB,SAAS7C,KAAK2B,aAAa,MAAMO,EAAElC,KAAK2C,MAAMG,SAAS,GAAG1C,EAAEJ,KAAK2C,MAAMG,SAAS,KAAK9C,KAAK2C,MAAMI,eAAe,KAAK1B,EAAErB,KAAK2C,MAAMG,SAAS,KAAK9C,KAAK2C,MAAMK,cAAc,KAAKhD,KAAKmC,SAAS,IAAIc,EAAAA,EAAE,CAAC1B,UAAUvB,KAAK2B,YAAYuB,4BAA4BhB,EAAEa,eAAe3C,EAAE4C,cAAc3B,EAAE8B,YAAYnD,KAAKoD,YAAYC,KAAKrD,MAAMsD,cAAcA,IAAItD,KAAKsD,iBAAiB,CAACxB,MAAAA,GAAS9B,KAAKmC,SAASN,UAAU7B,KAAK2B,YAAY4B,oBAAoBvD,KAAKuB,UAAUgC,oBAAoBvD,KAAKyB,iBAAgB,CAAE,CAAC+B,MAAAA,GAASxD,KAAKmC,SAASsB,eAAeC,UAAU,MAAMC,OAAOvD,GAAG8B,EAAE,IAAI9B,GAAGA,aAAawD,YAAY,OAAO,MAAMvC,QAAQrB,KAAK2C,MAAMkB,cAAc,CAACC,OAAO1D,EAAE0D,OAAOC,WAAW3D,EAAE4D,oBAAoB5D,EAAE2D,aAAa3D,EAAE6D,OAAO/B,GAAGlC,KAAK2C,MAAMuB,YAAYlE,KAAK2C,MAAMwB,YAAYjC,GAAG,IAAIb,EAAEyC,OAAO1D,EAAE0D,OAAO,IAAI1B,OAAOF,KAAIpB,EAAAA,EAAAA,IAAEoB,IAAItC,EAAAA,EAAEyC,UAAUrC,MAAMsC,MAAMJ,EAAE,GAAG,CAACoB,aAAAA,GAAgBtD,KAAKyB,kBAAkBzB,KAAKyB,iBAAgB,EAAGzB,KAAKoE,KAAKd,gBAAgB,CAACtB,UAAAA,GAAa,OAAOhC,KAAKmC,SAASJ,UAAU/B,KAAKyB,eAAe,CAAC4C,YAAAA,GAAe,GAAGrE,KAAK+B,SAAS,OAAO,KAAK,MAAMG,EAAElC,KAAKmC,SAASmC,QAAQ,GAAG,IAAIpC,EAAEqC,QAAQrC,EAAE,GAAGyB,OAAO,MAAM,CAACG,OAAO5B,EAAE,GAAGyB,OAAOG,OAAOC,WAAW7B,EAAE,GAAGyB,OAAOK,oBAAoB,GAAG9B,EAAEqC,OAAO,EAAE,CAAC,MAAMnE,EAAEJ,KAAKoE,KAAKN,OAAOzC,EAAEa,EAAEsC,KAAKtC,GAAGA,EAAEyB,SAASM,QAAQ/B,GAAGA,EAAE4B,QAAQ5B,EAAE4B,OAAOW,WAAWrE,KAAKoE,KAAKtC,IAAC,CAAI4B,OAAO5B,EAAE4B,OAAOC,WAAW7B,EAAE8B,uBAAuBpE,GAAE8E,EAAAA,EAAAA,IAAErD,EAAEjB,GAAG,OAAO,MAAMR,EAAE,CAACkE,OAAOlE,EAAEkE,OAAOC,WAAWnE,EAAEmE,YAAY,IAAI,CAAC,OAAO,IAAI,CAAC,iBAAMX,CAAYlB,EAAE9B,EAAEiB,EAAEzB,IAAIA,EAAEA,GAAG,CAAC,GAAG+E,WAAW3E,KAAK2E,WAAW/E,EAAEgF,uBAAsB,EAAGhF,EAAEiF,mBAAkB,EAAG,MAAM/D,QAAQd,KAAK2C,MAAMmC,WAAW5C,EAAE9B,EAAEiB,EAAEzB,GAAG,GAAGkB,EAAEiE,YAAY,OAAOjE,EAAEiE,YAAY,MAAMpF,QAAQK,KAAK2C,MAAMkB,cAAc/C,EAAEkE,UAAU,CAACC,OAAOrF,EAAEqF,SAASC,EAAE,IAAIC,EAAAA,EAAExF,EAAEoE,WAAWpE,EAAEmE,QAAQpB,QAAQ5B,EAAEkE,UAAUjB,YAAY,OAAOmB,EAAEjB,OAAO/B,GAAGlC,KAAK2C,MAAMwB,YAAYjC,GAAGgD,CAAC,IAAGhD,EAAAA,EAAAA,GAAE,EAACvC,EAAAA,EAAAA,OAAKyB,EAAEgE,UAAU,gBAAW,IAAQlD,EAAAA,EAAAA,GAAE,EAACvC,EAAAA,EAAAA,OAAKyB,EAAEgE,UAAU,iBAAY,IAAQlD,EAAAA,EAAAA,GAAE,EAACvC,EAAAA,EAAAA,OAAKyB,EAAEgE,UAAU,aAAQ,IAAQlD,EAAAA,EAAAA,GAAE,EAACvC,EAAAA,EAAAA,OAAKyB,EAAEgE,UAAU,gBAAW,IAAQlD,EAAAA,EAAAA,GAAE,EAACvC,EAAAA,EAAAA,OAAKyB,EAAEgE,UAAU,kBAAa,IAAQlD,EAAAA,EAAAA,GAAE,EAACvC,EAAAA,EAAAA,OAAKyB,EAAEgE,UAAU,YAAO,IAAQlD,EAAAA,EAAAA,GAAE,EAACvC,EAAAA,EAAAA,OAAKyB,EAAEgE,UAAU,uBAAkB,IAAQlD,EAAAA,EAAAA,GAAE,EAACvC,EAAAA,EAAAA,OAAKyB,EAAEgE,UAAU,WAAW,OAAMlD,EAAAA,EAAAA,GAAE,EAACvC,EAAAA,EAAAA,OAAKyB,EAAEgE,UAAU,YAAO,GAAQhE,GAAEc,EAAAA,EAAAA,GAAE,EAACgD,EAAAA,EAAAA,GAAE,mDAAmD9D,GAAG,MAAMiE,EAAEjE,E,0FCAr1G,MAAMc,UAAUpB,EAAAA,EAAEjB,WAAAA,GAAcC,SAASC,WAAWC,KAAKsF,YAAY,CAAC,WAAW,CAAC,wBAAIpF,GAAuB,OAAM,CAAE,CAACI,mBAAAA,CAAoBQ,GAAG,MAAMoB,EAAEpB,EAAEP,mBAAmB,CAACC,KAAK,eAAeC,QAAQ,CAACL,EAAAA,GAAGO,OAAOA,IAAIX,KAAKY,SAASC,UAAUjB,EAAAA,GAAEmB,MAAM,MAAM,IAAIjB,MAAMQ,oBAAoBQ,GAAGoB,EAAE,CAACqD,QAAAA,CAASnF,GAAGJ,KAAKwF,SAASpF,EAAES,YAAYjB,EAAAA,GAAEmB,KAAKf,KAAKsF,YAAYpE,SAAStB,IAAIQ,EAAEqF,WAAW7F,EAAEE,MAAMyF,SAASnF,EAAE,GAAG,E,eCAkH,IAAI+E,EAAE,cAAcjD,EAAAA,EAAErC,WAAAA,CAAYO,GAAGN,MAAMM,GAAGJ,KAAK0F,SAAS,KAAK1F,KAAKiC,QAAOZ,EAAAA,EAAAA,KAAG,CAACjB,EAAE8B,IAAIlC,KAAK2F,QAAQvF,EAAE8B,GAAGE,OAAOhC,KAAIU,EAAAA,EAAAA,IAAEV,IAAIR,EAAAA,EAAEyC,UAAUrC,MAAMsC,MAAMlC,EAAE,KAAK,CAAC,YAAI2B,GAAW,QAAQ/B,KAAK0F,QAAQ,CAAClC,MAAAA,CAAOpD,GAAG,IAAIJ,KAAKuB,UAAUX,SAAS2D,OAAO,OAAO,MAAMrC,EAAElC,KAAKuB,UAAUX,SAAS,GAAGsB,EAAE0D,qBAAqBxF,EAAE8B,EAAE2D,gBAAgB7F,KAAKuB,UAAU+D,YAAY,eAAelF,EAAE0F,MAAM,CAAC,SAAS,YAAY,kBAAkB1F,EAAE0F,MAAM,CAAC,UAAU,CAAC,YAAY9F,KAAKuB,UAAUwE,eAAe,CAAC,aAAMJ,CAAQvF,EAAE8B,EAAEtC,GAAG,IAAIQ,EAAE4F,WAAW,OAAO,MAAMlC,OAAOzC,EAAE4E,iBAAiBnF,GAAGV,EAAE8F,MAAMhB,EAAE,IAAItD,EAAAA,EAAE,CAACuE,KAAK9E,EAAE8E,KAAKC,KAAK/E,EAAE+E,KAAKC,KAAKhF,EAAEgF,KAAKC,KAAKjF,EAAEiF,KAAKL,iBAAiBnF,KAAKnB,EAAE6B,GAAGpB,EAAE8F,MAAMK,KAAKvG,KAAK0F,SAAS1F,KAAKwG,YAAYtB,EAAEvF,EAAE6B,EAAE5B,GAAG,MAAMuF,QAAQnF,KAAK0F,SAAS1F,KAAKyG,cAActB,EAAEjD,EAAE9B,EAAE8F,OAAOlG,KAAK0F,SAAS,IAAI,CAACe,aAAAA,CAAcrG,EAAE8B,EAAEtC,GAAG,GAAG,MAAMQ,EAAE2D,WAAW,OAAO/D,KAAKuB,UAAUX,SAASM,SAASd,GAAGA,EAAEyB,iBAAiB7B,KAAKuB,UAAUgC,oBAAoB,MAAMO,OAAOzC,EAAE0C,WAAWjD,GAAGV,EAAE8E,EAAE,IAAI1D,EAAAA,EAAEV,GAAGoE,EAAEwB,OAAO,CAAC,EAAE,GAAGxB,EAAEU,qBAAqB1D,EAAEgD,EAAEyB,aAAavG,EAAE8E,EAAEW,gBAAgBX,EAAE0B,EAAEvF,EAAE8E,KAAKjB,EAAE2B,EAAExF,EAAEiF,KAAKpB,EAAE4B,WAAWlH,EAAEkH,WAAW5B,EAAE6B,SAASnH,EAAEmH,SAAS7B,EAAE8B,WAAWpH,EAAEoH,WAAW9B,EAAE+B,MAAMnG,EAAEmG,MAAM/E,EAAEgF,eAAehC,EAAEiC,OAAOrG,EAAEqG,OAAOjF,EAAEgF,eAAelH,KAAKuB,UAAUX,SAASM,SAASd,GAAGA,EAAEyB,YAAY7B,KAAKuB,UAAUgC,oBAAoBvD,KAAKuB,UAAU+D,YAAY,eAAepD,EAAE4D,MAAM,CAAC,SAAS,YAAY,kBAAkB5D,EAAE4D,MAAM,CAAC,UAAU,CAAC,YAAY9F,KAAKuB,UAAUsB,SAASqC,EAAE,IAAG9E,EAAAA,EAAAA,GAAE,EAAC8E,EAAAA,EAAAA,OAAKC,EAAEC,UAAU,mBAAc,IAAQhF,EAAAA,EAAAA,GAAE,EAAC8E,EAAAA,EAAAA,OAAKC,EAAEC,UAAU,iBAAY,IAAQhF,EAAAA,EAAAA,GAAE,EAAC8E,EAAAA,EAAAA,OAAKC,EAAEC,UAAU,gBAAW,IAAQhF,EAAAA,EAAAA,GAAE,EAAC8E,EAAAA,EAAAA,OAAKC,EAAEC,UAAU,WAAW,MAAMD,GAAE/E,EAAAA,EAAAA,GAAE,EAACT,EAAAA,EAAAA,GAAE,uDAAuDwF,GAAG,MAAMT,EAAES,ECAx0C,IAAIE,EAAE,cAAchE,EAAAA,EAAExB,WAAAA,GAAcC,SAASC,WAAWC,KAAKsB,UAAS,EAAGtB,KAAKuB,UAAU,IAAI0B,EAAEjD,KAAK0B,KAAK,YAAY1B,KAAKoH,gBAAgB,CAACC,wBAAwB,EAAEC,KAAK,GAAGJ,eAAe,EAAEK,KAAK,IAAIvH,KAAKwH,aAAa9D,MAAMxB,EAAE9B,EAAER,EAAEyB,KAAK,MAAMP,QAAQd,KAAKyH,2BAA2BP,eAAevH,GAAGK,KAAK2C,MAAM+E,UAAU5D,OAAOoB,EAAE+B,MAAMrF,EAAEuF,OAAO3F,IAAGJ,EAAAA,EAAAA,IAAEc,EAAE9B,EAAER,EAAED,EAAEmB,GAAG,GAAG,MAAMA,IAAIA,EAAE2D,WAAWvC,GAAG,MAAM,CAAC4B,OAAOoB,EAAEnB,WAAW,MAAM,MAAMoB,EAAE,CAACmC,KAAK,GAAGpC,EAAEiB,SAASjB,EAAEkB,SAASlB,EAAEmB,SAASnB,EAAEoB,OAAOe,wBAAwBrH,KAAK2C,MAAMgF,6BAA6B7E,QAAQoE,eAAevH,EAAE4H,KAAKK,KAAKC,UAAU7H,KAAK2E,YAAY,KAAK,GAAG3E,KAAK8H,yBAAyB3C,GAAG,CAAC,MAAMjD,EAAElC,KAAKqE,eAAe,GAAG,MAAMnC,GAAM,GAAGA,EAAE4B,OAAOqC,SAASjE,EAAE4B,OAAOsC,SAASlE,EAAE4B,OAAOuC,SAASnE,EAAE4B,OAAOwC,SAASnB,EAAEmC,KAAK,OAAOpF,CAAE,CAAC,MAAM8C,UAAU/B,SAASjD,KAAK2C,MAAMmC,WAAWI,EAAEtD,EAAEJ,EAAE,CAACmD,WAAW3E,KAAK2E,WAAWC,uBAAsB,EAAGK,OAAO5D,IAAIrB,KAAKoH,gBAAgBjC,EAAE,MAAM0B,EAAE5D,GAAGc,WAAW,OAAG,MAAM8C,EAAQ,CAAC/C,OAAOoB,EAAEnB,WAAW,MAAY,CAACD,OAAOoB,EAAEnB,WAAW,cAAc/D,KAAK2C,MAAMoF,WAAWC,UAAStD,EAAAA,EAAAA,IAAEmC,EAAE,aAAaA,EAAE,CAAC,CAAC,YAAI9E,GAAW,OAAO/B,KAAKsB,UAAUtB,KAAKiI,UAAUlG,QAAQ,CAACa,MAAAA,GAAS5C,KAAKyH,0BAA0BzH,KAAKkI,wBAAwBlI,KAAKoE,KAAK6B,kBAAkBjG,KAAKiI,UAAU,IAAIpB,EAAE,CAACtF,UAAUvB,KAAKuB,UAAUiF,YAAYxG,KAAKwH,eAAexH,KAAKmI,QAAQC,KAAItH,EAAAA,EAAAA,KAAG,IAAId,KAAK2C,MAAM+E,WAAWxF,GAAGlC,KAAKqI,wBAAwBnG,IAAIvC,EAAAA,IAAG,SAAS,CAACmC,MAAAA,GAAS9B,KAAKiI,UAAUpG,UAAU7B,KAAKuB,UAAUX,SAASM,SAASgB,GAAGA,EAAEL,YAAY7B,KAAKuB,UAAUgC,oBAAoBvD,KAAKmI,QAAQG,OAAO,UAAUtI,KAAKiI,UAAUjI,KAAKuB,UAAUvB,KAAKyH,0BAA0B,IAAI,CAACpD,YAAAA,GAAe,MAAMnC,EAAElC,KAAKuB,UAAUX,SAAS,IAAI+F,aAAa,GAAG3G,KAAK+B,WAAWG,EAAE,OAAO,KAAK,MAAM4B,OAAO1D,EAAE2D,WAAWnE,GAAGsC,EAAE,MAAM,CAAC4B,OAAO1D,EAAE2D,WAAWnE,EAAE,CAAC2C,OAAAA,CAAQL,GAAG,OAAO,IAAI9B,EAAAA,EAAE,CAACoC,WAAW,CAAC,EAAEC,SAASP,EAAEQ,QAAQC,MAAM3C,KAAK2C,OAAO,CAACV,MAAAA,CAAOC,GAAGlC,KAAKiI,UAAUhG,OAAOC,EAAElC,KAAKuI,kBAAkB,CAAC/E,MAAAA,GAAS,MAAMkE,SAASxF,GAAGlC,KAAK2C,MAAMT,IAAIlC,KAAKqI,wBAAwBnG,GAAGlC,KAAKiI,UAAUzE,OAAOxD,KAAKuI,mBAAmB,CAACT,wBAAAA,CAAyB5F,GAAG,MAAM9B,EAAEJ,KAAKoH,gBAAgBC,0BAA0BnF,EAAEmF,wBAAwBzH,EAAEI,KAAKoH,gBAAgBG,OAAOrF,EAAEqF,KAAKlG,EAAErB,KAAKoH,gBAAgBF,iBAAiBhF,EAAEgF,eAAepG,EAAEd,KAAKoH,gBAAgBE,OAAOpF,EAAEoF,KAAK,OAAOlH,GAAGR,GAAGyB,GAAGP,CAAC,CAAC,6BAAMoH,CAAwBhG,GAAG,IAAI,aAAaiD,EAAAA,EAAAA,IAAEnF,KAAK2C,MAAM6F,WAAWtG,EAAE,CAAC,MAAM9B,GAAG,IAAI,MAAMA,SAASR,EAAAA,EAAAA,YAAEI,KAAK2C,MAAM8F,IAAI,CAACC,MAAM,CAACC,OAAO,aAAaC,MAAM1G,EAAE2G,MAAMjB,KAAKC,UAAU3F,EAAE4G,UAAUC,EAAE,WAAWC,KAAKC,kBAAkBC,OAAO,GAAGC,gBAAgBrF,OAAO,OAAO1D,EAAEoB,EAAAA,EAAE4H,SAAShJ,GAAG,IAAI,CAAC,MAAM,OAAO,IAAI,CAAC,CAAC,CAACiI,uBAAAA,CAAwBnG,GAAG,iBAAiBA,EAAER,OAAO1B,KAAKuI,kBAAkBvI,KAAK2C,MAAM0G,WAAWC,wBAAwB,CAACvF,WAAW,OAAO,IAAG7B,EAAAA,EAAAA,GAAE,EAACgD,EAAAA,EAAAA,OAAKG,EAAED,UAAU,gBAAW,IAAQlD,EAAAA,EAAAA,GAAE,EAACgD,EAAAA,EAAAA,OAAKG,EAAED,UAAU,iBAAY,IAAQlD,EAAAA,EAAAA,GAAE,EAACgD,EAAAA,EAAAA,OAAKG,EAAED,UAAU,aAAQ,IAAQlD,EAAAA,EAAAA,GAAE,EAACgD,EAAAA,EAAAA,OAAKG,EAAED,UAAU,kBAAa,IAAQlD,EAAAA,EAAAA,GAAE,EAACgD,EAAAA,EAAAA,OAAKG,EAAED,UAAU,YAAO,IAAQlD,EAAAA,EAAAA,GAAE,EAACgD,EAAAA,EAAAA,OAAKG,EAAED,UAAU,YAAO,IAAQlD,EAAAA,EAAAA,GAAE,EAACgD,EAAAA,EAAAA,OAAKG,EAAED,UAAU,WAAW,MAAMC,GAAEnD,EAAAA,EAAAA,GAAE,EAACN,EAAAA,EAAAA,GAAE,uDAAuDyD,GAAG,MAAMkE,EAAElE,E,2DCAl4G,MAAMzD,EAAEA,IAAI,IAAIyD,EAAE,cAAczD,EAAE/B,WAAAA,GAAcC,SAASC,WAAWC,KAAKoE,KAAK,IAAI,CAAC,wBAAMoF,CAAmBpJ,EAAE8B,GAAG,MAAMS,MAAMuC,GAAGlF,KAAK,IAAII,EAAE,MAAM,IAAIR,EAAAA,EAAE,sCAAsC,gCAAgC,CAAC+C,MAAMuC,IAAI,MAAMuE,aAAa/E,GAAGQ,EAAEtD,GAAEjC,EAAAA,EAAAA,IAAEuF,EAAEhD,GAAG,IAAIwC,GAAG,MAAM9C,EAAE,MAAM,IAAIhC,EAAAA,EAAE,sCAAsC,iDAAiD,CAAC6J,aAAa/E,EAAEgF,cAAc9H,IAAI,MAAMyD,QAAQzD,EAAE+H,oBAAoBnI,EAAE,IAAIH,EAAAA,EAAEG,EAAEmD,WAAW3E,KAAK2E,WAAWnD,EAAEiB,SAASrC,EAAEoB,EAAEoI,UAAUvE,EAAE7D,EAAEqI,oBAAoBzJ,EAAE6F,iBAAiB,MAAMe,WAAW5F,EAAE6E,iBAAiBd,GAAGnF,KAAKoE,KAAKyC,EAAE,OAAO7G,KAAKoE,KAAK1C,KAAK,IAAIZ,EAAAA,EAAEM,EAAEA,EAAE+D,GAAG,IAAIrE,EAAAA,EAAE,GAAGM,EAAE,GAAGA,EAAE+D,IAAI2E,oBAAoBP,EAAEQ,kBAAkB9G,GAAGrB,EAAEoI,cAAc,CAACF,qBAAoB,EAAGC,mBAAkB,GAAIE,EAAE,CAACC,oBAAmB,EAAGJ,oBAAoBP,EAAEY,UAAUtD,EAAEkD,kBAAkB9G,EAAEgC,OAAO,MAAM/C,EAAEA,EAAE+C,OAAO,MAAM,OAAOC,EAAEkF,oBAAoB5I,EAAEyI,GAAGI,MAAMjK,GAAGA,GAAG,CAACkK,SAAAA,GAAY,QAAQxK,MAAMwK,cAActK,KAAK2E,YAAY4F,OAAO,GAAG,OAAOnK,EAAAA,EAAAA,GAAE,EAAC8B,EAAAA,EAAAA,OAAKmD,EAAED,UAAU,aAAQ,IAAQhF,EAAAA,EAAAA,GAAE,EAAC8B,EAAAA,EAAAA,OAAKmD,EAAED,UAAU,iBAAY,IAAQhF,EAAAA,EAAAA,GAAE,EAAC8B,EAAAA,EAAAA,IAAEwC,EAAAA,KAAIW,EAAED,UAAU,kBAAa,IAAQhF,EAAAA,EAAAA,GAAE,EAAC8B,EAAAA,EAAAA,OAAKmD,EAAED,UAAU,YAAO,GAAQC,GAAEjF,EAAAA,EAAAA,GAAE,EAAC8E,EAAAA,EAAAA,GAAE,2CAA2CG,GAAGA,CAAC,E,0BCA7xB,IAAImF,EAAE,cAAcpJ,GAAEqJ,EAAAA,EAAAA,IAAEtF,EAAAA,EAAAA,GAAE0B,EAAAA,MAAMhH,WAAAA,GAAcC,SAASC,WAAWC,KAAK0K,qBAAqB,EAAE1K,KAAK2K,mBAAmB,IAAI/I,EAAAA,EAAE5B,KAAK4K,oBAAe,EAAO5K,KAAK2C,MAAM,KAAK3C,KAAK6K,QAAQ,IAAI,CAAC,aAAI7F,GAAY,MAAM6F,QAAQzK,GAAGJ,KAAK,OAAOA,KAAK+B,WAAW3B,EAAE,KAAK,iBAAiBA,EAAEA,EAAEiE,eAAe,IAAI,CAAC,aAAM9B,CAAQnC,EAAE8B,GAAG,OAAOlC,KAAK6K,QAAQ,CAAC,CAACnJ,KAAK,UAAUoJ,QAAQ9K,KAAK6K,QAAQtI,QAAQnC,GAAGuC,MAAM3C,KAAK2C,MAAMoI,SAAS3K,IAAI,IAAI,CAAC6B,MAAAA,CAAO7B,GAAGJ,KAAK6K,SAAS5I,OAAO7B,EAAE,CAACwC,MAAAA,GAAS5C,KAAK2C,MAAMqI,gCAAgChL,KAAKiL,cAAcjL,KAAKoE,OAAOpE,KAAK4K,eAAe,IAAIX,EAAAA,EAAE,CAAC7F,KAAKpE,KAAKoE,KAAK8G,SAASlL,KAAK2K,mBAAmBQ,sBAAsBA,IAAInL,KAAKsD,gBAAgB/B,UAAU,IAAImD,EAAAA,EAAE1E,KAAKoE,KAAKgH,wBAAwBpL,KAAKuB,UAAUsB,SAAS7C,KAAK4K,eAAerJ,YAAYvB,KAAKqL,iBAAiB,EAACzL,EAAAA,EAAAA,KAAG,IAAII,KAAK2C,MAAM2I,WAAW,WAAWlL,GAAGJ,KAAK6K,UAAU7K,KAAK6K,QAAQtJ,UAAU+J,UAAUlL,IAAIU,EAAAA,KAAGlB,EAAAA,EAAAA,KAAG,IAAII,KAAK2C,MAAM4I,QAAQ,OAAOnL,GAAGJ,KAAK6K,UAAU7K,KAAK6K,QAAQtJ,UAAUgK,OAAOnL,IAAIU,EAAAA,KAAGlB,EAAAA,EAAAA,KAAG,IAAII,KAAK2C,MAAMgF,6BAA6B7E,UAAU1C,IAAIA,GAAGJ,KAAK0K,sBAAsBtK,IAAIJ,KAAK0K,oBAAoBtK,EAAEJ,KAAKsD,gBAAgB,GAAG3D,EAAAA,KAAGC,EAAAA,EAAAA,KAAG,IAAII,KAAK2E,aAAavE,IAAI,MAAMyK,QAAQ3I,GAAGlC,KAAKkC,IAAIA,EAAEyC,WAAWvE,EAAE,WAAW8B,EAAElC,KAAKsD,gBAAgBpB,EAAEsJ,kBAAkB,GAAG7L,EAAAA,IAAGK,KAAK2C,MAAM8I,GAAG,UAAU,KAAK,MAAMZ,QAAQzK,GAAGJ,KAAKI,IAAI,WAAWA,EAAEA,EAAEoD,SAASpD,EAAEoL,kBAAkB,KAAI5L,EAAAA,EAAAA,KAAG,IAAII,KAAK2C,MAAM+E,WAAW,IAAI1H,KAAKiL,iBAAiB,CAACnJ,MAAAA,GAAS9B,KAAK2C,MAAM+I,gCAAgC1L,KAAKuB,UAAUgC,oBAAoBvD,KAAK2L,eAAe3L,KAAK6K,SAAS7K,KAAK6K,SAAShJ,UAAU7B,KAAK6K,QAAQ,KAAK7K,KAAK4K,gBAAgB/I,UAAU7B,KAAK0K,qBAAqB,CAAC,CAACkB,SAAAA,GAAY,CAACC,UAAAA,GAAa,CAACC,OAAAA,GAAU9L,KAAKsD,eAAe,CAACyI,SAAAA,CAAU3L,EAAER,GAAG,MAAMoM,MAAMC,QAAQ7L,GAAGA,EAAE,GAAGiB,EAAAA,EAAE6K,aAAa9L,GAAGA,EAAE+L,GAAG,GAAG/L,aAAa8B,EAAAA,GAAG,MAAM,CAACoG,OAAOA,QAAQ,IAAIxH,EAAE,GAAG,OAAOkL,MAAMC,QAAQ7L,IAAIiB,EAAAA,EAAE6K,aAAa9L,GAAGU,EAAEV,EAAEoE,KAAKpE,GAAGA,EAAEsC,UAAUtC,aAAa8B,EAAAA,IAAIpB,EAAE,CAACV,EAAEsC,UAAU1C,KAAK2K,mBAAmByB,QAAQtL,GAAG,CAACwH,OAAOA,KAAKtI,KAAK2K,mBAAmB0B,WAAWvL,EAAE,EAAE,CAAC,eAAMwL,GAAYtM,KAAKsD,eAAe,CAACtB,UAAAA,GAAa,OAAOhC,KAAK6K,SAAS7K,KAAK6K,QAAQ9I,QAAQ,CAACkJ,WAAAA,GAAc,IAAIjL,KAAKoE,KAAK,OAAO,MAAMhE,EAAEJ,KAAK2C,MAAM+E,UAAUhG,KAAK,IAAIQ,EAAE,UAAU,GAAG,iBAAiB9B,EAAE8B,EAAE,YAAY,SAAS9B,IAAI8B,EAAE,QAAQlC,KAAK6K,QAAQ,CAAC,MAAMnJ,KAAKtB,GAAGJ,KAAK6K,QAAQ,GAAGzK,IAAI8B,EAAE,OAAOlC,KAAKuM,eAAevM,KAAK6K,cAAc,SAASzK,EAAEJ,KAAK6K,QAAQW,kBAAkB,YAAYpL,GAAG,SAASJ,KAAK2C,MAAM6J,OAAOxM,KAAK6K,QAAQrH,SAASxD,KAAKsD,iBAAiBtD,KAAK2L,eAAe3L,KAAK6K,SAAS7K,KAAK6K,SAAShJ,SAAS,CAAC7B,KAAK6K,QAAQ,YAAY3I,EAAE,IAAImD,EAAE,CAAC1C,MAAM3C,KAAK2C,MAAMyB,KAAKpE,KAAKoE,KAAKO,WAAW3E,KAAK2E,aAAa,cAAczC,EAAE,IAAIqH,EAAE,CAAC5G,MAAM3C,KAAK2C,MAAMyB,KAAKpE,KAAKoE,KAAKO,WAAW3E,KAAK2E,aAAa,IAAInD,EAAAA,EAAE,CAACmB,MAAM3C,KAAK2C,MAAM8J,UAAUzM,OAAOA,KAAKuM,eAAevM,KAAK6K,SAAS7K,KAAKsD,eAAe,CAACiJ,cAAAA,CAAenM,GAAGA,IAAIA,EAAEkB,WAAWlB,EAAEwC,SAASxC,EAAEkB,UAAS,EAAGtB,KAAKuB,UAAUmL,WAAWtM,EAAEmB,UAAU,GAAGnB,EAAEmB,UAAU+J,UAAUtL,KAAK2C,MAAM2I,UAAUlL,EAAEmB,UAAUgK,OAAOvL,KAAK2C,MAAM4I,OAAO,CAACI,cAAAA,CAAevL,GAAGA,GAAGkB,WAAWtB,KAAKuB,UAAUoL,YAAYvM,EAAEmB,WAAWnB,EAAE0B,SAAS1B,EAAEkB,UAAS,EAAG,IAAGlB,EAAAA,EAAAA,GAAE,EAAC6C,EAAAA,EAAAA,OAAKuH,EAAEpF,UAAU,YAAY,OAAMhF,EAAAA,EAAAA,GAAE,EAAC6C,EAAAA,EAAAA,OAAKuH,EAAEpF,UAAU,eAAU,GAAQoF,GAAEpK,EAAAA,EAAAA,GAAE,EAAC8E,EAAAA,EAAAA,GAAE,gDAAgDsF,GAAG,MAAMoC,EAAEpC,C,0LCAzmI,MAAMtI,EAAE2K,KAAKC,GAAG,IAAI,SAASlL,EAAEA,GAAG,OAAOA,EAAEM,CAAC,CAAC,SAASgD,EAAEhD,EAAEgD,GAAG,MAAMvF,EAAEiC,EAAEsD,EAAE6B,UAAUnH,EAAEiN,KAAKE,IAAIF,KAAKG,IAAIrN,IAAImB,EAAE+L,KAAKE,IAAIF,KAAKI,IAAItN,KAAK0F,EAAEF,GAAGD,EAAEqB,KAAK,OAAOrE,EAAE,GAAG2K,KAAKK,MAAM/H,EAAErE,EAAEuE,EAAEzF,GAAGsC,EAAE,GAAG2K,KAAKK,MAAM/H,EAAEvF,EAAEyF,EAAEvE,GAAGoB,CAAC,CAAC,SAASvC,EAAEuC,EAAEN,EAAEsD,EAAEvF,GAAG,MAAMC,EAAEkB,GAAGc,GAAGyD,EAAEF,GAAGxF,EAAEsD,EAAE,GAAGiC,EAAE,OAAOhD,EAAE,GAAGtC,EAAEqD,EAAEoC,EAAEnD,EAAE,GAAGpB,EAAEmC,EAAEkC,EAAEjD,EAAE,GAAGtC,EAAEqD,EAAEoC,EAAEnD,EAAE,GAAGpB,EAAEmC,EAAEkC,EAAEjD,CAAC,C,qCCA+mB,MAAM2E,GAAEjF,EAAAA,EAAAA,MAAIgF,EAAE,CAAC,EAAE,GAAGuG,EAAE,IAAIpE,EAAAA,EAAE,EAAE,EAAE,EAAE,GAAGqE,EAAE,CAAC7L,UAAU,KAAK4B,YAAY,KAAKG,cAAc,KAAKN,cAAc,KAAKD,eAAe,KAAKsK,wBAAuB,EAAGnK,6BAA4B,EAAGoK,OAAM,GAAI,IAAIrD,EAAE,cAAc7J,EAAAA,EAAEP,WAAAA,CAAYqC,GAAGpC,MAAMoC,GAAGlC,KAAKuN,cAAc,KAAKvN,KAAKsE,QAAQ,GAAGtE,KAAKsN,MAAMF,EAAEE,MAAMtN,KAAKgD,cAAcoK,EAAEpK,cAAchD,KAAK+C,eAAeqK,EAAErK,eAAe/C,KAAKqN,uBAAuBD,EAAEC,uBAAuBrN,KAAKkD,4BAA4BkK,EAAElK,4BAA4BlD,KAAKiC,QAAOZ,EAAAA,EAAAA,KAAGqC,MAAMxB,EAAE9B,KAAK,IAAG8E,EAAAA,EAAAA,IAAE9E,IAAI8B,EAAE8D,YAAYhG,KAAKwN,UAAU,OAAO,MAAMnM,EAAEa,EAAEgE,MAAMpF,GAAEU,EAAAA,EAAAA,IAAEH,EAAE4E,kBAAkBtG,EAAEK,KAAKsN,MAAMpL,EAAE4E,WAAW,EAAEpC,EAAE1E,KAAKkD,6BAA6B7B,EAAEoM,kBAAkBpM,EAAEoM,iBAAiBpM,EAAEkF,KAAK,GAAG3E,EAAE5B,KAAKgD,eAAe,EAAE5B,EAAEpB,KAAK+C,gBAAgB,EAAE2B,GAAGkC,EAAE,GAAGvF,EAAEoM,iBAAiB7G,EAAE,GAAGvF,EAAEkF,KAAK,IAAIvG,KAAKqN,wBAAwBzG,EAAE,GAAGvF,EAAEkF,KAAK,GAAGK,EAAE,GAAGvF,EAAEkF,KAAK,IAAIgD,EAAE3C,EAAEvF,GAAG,MAAM4B,EAAE4J,KAAKa,MAAM9G,EAAE,GAAGjH,GAAGiC,GAAGiL,KAAKa,MAAM9G,EAAE,GAAGjH,GAAGyB,EAAE+D,EAAErE,IAAIO,EAAEyC,OAAOqC,KAAKrF,EAAE6M,MAAM,IAAItM,EAAEyC,OAAOuC,KAAKvF,EAAE6M,MAAM,IAAItI,GAAGrF,KAAKkD,6BAA6BiC,EAAEqF,GAAGvH,IAAIoC,EAAE0D,EAAE/I,KAAKqN,uBAAuBhM,EAAE0F,SAAS,EAAEF,EAAE7G,KAAKuB,UAAUX,SAASgN,QAAQ,GAAGpD,EAAE,CAAC,MAAMtI,EAAEwC,EAAErD,EAAEwM,gBAAgBC,OAAOzM,EAAEyM,OAAO9N,KAAKuN,eAAeQ,QAAQzL,MAAM,kCAAkCtC,KAAKuN,cAAcvN,KAAKgO,cAAc3M,EAAEuF,EAAE1E,EAAEb,EAAE2F,WAAW+B,EAAEpJ,EAAES,EAAE,KAAK,CAAC,IAAI8B,EAAE2K,KAAKoB,IAAIrM,EAAER,GAAGiE,IAAInD,EAAE2K,KAAKoB,IAAI5M,EAAEoM,iBAAiBvL,IAAIlC,KAAKuN,cAAcvN,KAAKkO,aAAa7M,EAAEa,EAAEvC,EAAES,EAAE,CAAC,IAAI,MAAM8B,QAAQlC,KAAKuN,eAAe,IAAGrI,EAAAA,EAAAA,IAAE9E,GAAG,MAAMiB,EAAE,GAAG,GAAGrB,KAAKuN,cAAc,KAAKvN,KAAKwN,UAAU,OAAOxN,KAAKsE,QAAQpC,EAAE,IAAI,MAAM9B,KAAKyG,EAAE3E,EAAEiM,SAAS/N,IAAIiB,EAAE+M,KAAKhO,EAAEiO,UAAUhE,MAAM,KAAKjK,EAAEkI,SAASlI,EAAEyB,SAAS,KAAK,IAAI,MAAMzB,KAAK8B,EAAEb,EAAE+M,KAAKhO,EAAEkO,gBAAgBC,QAAQC,IAAInN,EAAE,CAAC,MAAM8L,GAAGnN,KAAKuN,cAAc,MAAK3N,EAAAA,EAAAA,IAAEuN,EAAE,IAAI,KAAKnN,KAAKyD,eAAcpC,EAAAA,EAAAA,KAAGqC,UAAU,MAAMtD,EAAE,GAAG,IAAI,MAAMiB,KAAKrB,KAAKuB,UAAUX,SAAS,CAAC,IAAIS,EAAEmE,UAAUnE,EAAEoN,MAAM,OAAOrO,EAAEgO,KAAKlM,EAAEb,GAAGgJ,MAAM,KAAKhJ,EAAEqN,oBAAoBrN,EAAE0E,eAAe,IAAI,CAAC/F,KAAKuN,eAAczM,EAAAA,EAAAA,IAAEV,GAAGiK,MAAM,IAAIrK,KAAKuN,cAAc,aAAavN,KAAKuN,aAAa,GAAG,CAAC1L,OAAAA,GAAU7B,KAAKsE,QAAQpD,SAASgB,GAAGA,EAAEL,YAAY7B,KAAKsE,QAAQ,EAAE,CAAC,YAAIvC,GAAW,OAAO/B,KAAKwN,WAAW,OAAOxN,KAAKuN,aAAa,CAAC,aAAMoB,CAAQzM,EAAE9B,EAAEiB,EAAEzB,EAAEkB,EAAEnB,GAAG,MAAM+E,QAAQ1E,KAAKmD,YAAYjB,EAAE2K,KAAKa,MAAMtN,EAAEU,GAAG+L,KAAKa,MAAMrM,EAAEP,GAAG,CAACiG,SAASnH,EAAEkH,WAAWhG,EAAEmE,OAAOtF,KAAIuF,EAAAA,EAAAA,IAAEvF,GAAG,MAAMiC,EAAE,IAAIyD,EAAAA,GAAE,MAAK,GAAI,OAAOzD,EAAEgF,EAAE1E,EAAEiE,KAAKvE,EAAEiF,EAAE3E,EAAEoE,KAAK1E,EAAEoF,WAAW9E,EAAE+E,MAAM7G,EAAEwB,EAAEmF,SAASnH,EAAEgC,EAAEkF,WAAWhG,EAAEc,EAAEgN,QAAQ,EAAE5O,KAAKuB,UAAUsB,SAASjB,SAASA,EAAEiN,eAAenK,EAAE/E,IAAGuF,EAAAA,EAAAA,IAAEvF,GAAGiC,CAAC,CAAC,mBAAMoM,CAAc9L,EAAE9B,EAAEiB,EAAE6D,EAAEtF,EAAEkB,EAAEnB,GAAGwF,EAAE0B,EAAExF,EAAE6D,EAAE9E,GAAG,MAAMsE,GAAEtD,EAAAA,EAAAA,IAAEyF,EAAE3E,EAAE+D,kBAAkB,MAAM,OAAOjG,KAAK2O,QAAQjK,EAAEtE,EAAE,GAAGA,EAAE,GAAGR,EAAEkB,EAAEnB,GAAG,CAACuO,YAAAA,CAAahM,EAAE9B,EAAEiB,EAAE6D,GAAG,MAAMtF,EAAEqD,EAAAA,EAAE6L,OAAO,CAACvI,KAAKnG,EAAE6F,iBAAiB/D,EAAE+D,iBAAiB8I,OAAO,CAAC7M,EAAE8M,SAASlO,EAAE,IAAI0J,EAAAA,EAAE5K,GAAGD,EAAEmB,EAAEmO,gBAAgB/M,GAAG,IAAIvC,EAAE,OAAO,KAAK,MAAM+E,EAAE,GAAG,OAAO/E,EAAEuB,SAAS,CAACtB,EAAED,EAAEiC,EAAEJ,KAAK2L,EAAE+B,IAAItP,EAAED,EAAEiC,EAAE,GAAGd,EAAEqO,cAActI,EAAEsG,GAAG,MAAMlK,GAAE7B,EAAAA,EAAAA,IAAEyF,EAAE3E,EAAE+D,kBAAkBvB,EAAE0J,KAAKpO,KAAK2O,QAAQ1L,EAAE7C,EAAEA,EAAE,EAAEiB,EAAE6D,GAAGmF,MAAMnI,IAAI,IAAIV,IAAI2L,EAAE+B,IAAItP,EAAED,EAAEiC,EAAEJ,GAAGV,EAAEqO,cAActI,EAAEsG,GAAGjL,EAAE0E,EAAEC,EAAE,GAAG3E,EAAE2E,EAAEA,EAAE,IAAI3E,KAAK,IAAIqM,QAAQC,IAAI9J,EAAE,IAAGxC,EAAAA,EAAAA,GAAE,EAACvC,EAAAA,EAAAA,OAAKsK,EAAE7E,UAAU,qBAAgB,IAAQlD,EAAAA,EAAAA,GAAE,EAACvC,EAAAA,EAAAA,OAAKsK,EAAE7E,UAAU,eAAU,IAAQlD,EAAAA,EAAAA,GAAE,EAACvC,EAAAA,EAAAA,OAAKsK,EAAE7E,UAAU,iBAAY,IAAQlD,EAAAA,EAAAA,GAAE,EAACvC,EAAAA,EAAAA,OAAKsK,EAAE7E,UAAU,mBAAc,IAAQlD,EAAAA,EAAAA,GAAE,EAACvC,EAAAA,EAAAA,OAAKsK,EAAE7E,UAAU,aAAQ,IAAQlD,EAAAA,EAAAA,GAAE,EAACvC,EAAAA,EAAAA,OAAKsK,EAAE7E,UAAU,qBAAgB,IAAQlD,EAAAA,EAAAA,GAAE,EAACvC,EAAAA,EAAAA,OAAKsK,EAAE7E,UAAU,sBAAiB,IAAQlD,EAAAA,EAAAA,GAAE,EAACvC,EAAAA,EAAAA,OAAKsK,EAAE7E,UAAU,8BAAyB,IAAQlD,EAAAA,EAAAA,GAAE,EAACvC,EAAAA,EAAAA,OAAKsK,EAAE7E,UAAU,mCAA8B,IAAQlD,EAAAA,EAAAA,GAAE,EAACvC,EAAAA,EAAAA,OAAKsK,EAAE7E,UAAU,qBAAgB,IAAQlD,EAAAA,EAAAA,GAAE,EAACvC,EAAAA,EAAAA,OAAKsK,EAAE7E,UAAU,WAAW,MAAM6E,GAAE/H,EAAAA,EAAAA,GAAE,EAACwC,EAAAA,EAAAA,GAAE,oDAAoDuF,GAAG,MAAMQ,EAAER,C","sources":["webpack://sun-glare-project/./node_modules/@geoscene/core/views/2d/engine/BitmapContainer.js","webpack://sun-glare-project/./node_modules/@geoscene/core/views/2d/layers/imagery/ImageryView2D.js","webpack://sun-glare-project/./node_modules/@geoscene/core/views/2d/engine/imagery/RasterVFContainer.js","webpack://sun-glare-project/./node_modules/@geoscene/core/views/2d/layers/imagery/ImageryVFStrategy.js","webpack://sun-glare-project/./node_modules/@geoscene/core/views/2d/layers/imagery/VectorFieldView2D.js","webpack://sun-glare-project/./node_modules/@geoscene/core/views/layers/ImageryLayerView.js","webpack://sun-glare-project/./node_modules/@geoscene/core/views/2d/layers/ImageryLayerView2D.js","webpack://sun-glare-project/./node_modules/@geoscene/core/views/2d/viewStateUtils.js","webpack://sun-glare-project/./node_modules/@geoscene/core/views/2d/layers/support/ExportStrategy.js"],"sourcesContent":["/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport{brushes as e}from\"./brushes.js\";import{WGLDrawPhase as s}from\"./webgl/enums.js\";import r from\"./webgl/WGLContainer.js\";class a extends r{constructor(){super(...arguments),this._hasCrossfade=!1}get requiresDedicatedFBO(){return this._hasCrossfade}beforeRender(e){super.beforeRender(e),this._manageFade()}prepareRenderPasses(r){const a=r.registerRenderPass({name:\"bitmap\",brushes:[e.bitmap],target:()=>this.children,drawPhase:s.MAP});return[...super.prepareRenderPasses(r),a]}_manageFade(){this.children.reduce(((e,s)=>e+(s.inFadeTransition?1:0)),0)>=2?(this.children.forEach((e=>e.blendFunction=\"additive\")),this._hasCrossfade=!0):(this.children.forEach((e=>e.blendFunction=\"standard\")),this._hasCrossfade=!1)}}export{a as BitmapContainer};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../Graphic.js\";import i from\"../../../../core/Accessor.js\";import r from\"../../../../core/Logger.js\";import{isAbortError as s}from\"../../../../core/promiseUtils.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{mosaicPixelData as p}from\"../../../../layers/support/rasterFunctions/pixelUtils.js\";import{BitmapContainer as n}from\"../../engine/BitmapContainer.js\";import{Container as l}from\"../../engine/Container.js\";import c from\"../../engine/ImageryBitmapSource.js\";import h from\"../support/ExportStrategy.js\";let m=class extends i{constructor(){super(...arguments),this.attached=!1,this.container=new l,this.updateRequested=!1,this.type=\"imagery\",this._bitmapView=new n}destroy(){this.attached&&(this.detach(),this.attached=!1),this.updateRequested=!1}get updating(){return!this.attached||this.isUpdating()}update(t){this.strategy.update(t).catch((t=>{s(t)||r.getLogger(this).error(t)}))}hitTest(t){return new e({attributes:{},geometry:t.clone(),layer:this.layer})}attach(){this.container.addChild(this._bitmapView);const t=this.layer.version>=10,e=this.layer.version>=10.1?this.layer.imageMaxHeight:2048,i=this.layer.version>=10.1?this.layer.imageMaxWidth:2048;this.strategy=new h({container:this._bitmapView,imageNormalizationSupported:t,imageMaxHeight:e,imageMaxWidth:i,fetchSource:this._fetchImage.bind(this),requestUpdate:()=>this.requestUpdate()})}detach(){this.strategy.destroy(),this._bitmapView.removeAllChildren(),this.container.removeAllChildren(),this.updateRequested=!1}redraw(){this.strategy.updateExports((async t=>{const{source:e}=t;if(!e||e instanceof ImageBitmap)return;const i=await this.layer.applyRenderer({extent:e.extent,pixelBlock:e.originalPixelBlock??e.pixelBlock});e.filter=t=>this.layer.pixelFilter?this.layer.applyFilter(t):{...i,extent:e.extent}})).catch((t=>{s(t)||r.getLogger(this).error(t)}))}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate())}isUpdating(){return this.strategy.updating||this.updateRequested}getPixelData(){if(this.updating)return null;const t=this.strategy.bitmaps;if(1===t.length&&t[0].source)return{extent:t[0].source.extent,pixelBlock:t[0].source.originalPixelBlock};if(t.length>1){const e=this.view.extent,i=t.map((t=>t.source)).filter((t=>t.extent&&t.extent.intersects(e))).map((t=>({extent:t.extent,pixelBlock:t.originalPixelBlock}))),r=p(i,e);return null!=r?{extent:r.extent,pixelBlock:r.pixelBlock}:null}return null}async _fetchImage(t,e,i,r){(r=r||{}).timeExtent=this.timeExtent,r.requestAsImageElement=!0,r.returnImageBitmap=!0;const s=await this.layer.fetchImage(t,e,i,r);if(s.imageBitmap)return s.imageBitmap;const a=await this.layer.applyRenderer(s.pixelData,{signal:r.signal}),o=new c(a.pixelBlock,a.extent?.clone(),s.pixelData.pixelBlock);return o.filter=t=>this.layer.applyFilter(t),o}};t([a()],m.prototype,\"attached\",void 0),t([a()],m.prototype,\"container\",void 0),t([a()],m.prototype,\"layer\",void 0),t([a()],m.prototype,\"strategy\",void 0),t([a()],m.prototype,\"timeExtent\",void 0),t([a()],m.prototype,\"view\",void 0),t([a()],m.prototype,\"updateRequested\",void 0),t([a()],m.prototype,\"updating\",null),t([a()],m.prototype,\"type\",void 0),m=t([o(\"geoscene.views.2d.layers.imagery.ImageryView2D\")],m);const u=m;export{u as default};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport e from\"./BrushVectorField.js\";import{WGLDrawPhase as r}from\"../webgl/enums.js\";import s from\"../webgl/WGLContainer.js\";class t extends s{constructor(){super(...arguments),this.symbolTypes=[\"triangle\"]}get requiresDedicatedFBO(){return!1}prepareRenderPasses(s){const t=s.registerRenderPass({name:\"imagery (vf)\",brushes:[e],target:()=>this.children,drawPhase:r.MAP});return[...super.prepareRenderPasses(s),t]}doRender(e){this.visible&&e.drawPhase===r.MAP&&this.symbolTypes.forEach((r=>{e.renderPass=r,super.doRender(e)}))}}export{t as RasterVFContainer};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import r from\"../../../../core/Logger.js\";import{debounce as i,isAbortError as s}from\"../../../../core/promiseUtils.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";import n from\"../../../../geometry/Extent.js\";import{RasterVFDisplayObject as l}from\"../../engine/imagery/RasterVFDisplayObject.js\";let c=class extends t{constructor(e){super(e),this._loading=null,this.update=i(((e,t)=>this._update(e,t).catch((e=>{s(e)||r.getLogger(this).error(e)}))))}get updating(){return!!this._loading}redraw(e){if(!this.container.children.length)return;const t=this.container.children[0];t.symbolizerParameters=e,t.invalidateVAO(),this.container.symbolTypes=\"wind_speed\"===e.style?[\"scalar\",\"triangle\"]:\"simple_scalar\"===e.style?[\"scalar\"]:[\"triangle\"],this.container.requestRender()}async _update(e,t,r){if(!e.stationary)return;const{extent:i,spatialReference:s}=e.state,o=new n({xmin:i.xmin,ymin:i.ymin,xmax:i.xmax,ymax:i.ymax,spatialReference:s}),[a,l]=e.state.size;this._loading=this.fetchPixels(o,a,l,r);const c=await this._loading;this._addToDisplay(c,t,e.state),this._loading=null}_addToDisplay(e,t,r){if(null==e.pixelBlock)return this.container.children.forEach((e=>e.destroy())),void this.container.removeAllChildren();const{extent:i,pixelBlock:s}=e,o=new l(s);o.offset=[0,0],o.symbolizerParameters=t,o.rawPixelData=e,o.invalidateVAO(),o.x=i.xmin,o.y=i.ymax,o.pixelRatio=r.pixelRatio,o.rotation=r.rotation,o.resolution=r.resolution,o.width=s.width*t.symbolTileSize,o.height=s.height*t.symbolTileSize,this.container.children.forEach((e=>e.destroy())),this.container.removeAllChildren(),this.container.symbolTypes=\"wind_speed\"===t.style?[\"scalar\",\"triangle\"]:\"simple_scalar\"===t.style?[\"scalar\"]:[\"triangle\"],this.container.addChild(o)}};e([o()],c.prototype,\"fetchPixels\",void 0),e([o()],c.prototype,\"container\",void 0),e([o()],c.prototype,\"_loading\",void 0),e([o()],c.prototype,\"updating\",null),c=e([a(\"geoscene.views.2d.layers.imagery.ImageryVFStrategy\")],c);const p=c;export{p as default};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../Graphic.js\";import r from\"../../../../request.js\";import{HandleOwner as i}from\"../../../../core/HandleOwner.js\";import{watch as s,syncAndInitial as a}from\"../../../../core/reactiveUtils.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import l from\"../../../../geometry/Extent.js\";import{projectExtent as c}from\"../../../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{snapImageToSymbolTile as m,convertVectorFieldData as p}from\"../../../../layers/support/rasterFunctions/vectorFieldUtils.js\";import{RasterVFContainer as h}from\"../../engine/imagery/RasterVFContainer.js\";import y from\"./ImageryVFStrategy.js\";let u=class extends i{constructor(){super(...arguments),this.attached=!1,this.container=new h,this.type=\"imageryVF\",this._dataParameters={exportParametersVersion:0,bbox:\"\",symbolTileSize:0,time:\"\"},this._fetchpixels=async(t,e,r,i)=>{const s=await this._projectFullExtentPromise,{symbolTileSize:a}=this.layer.renderer,{extent:o,width:n,height:l}=m(t,e,r,a,s);if(null!=s&&!s.intersects(t))return{extent:o,pixelBlock:null};const c={bbox:`${o.xmin}, ${o.ymin}, ${o.xmax}, ${o.ymax}`,exportParametersVersion:this.layer.exportImageServiceParameters.version,symbolTileSize:a,time:JSON.stringify(this.timeExtent||\"\")};if(this._canReuseVectorFieldData(c)){const t=this.getPixelData();if(null!=t){if(`${t.extent.xmin}, ${t.extent.ymin}, ${t.extent.xmax}, ${t.extent.ymax}`===c.bbox)return t}}const{pixelData:h}=await this.layer.fetchImage(o,n,l,{timeExtent:this.timeExtent,requestAsImageElement:!1,signal:i});this._dataParameters=c;const y=h?.pixelBlock;if(null==y)return{extent:o,pixelBlock:null};return{extent:o,pixelBlock:\"vector-uv\"===this.layer.rasterInfo.dataType?p(y,\"vector-uv\"):y}}}get updating(){return!this.attached||this._strategy.updating}attach(){this._projectFullExtentPromise=this._getProjectedFullExtent(this.view.spatialReference),this._strategy=new y({container:this.container,fetchPixels:this._fetchpixels}),this.handles.add(s((()=>this.layer.renderer),(t=>this._updateSymbolizerParams(t)),a),\"attach\")}detach(){this._strategy.destroy(),this.container.children.forEach((t=>t.destroy())),this.container.removeAllChildren(),this.handles.remove(\"attach\"),this._strategy=this.container=this._projectFullExtentPromise=null}getPixelData(){const t=this.container.children[0]?.rawPixelData;if(this.updating||!t)return null;const{extent:e,pixelBlock:r}=t;return{extent:e,pixelBlock:r}}hitTest(t){return new e({attributes:{},geometry:t.clone(),layer:this.layer})}update(t){this._strategy.update(t,this._symbolizerParams)}redraw(){const{renderer:t}=this.layer;t&&(this._updateSymbolizerParams(t),this._strategy.redraw(this._symbolizerParams))}_canReuseVectorFieldData(t){const e=this._dataParameters.exportParametersVersion===t.exportParametersVersion,r=this._dataParameters.time===t.time,i=this._dataParameters.symbolTileSize===t.symbolTileSize,s=this._dataParameters.bbox===t.bbox;return e&&r&&i&&s}async _getProjectedFullExtent(t){try{return await c(this.layer.fullExtent,t)}catch(e){try{const e=(await r(this.layer.url,{query:{option:\"footprints\",outSR:t.wkid||JSON.stringify(t.toJSON()),f:\"json\"}})).data.featureCollection.layers[0].layerDefinition.extent;return e?l.fromJSON(e):null}catch{return null}}}_updateSymbolizerParams(t){\"vector-field\"===t.type&&(this._symbolizerParams=this.layer.symbolizer.generateWebGLParameters({pixelBlock:null}))}};t([o()],u.prototype,\"attached\",void 0),t([o()],u.prototype,\"container\",void 0),t([o()],u.prototype,\"layer\",void 0),t([o()],u.prototype,\"timeExtent\",void 0),t([o()],u.prototype,\"type\",void 0),t([o()],u.prototype,\"view\",void 0),t([o()],u.prototype,\"updating\",null),u=t([n(\"geoscene.views.2d.layers.imagery.VectorFieldView2D\")],u);const d=u;export{d as default};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import s from\"../../geometry/Point.js\";import{combinedViewLayerTimeExtentProperty as p}from\"../../layers/support/commonProperties.js\";import i from\"../../rest/support/Query.js\";import{getFetchPopupTemplate as a}from\"./support/popupUtils.js\";const n=n=>{let u=class extends n{constructor(){super(...arguments),this.view=null}async fetchPopupFeatures(e,t){const{layer:o}=this;if(!e)throw new r(\"imagerylayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:o});const{popupEnabled:p}=o,n=a(o,t);if(!p||null==n)throw new r(\"imagerylayerview:fetchPopupFeatures\",\"Missing required popupTemplate or popupEnabled\",{popupEnabled:p,popupTemplate:n});const u=await n.getRequiredFields(),l=new i;l.timeExtent=this.timeExtent,l.geometry=e,l.outFields=u,l.outSpatialReference=e.spatialReference;const{resolution:m,spatialReference:c}=this.view,y=\"2d\"===this.view.type?new s(m,m,c):new s(.5*m,.5*m,c),{returnTopmostRaster:d,showNoDataRecords:h}=n.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},w={returnDomainValues:!0,returnTopmostRaster:d,pixelSize:y,showNoDataRecords:h,signal:null!=t?t.signal:null};return o.queryVisibleRasters(l,w).then((e=>e))}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return e([t()],u.prototype,\"layer\",void 0),e([t()],u.prototype,\"suspended\",void 0),e([t(p)],u.prototype,\"timeExtent\",void 0),e([t()],u.prototype,\"view\",void 0),u=e([o(\"geoscene.views.layers.ImageryLayerView\")],u),u};export{n as default};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Graphic.js\";import i from\"../../../core/Collection.js\";import{watch as r,syncAndInitial as s,sync as a}from\"../../../core/reactiveUtils.js\";import{property as h}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{GraphicsCollection as n}from\"../../../support/GraphicsCollection.js\";import l from\"../engine/flow/FlowView2D.js\";import{LayerView2DMixin as c}from\"./LayerView2D.js\";import w from\"./graphics/GraphicsView2D.js\";import p from\"./graphics/HighlightGraphicContainer.js\";import u from\"./imagery/ImageryView2D.js\";import d from\"./imagery/VectorFieldView2D.js\";import m from\"../../layers/ImageryLayerView.js\";import y from\"../../layers/LayerView.js\";import v from\"../../layers/RefreshableLayerView.js\";let g=class extends(m(v(c(y)))){constructor(){super(...arguments),this._exportImageVersion=-1,this._highlightGraphics=new n,this._highlightView=void 0,this.layer=null,this.subview=null}get pixelData(){const{subview:e}=this;return this.updating||!e?null:\"getPixelData\"in e?e.getPixelData():null}async hitTest(e,t){return this.subview?[{type:\"graphic\",graphic:this.subview.hitTest(e),layer:this.layer,mapPoint:e}]:null}update(e){this.subview?.update(e)}attach(){this.layer.increaseRasterJobHandlerUsage(),this._setSubView(),this.view&&(this._highlightView=new w({view:this.view,graphics:this._highlightGraphics,requestUpdateCallback:()=>this.requestUpdate(),container:new p(this.view.featuresTilingScheme)}),this.container.addChild(this._highlightView.container)),this.addAttachHandles([r((()=>this.layer.blendMode??\"normal\"),(e=>this.subview&&(this.subview.container.blendMode=e)),s),r((()=>this.layer.effect??null),(e=>this.subview&&(this.subview.container.effect=e)),s),r((()=>this.layer.exportImageServiceParameters.version),(e=>{e&&this._exportImageVersion!==e&&(this._exportImageVersion=e,this.requestUpdate())}),a),r((()=>this.timeExtent),(e=>{const{subview:t}=this;t&&(t.timeExtent=e,\"redraw\"in t?this.requestUpdate():t.redrawOrRefetch())}),a),this.layer.on(\"redraw\",(()=>{const{subview:e}=this;e&&(\"redraw\"in e?e.redraw():e.redrawOrRefetch())})),r((()=>this.layer.renderer),(()=>this._setSubView()))])}detach(){this.layer.decreaseRasterJobHandlerUsage(),this.container.removeAllChildren(),this._detachSubview(this.subview),this.subview?.destroy(),this.subview=null,this._highlightView?.destroy(),this._exportImageVersion=-1}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}highlight(e,r){if(!((Array.isArray(e)?e[0]:i.isCollection(e)?e.at(0):e)instanceof t))return{remove:()=>{}};let s=[];return Array.isArray(e)||i.isCollection(e)?s=e.map((e=>e.clone())):e instanceof t&&(s=[e.clone()]),this._highlightGraphics.addMany(s),{remove:()=>{this._highlightGraphics.removeMany(s)}}}async doRefresh(){this.requestUpdate()}isUpdating(){return!this.subview||this.subview.updating}_setSubView(){if(!this.view)return;const e=this.layer.renderer?.type;let t=\"imagery\";if(\"vector-field\"===e?t=\"imageryVF\":\"flow\"===e&&(t=\"flow\"),this.subview){const{type:e}=this.subview;if(e===t)return this._attachSubview(this.subview),void(\"flow\"===e?this.subview.redrawOrRefetch():\"imagery\"===e&&\"lerc\"===this.layer.format?this.subview.redraw():this.requestUpdate());this._detachSubview(this.subview),this.subview?.destroy()}this.subview=\"imagery\"===t?new u({layer:this.layer,view:this.view,timeExtent:this.timeExtent}):\"imageryVF\"===t?new d({layer:this.layer,view:this.view,timeExtent:this.timeExtent}):new l({layer:this.layer,layerView:this}),this._attachSubview(this.subview),this.requestUpdate()}_attachSubview(e){e&&!e.attached&&(e.attach(),e.attached=!0,this.container.addChildAt(e.container,0),e.container.blendMode=this.layer.blendMode,e.container.effect=this.layer.effect)}_detachSubview(e){e?.attached&&(this.container.removeChild(e.container),e.detach(),e.attached=!1)}};e([h()],g.prototype,\"pixelData\",null),e([h()],g.prototype,\"subview\",void 0),g=e([o(\"geoscene.views.2d.layers.ImageryLayerView2D\")],g);const b=g;export{b as default};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nconst t=Math.PI/180;function n(n){return n*t}function o(t,o){const a=n(o.rotation),r=Math.abs(Math.cos(a)),s=Math.abs(Math.sin(a)),[u,c]=o.size;return t[0]=Math.round(c*s+u*r),t[1]=Math.round(c*r+u*s),t}function a(t,n,o,a){const[r,s]=n,[u,c]=a,h=.5*o;return t[0]=r-h*u,t[1]=s-h*c,t[2]=r+h*u,t[3]=s+h*c,t}export{a as getBBox,o as getOuterSize};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Accessor.js\";import\"../../../../core/has.js\";import{debounce as i,throwIfAborted as o,throwIfAbortError as r,eachAlways as s}from\"../../../../core/promiseUtils.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import{subclass as p}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{create as n,toExtent as m}from\"../../../../geometry/support/aaBoundingRect.js\";import{getInfo as l}from\"../../../../geometry/support/spatialReferenceUtils.js\";import h from\"../../../../layers/support/TileInfo.js\";import{getOuterSize as d,getBBox as c}from\"../../viewStateUtils.js\";import{Bitmap as u}from\"../../engine/Bitmap.js\";import g from\"../../tiling/TileInfoView.js\";import f from\"../../tiling/TileKey.js\";const y=n(),x=[0,0],S=new f(0,0,0,0),_={container:null,fetchSource:null,requestUpdate:null,imageMaxWidth:2048,imageMaxHeight:2048,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1};let w=class extends e{constructor(t){super(t),this._imagePromise=null,this.bitmaps=[],this.hidpi=_.hidpi,this.imageMaxWidth=_.imageMaxWidth,this.imageMaxHeight=_.imageMaxHeight,this.imageRotationSupported=_.imageRotationSupported,this.imageNormalizationSupported=_.imageNormalizationSupported,this.update=i((async(t,e)=>{if(o(e),!t.stationary||this.destroyed)return;const i=t.state,s=l(i.spatialReference),a=this.hidpi?t.pixelRatio:1,p=this.imageNormalizationSupported&&i.worldScreenWidth&&i.worldScreenWidth<i.size[0],n=this.imageMaxWidth??0,m=this.imageMaxHeight??0;p?(x[0]=i.worldScreenWidth,x[1]=i.size[1]):this.imageRotationSupported?(x[0]=i.size[0],x[1]=i.size[1]):d(x,i);const h=Math.floor(x[0]*a)>n||Math.floor(x[1]*a)>m,c=s&&(i.extent.xmin<s.valid[0]||i.extent.xmax>s.valid[1]),u=!this.imageNormalizationSupported&&c,g=!h&&!u,f=this.imageRotationSupported?i.rotation:0,y=this.container.children.slice();if(g){const t=p?i.paddedViewState.center:i.center;this._imagePromise&&console.error(\"Image promise was not defined!\"),this._imagePromise=this._singleExport(i,x,t,i.resolution,f,a,e)}else{let t=Math.min(n,m);u&&(t=Math.min(i.worldScreenWidth,t)),this._imagePromise=this._tiledExport(i,t,a,e)}try{const t=await this._imagePromise??[];o(e);const i=[];if(this._imagePromise=null,this.destroyed)return;this.bitmaps=t;for(const e of y)t.includes(e)||i.push(e.fadeOut().then((()=>{e.remove(),e.destroy()})));for(const e of t)i.push(e.fadeIn());await Promise.all(i)}catch(S){this._imagePromise=null,r(S)}}),5e3),this.updateExports=i((async t=>{const e=[];for(const i of this.container.children){if(!i.visible||!i.stage)return;e.push(t(i).then((()=>{i.invalidateTexture(),i.requestRender()})))}this._imagePromise=s(e).then((()=>this._imagePromise=null)),await this._imagePromise}))}destroy(){this.bitmaps.forEach((t=>t.destroy())),this.bitmaps=[]}get updating(){return!this.destroyed&&null!==this._imagePromise}async _export(t,e,i,r,s,a){const p=await this.fetchSource(t,Math.floor(e*s),Math.floor(i*s),{rotation:r,pixelRatio:s,signal:a});o(a);const n=new u(null,!0);return n.x=t.xmin,n.y=t.ymax,n.resolution=t.width/e,n.rotation=r,n.pixelRatio=s,n.opacity=0,this.container.addChild(n),await n.setSourceAsync(p,a),o(a),n}async _singleExport(t,e,i,o,r,s,a){c(y,i,o,e);const p=m(y,t.spatialReference);return[await this._export(p,e[0],e[1],r,s,a)]}_tiledExport(t,e,i,o){const r=h.create({size:e,spatialReference:t.spatialReference,scales:[t.scale]}),s=new g(r),a=s.getTileCoverage(t);if(!a)return null;const p=[];return a.forEach(((r,a,n,l)=>{S.set(r,a,n,0),s.getTileBounds(y,S);const h=m(y,t.spatialReference);p.push(this._export(h,e,e,0,i,o).then((t=>(0!==l&&(S.set(r,a,n,l),s.getTileBounds(y,S),t.x=y[0],t.y=y[3]),t))))})),Promise.all(p)}};t([a()],w.prototype,\"_imagePromise\",void 0),t([a()],w.prototype,\"bitmaps\",void 0),t([a()],w.prototype,\"container\",void 0),t([a()],w.prototype,\"fetchSource\",void 0),t([a()],w.prototype,\"hidpi\",void 0),t([a()],w.prototype,\"imageMaxWidth\",void 0),t([a()],w.prototype,\"imageMaxHeight\",void 0),t([a()],w.prototype,\"imageRotationSupported\",void 0),t([a()],w.prototype,\"imageNormalizationSupported\",void 0),t([a()],w.prototype,\"requestUpdate\",void 0),t([a()],w.prototype,\"updating\",null),w=t([p(\"geoscene.views.2d.layers.support.ExportStrategy\")],w);const v=w;export{v as default};"],"names":["a","r","constructor","super","arguments","this","_hasCrossfade","requiresDedicatedFBO","beforeRender","e","_manageFade","prepareRenderPasses","registerRenderPass","name","brushes","bitmap","target","children","drawPhase","s","MAP","reduce","inFadeTransition","forEach","blendFunction","m","i","attached","container","l","updateRequested","type","_bitmapView","n","destroy","detach","updating","isUpdating","update","t","strategy","catch","getLogger","error","hitTest","attributes","geometry","clone","layer","attach","addChild","version","imageMaxHeight","imageMaxWidth","h","imageNormalizationSupported","fetchSource","_fetchImage","bind","requestUpdate","removeAllChildren","redraw","updateExports","async","source","ImageBitmap","applyRenderer","extent","pixelBlock","originalPixelBlock","filter","pixelFilter","applyFilter","view","getPixelData","bitmaps","length","map","intersects","p","timeExtent","requestAsImageElement","returnImageBitmap","fetchImage","imageBitmap","pixelData","signal","o","c","prototype","u","symbolTypes","doRender","visible","renderPass","_loading","_update","symbolizerParameters","invalidateVAO","style","requestRender","stationary","spatialReference","state","xmin","ymin","xmax","ymax","size","fetchPixels","_addToDisplay","offset","rawPixelData","x","y","pixelRatio","rotation","resolution","width","symbolTileSize","height","_dataParameters","exportParametersVersion","bbox","time","_fetchpixels","_projectFullExtentPromise","renderer","exportImageServiceParameters","JSON","stringify","_canReuseVectorFieldData","rasterInfo","dataType","_strategy","_getProjectedFullExtent","handles","add","_updateSymbolizerParams","remove","_symbolizerParams","fullExtent","url","query","option","outSR","wkid","toJSON","f","data","featureCollection","layers","layerDefinition","fromJSON","symbolizer","generateWebGLParameters","d","fetchPopupFeatures","popupEnabled","popupTemplate","getRequiredFields","outFields","outSpatialReference","returnTopmostRaster","showNoDataRecords","layerOptions","w","returnDomainValues","pixelSize","queryVisibleRasters","then","canResume","isEmpty","g","v","_exportImageVersion","_highlightGraphics","_highlightView","subview","graphic","mapPoint","increaseRasterJobHandlerUsage","_setSubView","graphics","requestUpdateCallback","featuresTilingScheme","addAttachHandles","blendMode","effect","redrawOrRefetch","on","decreaseRasterJobHandlerUsage","_detachSubview","moveStart","viewChange","moveEnd","highlight","Array","isArray","isCollection","at","addMany","removeMany","doRefresh","_attachSubview","format","layerView","addChildAt","removeChild","b","Math","PI","abs","cos","sin","round","S","_","imageRotationSupported","hidpi","_imagePromise","destroyed","worldScreenWidth","floor","valid","slice","paddedViewState","center","console","_singleExport","min","_tiledExport","includes","push","fadeOut","fadeIn","Promise","all","stage","invalidateTexture","_export","opacity","setSourceAsync","create","scales","scale","getTileCoverage","set","getTileBounds"],"sourceRoot":""}