"use strict";(self["webpackChunksun_glare_project"]=self["webpackChunksun_glare_project"]||[]).push([[993],{1774:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAt1BMVEUAAAD///+qqqqAgICZmZmVlZWenp6Xl5eZmZmbm5uenp6ZmZmcnJyYmJiampqZmZmbm5uYmJiampqbm5uZmZmampqYmJiampqbm5uZmZmampqZmZmampqbm5ubm5uampqampqZmZmampqZmZmampqbm5uampqZmZmampqampqampqampqbm5uampqampqampqZmZmampqampqZmZmampqampqampqampqampqampqampqampqampqw7qK0AAAAPHRSTlMAAQMEBQwVFhkhIiMkJSYtLi8wRUZHSElKS3x9fn+Wl5iZmp6foKGjpLS1tre4wtLT1tfY2dvt7u/6+/wzxdzZAAAAAWJLR0QB/wIt3gAAAOdJREFUGNNVkF1XglAQRTcS3DSQlEoyv0rTtLKbGsLl/P/f1QPqwnmbvdZZc2ZDPX4/y3o+zekuC0k6LuIL8sZO2q03e8m9eCf2ITdpA3SmTquajlWk51BaaATQdS4lCAHCgLRyMbDUhGBrDRi7DZhpATeF2oRW1hgrG3Kn3KevX8BYWStrgL3uedaamtaMLz0x0AYg/JF2twDfeqSn3XX8oAT/qE7zUKS8Be+aNiu9ag7EZZU1yrsyAhg13nwoNKyFrORmHYDorToLwRs56bD5/JPKoXcxGi9yScrn0ZV7P8kGSeu0/AOgQSGjf0LSLgAAAABJRU5ErkJggg=="},71132:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAABBUlEQVR4nO2TQWoCQRBFWzcGNEcQhCQbFyZMZ+UmV0ju4iYqDDpVhJBVTuIlXMaFNzEEQrLQF3poVzrTLYMgwYJaNPxf//+ubmPOdZJllWkifFuFmM6xwiRq+H1G2wqb2OF228Lm9oVOUCDJGHjCzEAtSICaw+ZJMgYx17Pwrh6jIjtTwpM39VE+POMqd6J8PqRcxApcv9Owwspx76bclLkf+6XNTUo9VsBhHccnHxcLCMuDl6s7y16WJVhXFlDWZQLbd/3ce6OZKMOIP7CDDQp0U1ru3H/lMiSwDxtOoAwd0QqjYII92KBA1Tb/WuDXv+WfQlAVrhXUKl+JIoWgI3DPZY5af/ThJlHmC57YAAAAAElFTkSuQmCC"},65438:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAABmJLR0QA/wD/AP+gvaeTAAABRUlEQVQokaWRTU4CQRCFv2qQlTvQ4F4lRG+gmHgHI3oBDBBJPABMg0cQ8Ap6DSGu3Jrgz1qIuGDhSp1uF8yMHZwIiW9Xr+rret0N/5DMGvpR7xljKkAByABjoK9EtXVO92Ph0l1pKbucvQBO/lh2qYaqpvf1F0AydBcAAcp2zVqgCqDCqC4oVq5UQm2N3kcp69tt4DrsWWxFP+jdaHNwxwhs5pvHzrZ74MgbeGKxhwAGUwH6KhgoRHBSzuPyGt+0osJO50M4EzU+eI6DJ6mJ66+48Ftkp1iPg9Of6Q2nHLtwz4nX+EVaxFe+F5aC3EDwYFZsR6wUg17RG3hifNNKkHhC2PQffE+Qgwi20pkeEqgxaHSBclxkVyLSbuaap25s1FDVBOnOA+VFzn7iz6g+qO+ISDX4jlXgFaGnjGrrvL6dl2xhfQOqgmx7UWxefQAAAABJRU5ErkJggg=="},91971:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAABmJLR0QA/wD/AP+gvaeTAAABLElEQVQokaWS0U0CURBFz7xV/gG1AvVHO8C1CmO0AgNk2diAEOxgWTB0oJYBhA780goEtgHMjh9LllHWQOL8zX3vZO59b+AfJb8FjeNLVBuADxwAM2CCc7E0m5NCWIfDfZbLHqp3f45SfSJJWtLpfAHs5QfbQACROtWqAk0AZ6xa8BnVM0qlEiLnwIs5a2i/f7GenGXMQQmCW9O/ATcaRYLINQBp2gAmbnXBN7keCy071zWdn9sme9WskuSjEE5Tqx9aeJ7LlcpxIax6YrqZhce5LPKwyangeW0jjWD1zxpFPiIjc/sV57rM5++Uy6d4XhvVKxOhJmE4XS9JFA0QqRda/lmxBEFgbUOStIDBNpDF4j5PuJGv16uRbZAPHAGfwJg0jSUMpzs4262+ARvYazC3hlvBAAAAAElFTkSuQmCC"},81542:function(e){e.exports="data:image/png;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wAARCABAAEADABEAAREBAhEB/8QAGwAAAgMBAQEAAAAAAAAAAAAABAYAAQcFAgP/xAAqEAABBAEDAwIGAwAAAAAAAAABAAIDBAURUWESNXMhMQYTIjJBcRQjQv/EABQBAQAAAAAAAAAAAAAAAAAAAAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMAAAERAhEAPwDZkEQUgtBEEQRBEEQcrN5uLFQ9LdH2Hj6GbcnhArY/PW6d51iR7pmynWVpP3cjYoHirahu12zwPD2O/O3BQfZAjZbLZCHK2Y47krWNkIDQ70AQNuJkfNiq0kji57owS4+5KAxAHlLU1PHyzwQmV7R6Dbk/pBnsss1qd8sjnSSO1c4oPDWlx0aCTsEHSwWQt0rzY67HTNlOjoh/rngoH5Bnma7zb8pQO2F7NU8QQHIKQcfIYunTx2QnghDXyxnU7cDZAqYXvNTyhA8VcXTp2JZ4IQ18p9TtwNkBiDO813m35SgdsL2ap4ggOQRADmuzW/EUCThe81PKEGiIKQZ5mu82/KUDthezVPEEByCIAc12a34igScL3mp5Qg0NAi5fL35Mp1O66xru/rj1+3k76oObasOt2ZLDwA6Q9R09tUH3flbZ/jdEpjFZoEYb+OUD1i7U1zHxTzwmJ7h6jfkftAYgBzXZrfiKBJwveanlCDREHKzeEiysPU3Rlhg+h+/B4QI08EtaZ0MzCyRh0LSgYvh74e+b03brPo944yPu5PCBrQWg8SRsmjdHI0PY4aOafYhANHicfDI2SOnE17TqHBvqCgMQRAHaxdO7YinnhDnxH0O/B3CAtBaD/9k="},91060:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABAlBMVEUAAAAA//8AgP9Vqv9AgP9AgP85gP82hv8zgP8xhv8ugP8xif83if81hP81h/80g/8zhf8yh/80hP8yhP80hv8xhP81hv81g/80hf8yhP80hv80hv8yhP8yhP8yhf8yhv80hf8yhf8zhP8zhv8zhP8yhf8yhf8zhv8zhf8yhv80hf8zhv80hf8zhv8yhf80hf8zhf80hf8zhv8zhf8zhv80hP8zhf8yhf80hf8zhP8zhf8zhv8yhf80hf8zhf8zhf8zhf8zhP8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhv8zhf8zhf8zhf////8f5maRAAAAVHRSTlMAAQIDBAgSExQVFhocHSInMjM2ODs+P0RFTU5UV1tcYWJmaGlqa3V4eXp7fIqNjpSVo6SlpqapsbK5ur/AwcLDz9Da3t/g4uPo7/Lz9PX2+/z8/f6zDptbAAAAAWJLR0RVkwS4MwAAARJJREFUGBm9wek6AmEAhuE3k11FdjOmkH3LTihblO0b9Zz/sZh0Vd9Efrnct/5TLL25f7S3NKafOZkyX+qFCf1g8JK2+nZM3YbusOXVxbki9Ha4urhepCGnqAyhi1E1zFWA5xHZ+spAIa6mVBXYkW0SeB9TSw54kG0DOFRb/wuQlCUP5NRxDczIcgD46jgH5mXZBdbVcQukZVkGSmpL1CAYlCVRB2bVcgSUFFEAKik1rRHKKmK8BlRX+iUlTgg9OYraouG1eHZToyHwFBXLE2U8dVl5puXxAwh8dRneuScUlLKOa4DA1zfJ6YX0gEKuAQJfvbkGCHz15hnAeOrNM4CZUm+ugdO4fuGZY0e/mnL0Jz4BcBxPYxuSuGYAAAAASUVORK5CYII="},42638:function(e,t,n){n.d(t,{el:function(){return x},mT:function(){return C},XX:function(){return B}});n(44114);var i=n(19470),s=n(47966),r=n(15114),a=n(9737),o=n(68491),l=n(43166),A=n(72465),c=n(30075),u=(n(2516),n(86039)),h=n(55772),f=n(42116);async function p(e,t,n,i){const s=(0,f.Dl)(e),r=t[0].spatialReference,a={...i,query:{...s.query,f:"json",sr:JSON.stringify(r),target:JSON.stringify({geometryType:(0,h.$B)(t[0]),geometries:t}),cutter:JSON.stringify(n)}},o=await(0,u["default"])(s.path+"/cut",a),{cutIndexes:l,geometries:A=[]}=o.data;return{cutIndexes:l,geometries:A.map((e=>{const t=(0,h.rS)(e);return t.spatialReference=r,t}))}}var m=n(4244),g=n(63504);async function d(e,t,n){const i="string"==typeof e?(0,m.An)(e):e,s=t[0].spatialReference,r=(0,h.$B)(t[0]),a={...n,query:{...i.query,f:"json",sr:s.wkid??JSON.stringify(s),geometries:JSON.stringify((0,g.X)(t))}},{data:o}=await(0,u["default"])(i.path+"/simplify",a);return(0,g.V)(o.geometries,r,s)}const w=r.A.getLogger("geoscene.geometry.support.normalizeUtils");function b(e){return"polygon"===e.type}function v(e){return"polygon"===e[0].type}function y(e){return"polyline"===e[0].type}function B(e,t){if(!(e instanceof o.A||e instanceof a.A)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw w.error(e),new s.A(e)}const n=(0,l.r8)(e),i=[];for(const s of n){const e=[];i.push(e),e.push([s[0][0],s[0][1]]);for(let n=0;n<s.length-1;n++){const i=s[n][0],r=s[n][1],a=s[n+1][0],o=s[n+1][1],l=Math.sqrt((a-i)*(a-i)+(o-r)*(o-r)),A=(o-r)/l,c=(a-i)/l,u=l/t;if(u>1){for(let o=1;o<=u-1;o++){const n=o*t,s=c*n+i,a=A*n+r;e.push([s,a])}const n=(l+Math.floor(u-1)*t)/2,s=c*n+i,a=A*n+r;e.push([s,a])}e.push([a,o])}}return b(e)?new a.A({rings:i,spatialReference:e.spatialReference}):new o.A({paths:i,spatialReference:e.spatialReference})}function M(e,t,n){if(t){const t=B(e,1e6);e=(0,c.ci)(t,!0)}return n&&(e=(0,l.kS)(e,n)),e}function z(e,t,n){if(Array.isArray(e)){const i=e[0];if(i>t){const n=(0,l.kd)(i,t);e[0]=i+n*(-2*t)}else if(i<n){const t=(0,l.kd)(i,n);e[0]=i+t*(-2*n)}}else{const i=e.x;if(i>t){const n=(0,l.kd)(i,t);e=e.clone().offset(n*(-2*t),0)}else if(i<n){const t=(0,l.kd)(i,n);e=e.clone().offset(t*(-2*n),0)}}return e}function S(e,t){let n=-1;for(let i=0;i<t.cutIndexes.length;i++){const s=t.cutIndexes[i],r=t.geometries[i],a=(0,l.r8)(r);for(let e=0;e<a.length;e++){const t=a[e];t.some((n=>{if(n[0]<180)return!0;{let n=0;for(let e=0;e<t.length;e++){const i=t[e][0];n=i>n?i:n}n=Number(n.toFixed(9));const i=-360*(0,l.kd)(n,180);for(let s=0;s<t.length;s++){const t=r.getPoint(e,s);r.setPoint(e,s,t.clone().offset(i,0))}return!0}}))}if(s===n){if(v(e))for(const t of(0,l.r8)(r))e[s]=e[s].addRing(t);else if(y(e))for(const t of(0,l.r8)(r))e[s]=e[s].addPath(t)}else n=s,e[s]=r}return e}async function x(e,t,n){if(!Array.isArray(e))return x([e],t);t&&"string"!=typeof t&&w.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const s="string"==typeof t?t:t?.url??i.A.geometryServiceUrl;let r,u,h,f,m,g,b,v,y=0;const B=[],C=[];for(const i of e)if(null!=i)if(r||(r=i.spatialReference,u=(0,A.Vp)(r),h=r.isWebMercator,g=h?102100:4326,f=l.j7[g].maxX,m=l.j7[g].minX,b=l.j7[g].plus180Line,v=l.j7[g].minus180Line),u)if("mesh"===i.type)C.push(i);else if("point"===i.type)C.push(z(i.clone(),f,m));else if("multipoint"===i.type){const e=i.clone();e.points=e.points.map((e=>z(e,f,m))),C.push(e)}else if("extent"===i.type){const e=i.clone()._normalize(!1,!1,u);C.push(e.rings?new a.A(e):e)}else if(i.extent){const e=i.extent,t=(0,l.kd)(e.xmin,m)*(2*f);let n=0===t?i.clone():(0,l.kS)(i.clone(),t);e.offset(t,0),e.intersects(b)&&e.xmax!==f?(y=e.xmax>y?e.xmax:y,n=M(n,h),B.push(n),C.push("cut")):e.intersects(v)&&e.xmin!==m?(y=e.xmax*(2*f)>y?e.xmax*(2*f):y,n=M(n,h,360),B.push(n),C.push("cut")):C.push(n)}else C.push(i.clone());else C.push(i);else C.push(i);let R=(0,l.kd)(y,f),O=-90;const E=R,Q=new o.A;for(;R>0;){const e=360*R-180;Q.addPath([[e,O],[e,-1*O]]),O*=-1,R--}if(B.length>0&&E>0){const t=S(B,await p(s,B,Q,n)),i=[],r=[];for(let n=0;n<C.length;n++){const s=C[n];if("cut"!==s)r.push(s);else{const s=t.shift(),a=e[n];null!=a&&"polygon"===a.type&&a.rings&&a.rings.length>1&&s.rings.length>=a.rings.length?(i.push(s),r.push("simplify")):r.push(h?(0,c.Gh)(s):s)}}if(!i.length)return r;const a=await d(s,i,n),o=[];for(let e=0;e<r.length;e++){const t=r[e];"simplify"!==t?o.push(t):o.push(h?(0,c.Gh)(a.shift()):a.shift())}return o}const k=[];for(let i=0;i<C.length;i++){const e=C[i];if("cut"!==e)k.push(e);else{const e=B.shift();k.push(!0===h?(0,c.Gh)(e):e)}}return k}function C(e,t){const n=(0,A.Vp)(t);if(n){const[t,i]=n.valid,s=i-t;if(e<t)for(;e<t;)e+=s;if(e>i)for(;e>i;)e-=s}return e}},43166:function(e,t,n){n.d(t,{j7:function(){return a},kS:function(){return l},kd:function(){return o},r8:function(){return A}});var i=n(68491),s=n(12790),r=n(55772);const a={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new i.A({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:s.A.WebMercator}),minus180Line:new i.A({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:s.A.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new i.A({paths:[[[180,-180],[180,180]]],spatialReference:s.A.WGS84}),minus180Line:new i.A({paths:[[[-180,-180],[-180,180]]],spatialReference:s.A.WGS84})}};function o(e,t){return Math.ceil((e-t)/(2*t))}function l(e,t){const n=A(e);for(const i of n)for(const e of i)e[0]+=t;return e}function A(e){return(0,r.Bi)(e)?e.rings:e.paths}},75938:function(e,t,n){n.d(t,{A:function(){return Y}});var i=n(71457),s=n(76379),r=n(15114),a=n(87400),o=n(18513),l=n(76543),A=(n(37679),n(69292),n(51020),n(29916)),c=n(14811),u=n(79075),h=n(67681);function f(e){const t="metric";if(null==e)return t;const n=e.map,i=(n&&"portalItem"in n?n.portalItem?.portal:null)??h.A.getDefault();switch(i.user?.units??i.units){case t:return t;case"english":return"imperial"}return(0,u.jM)(e.spatialReference)??t}const p={readOnly:!0,get(){return f(this.view)}};var m=n(43895);const g="geoscene-scale-bar",d={base:`${g} geoscene-widget`,labelContainer:`${g}__label-container`,rulerLabelContainer:`${g}__label-container--ruler`,lineLabelContainer:`${g}__label-container--line`,topLabelContainer:`${g}__label-container--top`,bottomLabelContainer:`${g}__label-container--bottom`,label:`${g}__label`,line:`${g}__line`,topLine:`${g}__line--top`,bottomLine:`${g}__line--bottom`,ruler:`${g}__ruler`,rulerBlock:`${g}__ruler-block`,barContainer:`${g}__bar-container`,rulerBarContainer:`${g}__bar-container--ruler`,lineBarContainer:`${g}__bar-container--line`,disabled:"geoscene-disabled"};n(2516);var w=n(3734),b=(n(44114),n(47966)),v=n(43759),y=n(72465),B=n(68491),M=(n(9737),n(74036)),z=n(12790);function S(e){if(!e)return null;if((0,y.EA)(e)&&e.wkid){const t=v.uw[e.wkid];if(t)return t}if(e.wkt){const t=x(e.wkt);if(t)return t}return null}function x(e){const t=v.Ex.exec(e);if(!t||2!==t.length)return null;const n=t[1].split(",");if(!n||n.length<3)return null;const i=parseFloat(n[1]),s=parseFloat(n[2]);return isNaN(i)||isNaN(s)?null:{a:i,f:0===s?0:1/s}}function C(e){const t=S(e??z.A.WGS84);if(R(t))return t;const n=t.a*(1-t.f);return Object.assign(t,{b:n,eSq:1-(n/t.a)**2,radius:(2*t.a+n)/3,densificationRatio:1e4/((2*t.a+n)/3)})}function R(e){return null!=e&&"b"in e&&"eSq"in e&&"radius"in e}function O(e){return null!==S(e)}function E(e,t="meters"){if(!e)throw new b.A("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(e.some((e=>!O(e.spatialReference))))throw new b.A("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const n=[];for(let i=0;i<e.length;i++){const s=e[i],{spatialReference:r}=s,a="polyline"===s.type?s.paths:s.rings;let o=0;for(let e=0;e<a.length;e++){const t=a[e];let n=0;for(let e=1;e<t.length;e++){const i=t[e-1][0],s=t[e][0],a=t[e-1][1],o=t[e][1];if(a!==o||i!==s){const e=new Q;k(e,[i,a],[s,o],r),n+=e.distance}}o+=n}o=(0,u.oU)(o,"meters",t),n.push(o)}return n}class Q{constructor(e=0,t=void 0,n=void 0){this.distance=e,this.azimuth=t,this.reverseAzimuth=n}}function k(e,t,n,i){const s=t[0]*v.eh,r=t[1]*v.eh,a=n[0]*v.eh,o=n[1]*v.eh,{a:l,b:A,f:c,radius:u}=C(i),h=a-s,f=Math.atan((1-c)*Math.tan(r)),p=Math.atan((1-c)*Math.tan(o)),m=Math.sin(f),g=Math.cos(f),d=Math.sin(p),w=Math.cos(p);let b,y,B,M,z,S,x,R,O,E,Q=1e3,k=h;do{if(x=Math.sin(k),R=Math.cos(k),B=Math.sqrt(w*x*(w*x)+(g*d-m*w*R)*(g*d-m*w*R)),0===B)return e.distance=0,e.azimuth=void 0,e.reverseAzimuth=void 0,e;z=m*d+g*w*R,S=Math.atan2(B,z),O=g*w*x/B,y=1-O*O,M=z-2*m*d/y,isNaN(M)&&(M=0),E=c/16*y*(4+c*(4-3*y)),b=k,k=h+(1-E)*c*O*(S+E*B*(M+E*z*(2*M*M-1)))}while(Math.abs(k-b)>1e-12&&--Q>0);if(0===Q){const t=u,n=Math.acos(Math.sin(r)*Math.sin(o)+Math.cos(r)*Math.cos(o)*Math.cos(a-s))*t,i=a-s,l=Math.sin(i)*Math.cos(o),A=Math.cos(r)*Math.sin(o)-Math.sin(r)*Math.cos(o)*Math.cos(i),c=Math.atan2(l,A);return e.azimuth=c/v.eh,e.distance=n,e.reverseAzimuth=void 0,e}const Z=y*(l*l-A*A)/(A*A),L=Z/1024*(256+Z*(Z*(74-47*Z)-128)),q=A*(1+Z/16384*(4096+Z*(Z*(320-175*Z)-768)))*(S-L*B*(M+L/4*(z*(2*M*M-1)-L/6*M*(4*B*B-3)*(4*M*M-3)))),D=Math.atan2(w*Math.sin(k),g*d-m*w*Math.cos(k)),P=Math.atan2(g*Math.sin(k),g*d*Math.cos(k)-m*w);return e.azimuth=D/v.eh,e.distance=q,e.reverseAzimuth=P/v.eh,e}var Z=n(42638),L=n(30075),q=n(29726);function D(e){return e>.5?{min:.5,max:1}:e>.2?{min:.2,max:.5}:{min:.1,max:.2}}function P(e,t){switch(t){case"metric":return e>1e3?{distance:(0,u.oU)(e,"meters","kilometers"),unit:"kilometer"}:e>1?{distance:e,unit:"meter"}:e>.01?{distance:(0,u.oU)(e,"meters","centimeters"),unit:"centimeter"}:{distance:(0,u.oU)(e,"meters","millimeters"),unit:"millimeter"};case"imperial":case"non-metric":return e>1609.344?{distance:(0,u.oU)(e,"meters","miles"),unit:"mile"}:e>.3048?{distance:(0,u.oU)(e,"meters","feet"),unit:"foot"}:{distance:(0,u.oU)(e,"meters","inches"),unit:"inch"}}}function U(e){const{isWebMercator:t,wkt:n}=e;return t||(n?.includes("WGS_1984_Web_Mercator")??!1)}function V(e){const{wkid:t,wkt:n}=e;if(null!=t&&null!=q.A[t])return q.A.values[q.A[t]];if(null!=n){const e=n.lastIndexOf(",")+1,t=n.lastIndexOf("]]");return parseFloat(n.substring(e,t))}return 1}function _({state:{paddedViewState:e},spatialReference:t,width:n}){return t.isWrappable&&e.worldScreenWidth<n}function I(e,t){const{x:n,y:i}=e?(0,L.ci)(t,!0):t;return[n,i]}let K=class extends w.A{constructor(e){super(e),this.scaleComputedFrom=(0,o.tc)(),this.view=null}get state(){return this.view?.ready&&"2d"===this.view?.type?"ready":"disabled"}getScaleBarProperties(e,t){if("disabled"===this.state||isNaN(e)||!t||!this.view)return null;const n=this._getDistanceInMeters();return null==n?null:this._getScaleBarProps(e,n,t)}_getDistanceInMeters(){const{state:e,spatialReference:t}=this.view;if(!(0,y.fn)(t))return null;const{isGeographic:n}=t,i=U(t);if(!n&&!i)return e.extent.width*V(t);const[s,r]=this._getScaleMeasuringPoints(),a=i||n&&!O(t)?z.A.WGS84:t,o=new B.A({paths:[[I(i,s),I(i,r)]],spatialReference:a}),l=(0,Z.XX)(o,10);let A;try{[A]=E([l],"meters")}catch{return null}return A}_getScaleMeasuringPoints(){const e=this.view,{width:t,height:n,position:i,spatialReference:s}=e;if(_(e)){const e=(0,y.Vp)(s),{valid:t}=e;return[new M.A(t[0],0,s),new M.A(t[1],0,s)]}let r=this.scaleComputedFrom.y-i[1];r>n?r=n:r<0&&(r=0);const a=(0,o.tc)(0,r),l=(0,o.tc)(t,r);return[e.toMap(a),e.toMap(l)]}_getScaleBarProps(e,t,n){const i=this.view,s=e*t/(_(i)?i.state.paddedViewState.worldScreenWidth:i.width);if(s<.001)return null;const r=P(s,n),{distance:a,unit:o}=r;let l=a,A=0;for(;l>=1;)l/=10,A++;const{min:c,max:u}=D(l),h=u/l>=l/c?c:u;return{length:e*(h/l),value:10**A*h,unit:o}}};(0,i._)([(0,l.MZ)()],K.prototype,"scaleComputedFrom",void 0),(0,i._)([(0,l.MZ)({readOnly:!0})],K.prototype,"state",null),(0,i._)([(0,l.MZ)()],K.prototype,"view",void 0),K=(0,i._)([(0,A.$)("geoscene.widgets.Scalebar.ScaleBarViewModel")],K);const J=K;n(80568);var F=n(688),H=n(45283);function N(e,t){return(0,c.ZV)(e,{style:"unit",unit:t,unitDisplay:"short"})}const W="geoscene.widgets.ScaleBar",G=r.A.getLogger(W);let j=class extends m.A{constructor(e,t){super(e,t),this.messages=null,this.style="line",this.viewModel=new J}initialize(){this.addHandles((0,a.wB)((()=>{const{view:e}=this;return[e?.stationary,e?.center,e?.scale,e?.zoom]}),(([e])=>{e&&this.scheduleRender()})))}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get unit(){return this._defaultUnit}set unit(e){"non-metric"===e&&(0,s.Lx)(G,"unit",{replacement:"Please use 'imperial' instead of 'non-metric'.",see:"https://doc.geoscene.cn/javascript/4.27/api-reference/geoscene-widgets-ScaleBar.html#unit",version:"4.27",warnOnce:!0}),this._overrideIfSome("unit",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e="disabled"===this.viewModel.state,t={[d.disabled]:e};let n,i;if(!e){const{unit:e,style:t}=this,s="metric"===e||"dual"===e,r=100,a="dual"===e?"line":t;if("imperial"===e||"non-metric"===e||"dual"===e){const e=this.viewModel.getScaleBarProperties(r,"imperial");e&&(i="ruler"===a?this._renderRuler(e):this._renderLine(e,"bottom"))}if(s){const e=this.viewModel.getScaleBarProperties(r,"metric");e&&(n="ruler"===a?this._renderRuler(e):this._renderLine(e,"top"))}}return(0,H.K)("div",{afterCreate:this._handleRootCreateOrUpdate,afterUpdate:this._handleRootCreateOrUpdate,bind:this,class:this.classes(d.base,t)},n,i)}_renderRuler(e){const{length:t,unit:n,value:i}=e,s=Math.round(t),r=N(i,n);return(0,H.K)("div",{class:this.classes(d.barContainer,d.rulerBarContainer),key:d.rulerBarContainer},(0,H.K)("div",{class:d.ruler,styles:{width:`${s}px`}},(0,H.K)("div",{class:d.rulerBlock}),(0,H.K)("div",{class:d.rulerBlock}),(0,H.K)("div",{class:d.rulerBlock}),(0,H.K)("div",{class:d.rulerBlock})),(0,H.K)("div",{class:this.classes(d.labelContainer,d.rulerLabelContainer)},(0,H.K)("div",{class:d.label},"0"),(0,H.K)("div",{class:d.label},r)))}_renderLine(e,t){const{length:n,unit:i,value:s}=e,r=Math.round(n),a=N(s,i),o={[d.topLabelContainer]:"top"===t,[d.bottomLabelContainer]:"bottom"===t},l=(0,H.K)("div",{class:this.classes(d.labelContainer,d.lineLabelContainer,o),key:d.labelContainer},(0,H.K)("div",{class:d.label},a)),A={[d.topLine]:"top"===t,[d.bottomLine]:"bottom"===t},c=(0,H.K)("div",{class:this.classes(d.line,A),key:d.line,styles:{width:`${r}px`}});return(0,H.K)("div",{class:this.classes(d.barContainer,d.lineBarContainer),key:d.lineBarContainer},[c,l])}_handleRootCreateOrUpdate(e){if(!this.viewModel)return;const{scaleComputedFrom:t}=this.viewModel,n=e.getBoundingClientRect(),i=n.left+window.pageXOffset,s=n.top+window.pageYOffset,r=(0,o.tc)(i,s);(r.x!==t.x||r.y!==t.y)&&(this.viewModel.scaleComputedFrom=r)}};(0,i._)([(0,l.MZ)(p)],j.prototype,"_defaultUnit",void 0),(0,i._)([(0,l.MZ)()],j.prototype,"label",null),(0,i._)([(0,l.MZ)(),(0,F.G)("geoscene/widgets/ScaleBar/t9n/ScaleBar")],j.prototype,"messages",void 0),(0,i._)([(0,l.MZ)({type:["ruler","line"]})],j.prototype,"style",void 0),(0,i._)([(0,l.MZ)({type:["metric","imperial","dual","non-metric"]})],j.prototype,"unit",null),(0,i._)([(0,l.MZ)()],j.prototype,"view",null),(0,i._)([(0,l.MZ)()],j.prototype,"viewModel",void 0),j=(0,i._)([(0,A.$)(W)],j);const Y=j}}]);
//# sourceMappingURL=993.9e12a6bc.js.map