"use strict";(self["webpackChunksun_glare_project"]=self["webpackChunksun_glare_project"]||[]).push([[5125],{95049:function(e,t,n){n.d(t,{Bu:function(){return x},DW:function(){return L},FM:function(){return s},G9:function(){return i},Go:function(){return m},Kn:function(){return P},MM:function(){return p},Nl:function(){return E},Ny:function(){return C},O2:function(){return T},P3:function(){return u},UE:function(){return O},ZT:function(){return y},_1:function(){return z},_H:function(){return I},_W:function(){return k},_d:function(){return S},gQ:function(){return a},jn:function(){return M},lO:function(){return f},lW:function(){return h},mA:function(){return b},n5:function(){return j},pM:function(){return A},pV:function(){return w},qJ:function(){return r},s4:function(){return o},xo:function(){return G},yH:function(){return g},zr:function(){return d}});n(44114);function r(e){return"function"==typeof e}function o(e,t,n,o){return r(e)?e(t,n,o):e}function i(e){return[e.r,e.g,e.b,e.a]}const c=" /-,\n";function l(e){let t=e.length;for(;t--;)if(!c.includes(e.charAt(t)))return!1;return!0}function a(e,t){const n=[];let r=0,o=-1;do{if(o=e.indexOf("[",r),o>=r){if(o>r){const t=e.substr(r,o-r);n.push([t,null,l(t)])}if(r=o+1,o=e.indexOf("]",r),o>=r){if(o>r){const i=t[e.substr(r,o-r)];i&&n.push([null,i,!1])}r=o+1}}}while(-1!==o);if(r<e.length-1){const t=e.substr(r);n.push([t,null,l(t)])}return n}function s(e,t,n){let r="",o=null;for(const i of t){const[t,n,c]=i;if(t)c?o=t:(o&&(r+=o,o=null),r+=t);else{const t=e.attributes[n];t&&(o&&(r+=o,o=null),r+=t)}}return f(r,n)}function u(e,t,n){const r=a(t,e);return e=>s(e,r,n)}function f(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function m(e,t,n,r,o,i,c=!0){const l=t/o,a=n/i,s=Math.ceil(l/2),u=Math.ceil(a/2);for(let f=0;f<i;f++)for(let n=0;n<o;n++){const m=4*(n+(c?i-f-1:f)*o);let y=0,h=0,p=0,b=0,M=0,d=0,k=0;const C=(f+.5)*a;for(let r=Math.floor(f*a);r<(f+1)*a;r++){const o=Math.abs(C-(r+.5))/u,i=(n+.5)*l,c=o*o;for(let a=Math.floor(n*l);a<(n+1)*l;a++){let n=Math.abs(i-(a+.5))/s;const o=Math.sqrt(c+n*n);o>=-1&&o<=1&&(y=2*o*o*o-3*o*o+1,y>0&&(n=4*(a+r*t),k+=y*e[n+3],p+=y,e[n+3]<255&&(y=y*e[n+3]/250),b+=y*e[n],M+=y*e[n+1],d+=y*e[n+2],h+=y))}}r[m]=b/h,r[m+1]=M/h,r[m+2]=d/h,r[m+3]=k/p}}function y(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function h(e){return e.data?.symbol??null}function p(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function b(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function M(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function d(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const k=(e,t=0)=>null==e||isNaN(e)?t:e,C=e=>e.tintColor?y(e.tintColor):{r:255,g:255,b:255,a:1},g=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function I(){return Promise.all([n.e(8574),n.e(1056)]).then(n.bind(n,68675))}function w(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function P(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function S(e){let t="normal",n="normal";if(e){const r=e.toLowerCase();r.includes("italic")?t="italic":r.includes("oblique")&&(t="oblique"),r.includes("bold")?n="bold":r.includes("light")&&(n="lighter")}return{style:t,weight:n}}function L(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function A(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=A(t);if(null!=e)return e}break;case"CIMTextSymbol":return A(e.symbol);case"CIMSolidFill":return e.color}}function z(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=z(e);if(null!=t)return t}break}case"CIMTextSymbol":return z(e.symbol);case"CIMSolidStroke":return e.color}}function G(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=G(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return G(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function x(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function E(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function T(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const O=e=>e.includes("data:image/svg+xml");function j(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}},49290:function(e,t,n){n.d(t,{Fe:function(){return m},Nk:function(){return s},mR:function(){return c}});n(44114);var r=n(37257),o=n(95049);function i(e,t,n,r){if(e)if("CIMTextSymbol"!==e.type){if(n&&e.effects)for(const n of e.effects)a(n,t);if(e.symbolLayers)for(const n of e.symbolLayers)switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":c(n,t,r);break;case"CIMPictureStroke":case"CIMSolidStroke":!r?.preserveOutlineWidth&&n.width&&(n.width*=t);break;case"CIMPictureFill":n.height&&(n.height*=t),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t);break;case"CIMHatchFill":i(n.lineSymbol,t,!0,{...r,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t),n.separation&&(n.separation*=t)}}else null!=e.height&&(e.height*=t)}function c(e,t,n){if(e&&(e.markerPlacement&&l(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=null!=e.size?e.size*t:0,"CIMVectorMarker"===e.type&&e.markerGraphics))for(const r of e.markerGraphics)e.scaleSymbolsProportionally||i(r.symbol,t,!0,n)}function l(e,t){switch((0,o.zr)(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}function a(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const n=e.dashTemplate.map((e=>e*t));e.dashTemplate=n}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function s(e){const t=[];return u((0,o.lW)(e),t),t.length?new r.A((0,o.ZT)(t[0])):null}function u(e,t){if(!e)return;let n;n="CIMTextSymbol"===e.type?e.symbol:e;const r="CIMPolygonSymbol"===e.type;if(n?.symbolLayers)for(const i of n.symbolLayers)if(!(i.colorLocked||r&&((0,o.mA)(i)||(0,o.MM)(i)&&i.markerPlacement&&(0,o.zr)(i.markerPlacement))))switch(i.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":i.tintColor&&f(t,i.tintColor);break;case"CIMVectorMarker":i.markerGraphics?.forEach((e=>{u(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":f(t,i.color);break;case"CIMHatchFill":u(i.lineSymbol,t)}}function f(e,t){for(const n of e)if(n.join(".")===t.join("."))return;e.push(t)}function m(e,t,n){t instanceof r.A||(t=new r.A(t));const i=(0,o.lW)(e);i&&y(i,t,n)}function y(e,t,n){if(!e)return;let r;r="CIMTextSymbol"===e.type?e.symbol:e;const i="CIMPolygonSymbol"===r?.type;if(r?.symbolLayers)for(const c of r.symbolLayers){if(c.colorLocked)continue;if(i)if(n){const{layersToColor:e}=n;if(((0,o.mA)(c)||(0,o.MM)(c)&&c.markerPlacement&&(0,o.zr)(c.markerPlacement))&&"fill"===e||(0,o.jn)(c)&&"outline"===e)continue}else if((0,o.mA)(c)||(0,o.MM)(c)&&c.markerPlacement&&(0,o.zr)(c.markerPlacement))continue;const e=t.toArray();switch(c.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":c.tintColor=e;break;case"CIMVectorMarker":c.markerGraphics?.forEach((e=>{y(e.symbol,t,n)}));break;case"CIMSolidStroke":case"CIMSolidFill":c.color=e;break;case"CIMHatchFill":y(c.lineSymbol,t,n)}}}},1570:function(e,t,n){n.d(t,{$4:function(){return d},O1:function(){return k},Sw:function(){return C},eH:function(){return b},rc:function(){return M}});var r=n(8281),o=n(37257),i=n(86039),c=n(46795),l=n(18513),a=n(49290);const s="picture-fill",u="simple-fill",f="simple-line",m="simple-marker",y="text",h="cim",p=new c.q(1e3);function b(e){const t=e.style;let n=null;if(e)switch(e.type){case m:"cross"!==t&&"x"!==t&&(n=e.color);break;case u:"solid"===t?n=e.color:"none"!==t&&(n={type:"pattern",x:0,y:0,src:(0,r.s)(`geoscene/symbols/patterns/${t}.png`),width:5,height:5});break;case s:n={type:"pattern",src:e.url,width:(0,l.Lz)(e.width)*e.xscale,height:(0,l.Lz)(e.height)*e.yscale,x:(0,l.Lz)(e.xoffset),y:(0,l.Lz)(e.yoffset)};break;case y:n=e.color;break;case h:n=(0,a.Nk)(e)}return n}function M(e,t){const n=e+"-"+t;return void 0!==p.get(n)?Promise.resolve(p.get(n)):(0,i["default"])(e,{responseType:"image"}).then((e=>{const r=e.data,o=r.naturalWidth,i=r.naturalHeight,c=document.createElement("canvas");c.width=o,c.height=i;const l=c.getContext("2d");l.fillStyle=t,l.fillRect(0,0,o,i),l.globalCompositeOperation="destination-in",l.drawImage(r,0,0);const a=c.toDataURL();return p.put(n,a),a}))}function d(e){if(!e)return null;let t=null;switch(e.type){case u:case s:case m:t=d(e.outline);break;case f:{const n=(0,l.Lz)(e.width);null!=e.style&&"none"!==e.style&&0!==n&&(t={color:e.color,style:k(e.style),width:n,cap:e.cap,join:"miter"===e.join?(0,l.Lz)(e.miterLimit):e.join});break}default:t=null}return t}const k=(()=>{const e={};return t=>{if(e[t])return e[t];const n=t.replaceAll("-","");return e[t]=n,n}})(),C=new o.A([128,128,128])},45125:function(e,t,n){n.d(t,{$d:function(){return b},GG:function(){return v},N7:function(){return M},Sx:function(){return d},UQ:function(){return F},di:function(){return R},dt:function(){return w},k_:function(){return p},yG:function(){return W}});var r=n(37257),o=n(85092),i=n(49067),c=(n(51020),n(79908)),l=n(18513),a=n(456),s=n(37287),u=n(49290),f=n(1570),m=n(28252);const y=new r.A("white");function h(e){const t=e.symbolLayers?.at(-1);if(t&&"outline"in t)return t?.outline?.size}function p(e){if(!e)return 0;if((0,o.wk)(e)){const t=h(e);return null!=t?t:0}return(0,l.PN)((0,f.$4)(e)?.width)}function b(e){if(null==e||!("symbolLayers"in e)||null==e.symbolLayers)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((e=>"object"===e.type));case"line-3d":return e.symbolLayers.some((e=>"path"===e.type));case"polygon-3d":return e.symbolLayers.some((e=>"object"===e.type||"extrude"===e.type));default:return!1}}function M(e){return(0,c.T7)(e.resource).href}function d(e,t){if(!e)return null;let n=null;return(0,o.wk)(e)?n=k(e):(0,o.$y)(e)&&(n="cim"===e.type?(0,u.Nk)(e):e.color?new r.A(e.color):null),n?C(n,t):null}function k(e){const t=e.symbolLayers;if(!t)return null;let n=null;return t.forEach((e=>{"object"===e.type&&e.resource?.href||(n="water"===e.type?e.color:e.material?e.material.color:null)})),n?new r.A(n):null}function C(e,t){if(null==t||null==e)return e;const n=e.toRgba();return n[3]=n[3]*t,new r.A(n)}function g(e,t,n){const r=e.symbolLayers;if(!r)return;const o=e=>C(t=t??e??(null!=n?y:null),n);r.forEach((e=>{if("object"!==e.type||!e.resource?.href||t)if("water"===e.type)e.color=o(e.color);else{const t=null!=e.material?e.material.color:null,r=o(t);null==e.material?e.material=new m.N({color:r}):e.material.color=r,null!=n&&"outline"in e&&null!=e.outline&&null!=e.outline.color&&(e.outline.color=C(e.outline.color,n))}}))}function I(e,t,n){(t=t??e.color)&&(e.color=C(t,n)),null!=n&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=C(e.outline.color,n))}function w(e,t,n){e&&(t||null!=n)&&(t&&(t=new r.A(t)),(0,o.wk)(e)?g(e,t,n):(0,o.$y)(e)&&I(e,t,n))}async function P(e,t){const n=e.symbolLayers;n&&await(0,i.jJ)(n,(async e=>S(e,t)))}async function S(e,t){switch(e.type){case"extrude":z(e,t);break;case"icon":case"line":case"text":L(e,t);break;case"path":x(e,t);break;case"object":await G(e,t)}}function L(e,t){const n=A(t);null!=n&&(e.size=n)}function A(e){for(const t of e)if("number"==typeof t)return t;return null}function z(e,t){e.size="number"==typeof t[2]?t[2]:0}async function G(e,t){const{resourceSize:n,symbolSize:r}=await T(e),o=E(t,n,r);e.width=O(t[0],r[0],n[0],o),e.depth=O(t[1],r[1],n[1],o),e.height=O(t[2],r[2],n[2],o)}function x(e,t){const n=E(t,a.O,[e.width,void 0,e.height]);e.width=O(t[0],e.width,1,n),e.height=O(t[2],e.height,1,n)}function E(e,t,n){for(let r=0;r<3;r++){const o=e[r];switch(o){case"symbol-value":{const e=n[r];return null!=e?e/t[r]:1}case"proportional":break;default:if(o&&t[r])return o/t[r]}}return 1}async function T(e){const{computeObjectLayerResourceSize:t}=await n.e(9376).then(n.bind(n,59376)),r=await t(e,10),{width:o,height:i,depth:c}=e,l=[o,c,i];let a=1;for(let n=0;n<3;n++){const e=l[n];if(null!=e){a=e/r[n];break}}for(let n=0;n<3;n++)null==l[n]&&(l[n]=r[n]*a);return{resourceSize:r,symbolSize:l}}function O(e,t,n,r){switch(e){case"proportional":return n*r;case"symbol-value":return null!=t?t:n;default:return e}}function j(e,t){const n=A(t);if(null!=n)switch(e.type){case"simple-marker":e.size=n;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=n,e.height=n*t):(e.width=n*t,e.height=n);break}case"simple-line":e.width=n;break;case"text":e.font.size=n}}async function F(e,t){if(e&&t)return(0,o.wk)(e)?P(e,t):void((0,o.$y)(e)&&j(e,t))}function v(e,t,n){if(e&&null!=t)if((0,o.wk)(e)){const r=e.symbolLayers;r&&r.forEach((e=>{if(e&&"object"===e.type)switch(n){case"tilt":e.tilt=t;break;case"roll":e.roll=t;break;default:e.heading=t}}))}else(0,o.$y)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle=t))}function R(e){if(!e)return null;const t=e.effects.filter((e=>"bloom"!==e.type)).map((e=>e.toJSON()));return(0,s.zu)(t)}async function W(e,t){const n=await e.fetchSymbol(t);return n||e.fetchCIMSymbol(t)}}}]);
//# sourceMappingURL=5125.ca85b547.js.map