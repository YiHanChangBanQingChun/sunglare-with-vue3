"use strict";(self["webpackChunksun_glare_project"]=self["webpackChunksun_glare_project"]||[]).push([[3949],{87035:function(e,a,s){s.r(a),s.d(a,{default:function(){return z}});var l=s(56768),o=s(45130),t=s(24232);const r={class:"deng-lu"},n=(0,l.Lk)("div",{class:"text"},[(0,l.Lk)("h1",null,"欢迎登录")],-1),i={class:"login-container"},u=(0,l.Lk)("div",{class:"image-container"},[(0,l.Lk)("img",{src:"/login.png",alt:"Login Image"})],-1),d={class:"login-box"},c={class:"form-container"},p={class:"form-group"},g=(0,l.Lk)("label",{for:"username"},"用户名:",-1),v={class:"form-group"},m=(0,l.Lk)("label",{for:"password"},"密码:",-1),k={class:"button-group"},L={key:0,class:"modal-overlay"},w={class:"modal"},y=(0,l.Lk)("h2",null,"注册",-1),f={class:"form-group"},b=(0,l.Lk)("label",{for:"reg-username"},"用户名：",-1),h=(0,l.Lk)("span",{class:"note"},"注意：用户名只能使用2到10字符数的中文、数字、英文三种组合。",-1),R={class:"form-group"},U=(0,l.Lk)("label",{for:"reg-password"},"密码：",-1),C=(0,l.Lk)("span",{class:"note"},"注意：密码需要使用包含英文和数字的6到10字符数。",-1),V={class:"form-group"},K=(0,l.Lk)("label",{for:"reg-email"},"邮箱：",-1),J={class:"form-group"},P=(0,l.Lk)("label",{for:"reg-security-question"},"安全问题：",-1),j=(0,l.Lk)("span",{class:"note"},"注意：用于忘记密码时找回。",-1),x={class:"form-group"},A=(0,l.Lk)("label",{for:"reg-security-answer"},"回答：",-1),_={class:"form-group"},E=(0,l.Lk)("label",{for:"reg-birthday"},"生日：",-1),M={class:"button-group"};function O(e,a,s,O,Q,S){return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",r,[n,(0,l.Lk)("div",i,[u,(0,l.Lk)("div",d,[(0,l.Lk)("div",c,[(0,l.Lk)("div",p,[g,(0,l.bo)((0,l.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":a[0]||(a[0]=e=>O.loginUsername=e)},null,512),[[o.Jo,O.loginUsername]])])]),(0,l.Lk)("div",v,[m,(0,l.bo)((0,l.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":a[1]||(a[1]=e=>O.loginPassword=e)},null,512),[[o.Jo,O.loginPassword]])]),(0,l.Lk)("div",k,[(0,l.Lk)("button",{onClick:a[2]||(a[2]=e=>O.showRegisterModal=!0)},"没有账号，注册一个？"),(0,l.Lk)("button",{onClick:a[3]||(a[3]=(...a)=>e.resetPassword&&e.resetPassword(...a))},"忘记密码？"),(0,l.Lk)("button",{onClick:a[4]||(a[4]=(...e)=>O.login&&O.login(...e))},"登录")])])])]),O.showRegisterModal?((0,l.uX)(),(0,l.CE)("div",L,[(0,l.Lk)("div",w,[y,(0,l.Lk)("div",f,[b,(0,l.bo)((0,l.Lk)("input",{type:"text",id:"reg-username","onUpdate:modelValue":a[5]||(a[5]=e=>O.username=e),class:(0,t.C4)({"invalid-input":!O.isUsernameValid})},null,2),[[o.Jo,O.username]]),h]),(0,l.Lk)("div",R,[U,(0,l.bo)((0,l.Lk)("input",{type:"password",id:"reg-password","onUpdate:modelValue":a[6]||(a[6]=e=>O.password=e),class:(0,t.C4)({"invalid-input":!O.isPasswordValid})},null,2),[[o.Jo,O.password]]),C]),(0,l.Lk)("div",V,[K,(0,l.bo)((0,l.Lk)("input",{type:"email",id:"reg-email","onUpdate:modelValue":a[7]||(a[7]=e=>O.email=e),class:(0,t.C4)({"invalid-input":!O.isEmailValid})},null,2),[[o.Jo,O.email]])]),(0,l.Lk)("div",J,[P,(0,l.bo)((0,l.Lk)("input",{type:"text",id:"reg-security-question","onUpdate:modelValue":a[8]||(a[8]=e=>O.securityQuestion=e)},null,512),[[o.Jo,O.securityQuestion]]),j]),(0,l.Lk)("div",x,[A,(0,l.bo)((0,l.Lk)("input",{type:"text",id:"reg-security-answer","onUpdate:modelValue":a[9]||(a[9]=e=>O.securityAnswer=e)},null,512),[[o.Jo,O.securityAnswer]])]),(0,l.Lk)("div",_,[E,(0,l.bo)((0,l.Lk)("input",{type:"date",id:"reg-birthday","onUpdate:modelValue":a[10]||(a[10]=e=>O.birthday=e)},null,512),[[o.Jo,O.birthday]])]),(0,l.Lk)("div",M,[(0,l.Lk)("button",{onClick:a[11]||(a[11]=e=>O.showRegisterModal=!1)},"取消"),(0,l.Lk)("button",{onClick:a[12]||(a[12]=(...e)=>O.register&&O.register(...e))},"注册")])])])):(0,l.Q3)("",!0)],64)}var Q=s(90144),S={setup(){const e=(0,Q.KR)(""),a=(0,Q.KR)(""),s=(0,Q.KR)(""),o=(0,Q.KR)(""),t=(0,Q.KR)(""),r=(0,Q.KR)(""),n=(0,Q.KR)(""),i=(0,Q.KR)(""),u=(0,Q.KR)(!1),d=(0,Q.KR)(!0),c=(0,Q.KR)(!0),p=(0,Q.KR)(!0),g=()=>{e.value="",a.value="",s.value="",o.value="",t.value="",r.value=""},v=e=>{if(""===e)return!0;const a=/^[a-zA-Z0-9\u4e00-\u9fa5]{2,10}$/;return a.test(e)},m=()=>{d.value=v(e.value),console.log("Username valid:",d.value)};(0,l.wB)(e,m);const k=e=>{if(""===e)return!0;const a=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,10}$/;return a.test(e)},L=()=>{c.value=k(a.value),console.log("Password valid:",c.value)};(0,l.wB)(a,L);const w=e=>{if(""===e)return!0;const a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return a.test(e)},y=()=>{p.value=w(s.value),console.log("Email valid:",p.value)};(0,l.wB)(s,y);const f=async()=>{if(e.value&&a.value&&s.value&&o.value&&t.value&&r.value)if(d.value)if(c.value)if(p.value)try{const l=await fetch("http://localhost:5000/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.value,password:a.value,email:s.value,security_question:o.value,security_answer:t.value,birthday:r.value})});if(l.ok){const e=await l.json();alert(e.message),u.value=!1,g()}else if(400===l.status){const e=await l.json();"Username already exists"===e.message?alert("用户名已存在，请重新输入"):alert(e.message)}else{const e=await l.json();alert(e.message)}}catch(l){console.error("注册请求失败:",l),g(),alert("注册请求失败，请稍后再试。")}else alert("邮箱格式不正确");else alert("密码必须是6-10个字符，并包含字母和数字");else alert("用户名必须是2-10个字母、数字或汉字的组合");else alert("请填写所有字段")},b=async()=>{try{const e=await fetch("http://localhost:5000/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n.value,password:i.value})});if(e.ok){const a=await e.json();alert(a.message)}else{const a=await e.json();alert(a.message)}}catch(e){console.error("登录请求失败:",e),alert("登录请求失败，请稍后再试。")}};return{username:e,password:a,email:s,securityQuestion:o,securityAnswer:t,birthday:r,loginUsername:n,loginPassword:i,showRegisterModal:u,validateUsername:v,checkUsername:m,register:f,clearRegisterForm:g,isUsernameValid:d,isEmailValid:p,isPasswordValid:c,login:b}}},T=s(71241);const q=(0,T.A)(S,[["render",O]]);var z=q}}]);
//# sourceMappingURL=deng-lu.f91b7792.js.map