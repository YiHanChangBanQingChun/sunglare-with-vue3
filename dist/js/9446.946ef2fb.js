"use strict";(self["webpackChunksun_glare_project"]=self["webpackChunksun_glare_project"]||[]).push([[9446],{91253:function(e,t,n){n.d(t,{$X:function(){return A},Gy:function(){return b},P5:function(){return B},SW:function(){return L},Tr:function(){return x},VV:function(){return c},qj:function(){return T}});n(44114);var r=n(55772);const i=(e,t,n)=>[t,n],o=(e,t,n)=>[t,n,e[2]],a=(e,t,n)=>[t,n,e[2],e[3]];function c(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:null!=e.extent?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function u({scale:e,translate:t},n){return Math.round((n-t[0])/e[0])}function s({scale:e,translate:t},n){return Math.round((t[1]-n)/e[1])}function l(e,t,n){const r=[];let i,o,a,c;for(let l=0;l<n.length;l++){const f=n[l];l>0?(a=u(e,f[0]),c=s(e,f[1]),a===i&&c===o||(r.push(t(f,a-i,c-o)),i=a,o=c)):(i=u(e,f[0]),o=s(e,f[1]),r.push(t(f,i,o)))}return r.length>0?r:null}function f(e,t,n,r){return l(e,n?r?a:o:r?o:i,t)}function h(e,t,n,r){const c=[],u=n?r?a:o:r?o:i;for(let i=0;i<t.length;i++){const n=l(e,u,t[i]);n&&n.length>=3&&c.push(n)}return c.length?c:null}function g(e,t,n,r){const c=[],u=n?r?a:o:r?o:i;for(let i=0;i<t.length;i++){const n=l(e,u,t[i]);n&&n.length>=2&&c.push(n)}return c.length?c:null}function d({scale:e,translate:t},n){return n*e[0]+t[0]}function m({scale:e,translate:t},n){return t[1]-n*e[1]}function p(e,t,n){const r=new Array(n.length);if(!n.length)return r;const[i,o]=e.scale;let a=d(e,n[0][0]),c=m(e,n[0][1]);r[0]=t(n[0],a,c);for(let u=1;u<n.length;u++){const e=n[u];a+=e[0]*i,c-=e[1]*o,r[u]=t(e,a,c)}return r}function y(e,t,n){const r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=p(e,t,n[i]);return r}function w(e,t,n,r){return p(e,n?r?a:o:r?o:i,t)}function C(e,t,n,r){return y(e,n?r?a:o:r?o:i,t)}function R(e,t,n,r){return y(e,n?r?a:o:r?o:i,t)}function P(e,t,n,r,i){return t.xmin=u(e,n.xmin),t.ymin=s(e,n.ymin),t.xmax=u(e,n.xmax),t.ymax=s(e,n.ymax),t!==n&&(r&&(t.zmin=n.zmin,t.zmax=n.zmax),i&&(t.mmin=n.mmin,t.mmax=n.mmax)),t}function v(e,t,n,r,i){return t.points=f(e,n.points,r,i)??[],t}function b(e,t,n,r,i){return t.x=u(e,n.x),t.y=s(e,n.y),t!==n&&(r&&(t.z=n.z),i&&(t.m=n.m)),t}function S(e,t,n,r,i){const o=h(e,n.rings,r,i);return o?(t.rings=o,t):null}function M(e,t,n,r,i){const o=g(e,n.paths,r,i);return o?(t.paths=o,t):null}function T(e,t){return e&&t?(0,r.fT)(t)?b(e,{},t,!1,!1):(0,r.Rg)(t)?M(e,{},t,!1,!1):(0,r.Bi)(t)?S(e,{},t,!1,!1):(0,r.U9)(t)?v(e,{},t,!1,!1):(0,r.ZC)(t)?P(e,{},t,!1,!1):null:null}function L(e,t,n,r,i){return null!=n&&(t.points=w(e,n.points,r,i)),t}function x(e,t,n,r,i){return null==n||(t.x=d(e,n.x),t.y=m(e,n.y),t!==n&&(r&&(t.z=n.z),i&&(t.m=n.m))),t}function A(e,t,n,r,i){return null!=n&&(t.rings=R(e,n.rings,r,i)),t}function B(e,t,n,r,i){return null!=n&&(t.paths=C(e,n.paths,r,i)),t}},39049:function(e,t,n){n.d(t,{A:function(){return R}});n(14603),n(47566),n(98721);var r=n(86039),i=n(47966),o=n(43154),a=n(71120),c=n(3758),u=(n(44114),n(16573),n(78100),n(77936),n(37467),n(44732),n(79577),n(52727)),s=n(15807);async function l(e,t){const n=(0,u.p)(e);if(n instanceof Error)throw n;await n.createImages(),(0,a.Te)(t);const{frames:r,width:i,height:o}=n,c=document.createElement("canvas");c.width=i,c.height=o;const l=c.getContext("2d",{willReadFrequently:!0}),f=[],h=[];for(const a of r){h.push((0,s.l5)(a.delay||100));const e=a.imageElement;0===a.blendOp?l.globalCompositeOperation="copy":l.globalCompositeOperation="source-over";const t=2===a.disposeOp?l.getImageData(a.left,a.top,a.width,a.height):void 0;l.drawImage(e,a.left,a.top);const n=l.getImageData(0,0,i,o);f.push(n),0===a.disposeOp||(1===a.disposeOp?l.clearRect(a.left,a.top,a.width,a.height):2===a.disposeOp&&l.putImageData(t,a.left,a.top))}return{frameDurations:h,getFrame:e=>f[e],width:i,height:o}}const f=[137,80,78,71,13,10,26,10];function h(e){const t=new Uint8Array(e);return!f.some(((e,n)=>e!==t[n]))}function g(e){if(!h(e))return!1;const t=new DataView(e),n=new Uint8Array(e);let r,i=8;do{const e=t.getUint32(i);if(r=String.fromCharCode.apply(String,Array.prototype.slice.call(n.subarray(i+4,i+8))),"acTL"===r)return!0;i+=12+e}while("IEND"!==r&&i<n.length);return!1}var d=n(64507),m=n(46656);async function p(e,t){const n=(0,m.p)(e),r=(0,m.d)(n,!0),{width:i,height:o}=n.lsd,a=document.createElement("canvas");a.width=i,a.height=o;const c=a.getContext("2d",{willReadFrequently:!0}),u=[],l=[];for(const f of r){l.push((0,s.l5)(f.delay||100));const e=new ImageData(f.patch,f.dims.width,f.dims.height),t=(0,d.pR)(e),n=3===f.disposalType?c.getImageData(f.dims.left,f.dims.top,f.dims.width,f.dims.height):void 0;c.drawImage(t,f.dims.left,f.dims.top);const r=c.getImageData(0,0,i,o);u.push(r),1===f.disposalType||(2===f.disposalType?c.clearRect(f.dims.left,f.dims.top,f.dims.width,f.dims.height):3===f.disposalType&&c.putImageData(n,f.dims.left,f.dims.top))}return{frameDurations:l,getFrame:e=>u[e],width:i,height:o}}const y=[71,73,70];function w(e){const t=new Uint8Array(e);return!y.some(((e,n)=>e!==t[n]))}function C(e){if(!w(e))return!1;const t=new DataView(e),n=t.getUint8(10);let r=13+(128&n?3*2**(1+(7&n)):0),i=0,o=!1;for(;!o;){switch(t.getUint8(r++)){case 33:if(!a())return!1;break;case 44:c();break;case 59:o=!0;break;default:return!1}if(i>1)return!0}function a(){switch(t.getUint8(r++)){case 249:u();break;case 1:s();break;case 254:l();break;case 255:f();break;default:return!1}return!0}function c(){i++,r+=8;const e=t.getUint8(r++);r+=128&e?3*2**(1+(7&e)):0,r++,h()}function u(){r++,r+=4,h()}function s(){i++,r++,r+=12,h()}function l(){h()}function f(){r++,r+=8,r+=3,h()}function h(){let e;for(;e=t.getUint8(r++);)r+=e}return!1}class R{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(e){return this._resourceMap.get(e)??null}async fetchResource(e,t){const n=this._resourceMap.get(e);if(n)return{width:n.width,height:n.height};let r=this._inFlightResourceMap.get(e);return r?r.then((e=>({width:e.width,height:e.height}))):(r=v(e,t),this._inFlightResourceMap.set(e,r),r.then((t=>(this._inFlightResourceMap.delete(e),this._resourceMap.set(e,t),{width:t.width,height:t.height})),(()=>({width:0,height:0}))))}deleteResource(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}loadFont(e){return(0,o.Al)(e)}}async function P(e,t){const n=window.URL.createObjectURL(e);try{const{data:e}=await(0,r["default"])(n,{...t,responseType:"image"});return e}catch(f){if(!(0,a.zf)(f))throw new i.A("mapview-invalid-resource",`Could not fetch requested resource at ${n}`);throw f}finally{window.URL.revokeObjectURL(n)}}async function v(e,t){const{arrayBuffer:n,mediaType:r}=await b(e,t),i="image/png"===r;return"image/gif"===r&&C(n)?p(n):i&&g(n)?l(n,t):P(new Blob([n],{type:r}),t)}async function b(e,t){let n;const o=";base64,";if(e.includes(o)){const t=e.indexOf(o),r=e.indexOf(o)+o.length,i=e.substring(r);n={arrayBuffer:(0,c.M)(i),mediaType:e.substring(0,t).replace("data:","")}}else try{const i=await(0,r["default"])(e,{responseType:"array-buffer",...t}),o=i.data;n={arrayBuffer:o,mediaType:i.getHeader("Content-Type")}}catch(u){if(!(0,a.zf)(u))throw new i.A("mapview-invalid-resource",`Could not fetch requested resource at ${e}`)}return n}},55754:function(e,t,n){var r,i,o,a,c,u,s,l,f,h,g,d,m,p,y,w,C,R,P,v,b,S,M,T,L,x,A,B,D,O,F,I,z,_,N,k,E,U,W,G,H,X,Y,q,j,Q,Z,J,$,V,K,ee,te,ne,re,ie,oe,ae,ce,ue,se;n.d(t,{$2:function(){return c},C1:function(){return o},JO:function(){return i},M1:function(){return S},O$:function(){return oe},Q1:function(){return Q},TZ:function(){return w},WE:function(){return B},Y:function(){return s},YI:function(){return J},bj:function(){return l},e_:function(){return j},f0:function(){return ie},fu:function(){return g},g7:function(){return f},ip:function(){return Z},mU:function(){return D},oF:function(){return v},uQ:function(){return b},uT:function(){return k},vG:function(){return ce},wd:function(){return G},xR:function(){return r},xn:function(){return C},xw:function(){return L},yS:function(){return E}}),function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"}(r||(r={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(i||(i={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(o||(o={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(a||(a={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(c||(c={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(u||(u={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(s||(s={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(l||(l={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(f||(f={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(h||(h={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(g||(g={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(d||(d={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(m||(m={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(p||(p={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(y||(y={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(w||(w={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(C||(C={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(R||(R={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(P||(P={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(v||(v={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees"}(b||(b={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(S||(S={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(M||(M={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(T||(T={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(L||(L={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(x||(x={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(A||(A={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(B||(B={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(D||(D={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(O||(O={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(F||(F={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(I||(I={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(z||(z={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(_||(_={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(N||(N={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(k||(k={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(E||(E={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(U||(U={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(W||(W={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(G||(G={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(H||(H={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(X||(X={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(Y||(Y={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(q||(q={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(j||(j={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(Q||(Q={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(Z||(Z={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(J||(J={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}($||($={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(V||(V={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(K||(K={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(ee||(ee={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(te||(te={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(ne||(ne={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(re||(re={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(ie||(ie={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(oe||(oe={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(ae||(ae={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(ce||(ce={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(ue||(ue={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(se||(se={}))},85240:function(e,t,n){n.d(t,{previewCIMSymbol:function(){return D}});var r,i=n(18513),o=n(75423),a=(n(44114),n(16573),n(78100),n(77936),n(37467),n(44732),n(79577),n(37257)),c=n(86039),u=n(79908),s=n(71120),l=n(96381),f=n(39049),h=n(51435),g=n(95551),d=n(48948),m=n(95049),p=n(49290),y=n(37745);!function(e){e.Legend="legend",e.Preview="preview"}(r||(r={}));const w=e=>e&&e.scaleFactor?e.scaleFactor:1,C=96/72;class R{constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._imageDataCanvas=null,this._pictureMarkerCache=new Map,this._textRasterizer=new d.A,this._cimResourceManager=new f.A,this._rasterizer=new g.A(this._cimResourceManager)}get resourceManager(){return this._cimResourceManager}async rasterizeCIMSymbolAsync(e,t,n,r,i,a,c,u){if(!e)return null;const{data:s}=e;if(!s||"CIMSymbolReference"!==s.type||!s.symbol)return null;const{symbol:l}=s;a||(a=(0,m.n5)(l));const f=await o.$N.resolveSymbolOverrides(s,t,this._spatialReference,i,a,c,u);this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));const g=this._imageDataCanvas,d=this._cimResourceManager,p=[];o.wp.fetchResources(f,d,p),o.wp.fetchFonts(f,d,p),p.length>0&&await Promise.all(p);const{width:y,height:w}=n,R=P(a,y,w,r),v=o.wp.getEnvelope(f,R,d);if(!v)return null;const b=(window.devicePixelRatio||1)*C;let S=1,M=0,T=0;switch(l.type){case"CIMPointSymbol":case"CIMTextSymbol":{let e=1;v.width>y&&(e=y/v.width);let t=1;v.height>w&&(t=w/v.height),"preview"===r&&(v.width<y&&(e=y/v.width),v.height<w&&(t=w/v.height)),S=Math.min(e,t),M=v.x+v.width/2,T=v.y+v.height/2}break;case"CIMLineSymbol":{let e=1;v.height>w&&(e=w/v.height),S=e,T=v.y+v.height/2;const t=v.x*S+y/2,n=(v.x+v.width)*S+y/2;if(t<0){const{paths:e}=R;e[0][0][0]-=t}if(n>y){const{paths:e}=R;e[0][2][0]-=n-y}}break;case"CIMPolygonSymbol":{M=v.x+v.width/2,T=v.y+v.height/2;const e=v.x*S+y/2,t=(v.x+v.width)*S+y/2,n=v.y*S+w/2,r=(v.y+v.height)*S+w/2,{rings:i}=R;e<0&&(i[0][0][0]-=e,i[0][3][0]-=e,i[0][4][0]-=e),n<0&&(i[0][0][1]+=n,i[0][1][1]+=n,i[0][4][1]+=n),t>y&&(i[0][1][0]-=t-y,i[0][2][0]-=t-y),r>w&&(i[0][2][1]+=r-w,i[0][3][1]+=r-w)}}g.width=y*b,g.height=w*b;const L=1;g.width+=2*L,g.height+=2*L;const x=g.getContext("2d"),A=h.IT.createIdentity();return A.translate(-M,-T),A.scale(S*b,-S*b),A.translate(y*b/2+L,w*b/2+L),x.clearRect(0,0,g.width,g.height),new h.Rj(x,d,A,!0).drawSymbol(f,R),x.getImageData(0,0,g.width,g.height)}async analyzeCIMSymbol3D(e,t,n,r,i){const a=[],c=t?{geometryType:r,spatialReference:this._spatialReference,fields:t}:null,u=[];o.wp.fetchFonts(e.data.symbol,this._cimResourceManager,u),await Promise.all(u);const f=new l.U(this._cimResourceManager,c);let h;await f.analyzeSymbolReference(e.data,this._avoidSDF,a),(0,s.Te)(i);for(const o of a)"CIMPictureMarker"!==o.cim.type&&"CIMPictureFill"!==o.cim.type&&"CIMPictureStroke"!==o.cim.type||(h||(h=[]),h.push(this._fetchPictureMarkerResource(o,i))),n&&"text"===o.type&&"string"==typeof o.text&&o.text.includes("[")&&(o.text=(0,m.P3)(n,o.text,o.cim.textCase));return h&&await Promise.all(h),a}rasterizeCIMSymbol3D(e,t,n,r,i,o){const a=[];for(const c of e){r&&"function"==typeof r.scaleFactor&&(r.scaleFactor=r.scaleFactor(t,i,o));const e=this._getRasterizedResource(c,t,n,r,i,o);if(!e)continue;let u=0,s=e.anchorX||0,l=e.anchorY||0,f=!1,h=0,g=0;if("esriGeometryPoint"===n){const e=w(r);if(h=(0,m.s4)(c.offsetX,t,i,o)*e||0,g=(0,m.s4)(c.offsetY,t,i,o)*e||0,"marker"===c.type)u=(0,m.s4)(c.rotation,t,i,o)||0,f=c.rotateClockwise??!1;else if("text"===c.type){if(u=(0,m.s4)(c.angle,t,i,o)||0,void 0!==c.horizontalAlignment)switch(c.horizontalAlignment){case"left":s=-.5;break;case"right":s=.5;break;default:s=0}if(void 0!==c.verticalAlignment)switch(c.verticalAlignment){case"top":l=.5;break;case"bottom":l=-.5;break;case"baseline":l=-.25;break;default:l=0}}}null!=e&&a.push({angle:u,rotateClockWise:f,anchorX:s,anchorY:l,offsetX:h,offsetY:g,rasterizedResource:e})}return this.getSymbolImage(a)}getSymbolImage(e){const t=document.createElement("canvas"),n=(0,u.T7)(t.getContext("2d"));let r=0,o=0,a=0,c=0;const s=[];for(let u=0;u<e.length;u++){const t=e[u],l=t.rasterizedResource;if(!l)continue;const f=l.size,h=t.offsetX,g=t.offsetY,d=t.anchorX,m=t.anchorY,p=t.rotateClockWise||!1;let y=t.angle,w=(0,i.Lz)(h)-f[0]*(.5+d),C=(0,i.Lz)(g)-f[1]*(.5+m),R=w+f[0],P=C+f[1];if(y){p&&(y=-y);const e=Math.sin(y*Math.PI/180),t=Math.cos(y*Math.PI/180),n=w*t-C*e,r=w*e+C*t,i=w*t-P*e,o=w*e+P*t,a=R*t-P*e,c=R*e+P*t,u=R*t-C*e,s=R*e+C*t;w=Math.min(n,i,a,u),C=Math.min(r,o,c,s),R=Math.max(n,i,a,u),P=Math.max(r,o,c,s)}r=w<r?w:r,o=C<o?C:o,a=R>a?R:a,c=P>c?P:c;const v=n.createImageData(l.size[0],l.size[1]);v.data.set(new Uint8ClampedArray(l.image.buffer));const b={offsetX:h,offsetY:g,rotateClockwise:p,angle:y,rasterizedImage:v,anchorX:d,anchorY:m};s.push(b)}t.width=a-r,t.height=c-o;const l=-r,f=c;for(let u=0;u<s.length;u++){const e=s[u],t=this._imageDataToCanvas(e.rasterizedImage),r=e.rasterizedImage.width,o=e.rasterizedImage.height,a=l-r*(.5+e.anchorX),c=f-o*(.5-e.anchorY);if(e.angle){const r=(360-e.angle)*Math.PI/180;n.save(),n.translate((0,i.Lz)(e.offsetX),-(0,i.Lz)(e.offsetY)),n.translate(l,f),n.rotate(r),n.translate(-l,-f),n.drawImage(t,a,c),n.restore()}else n.drawImage(t,a+(0,i.Lz)(e.offsetX),c-(0,i.Lz)(e.offsetY))}const h=new y.Q({x:l/t.width-.5,y:f/t.height-.5});return{imageData:0!==t.width&&0!==t.height?n.getImageData(0,0,t.width,t.height):n.createImageData(1,1),anchorPosition:h}}async _fetchPictureMarkerResource(e,t){const n=e.materialHash;if(!this._pictureMarkerCache.get(n)){const r=(await(0,c["default"])(e.cim.url,{responseType:"image",signal:t&&t.signal})).data;this._pictureMarkerCache.set(n,r)}}_imageDataToCanvas(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));const t=this._imageDataCanvas,n=(0,u.T7)(t.getContext("2d"));return t.width=e.width,t.height=e.height,n.putImageData(e,0,0),t}_imageTo32Array(e,t,n,r){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));const i=this._imageDataCanvas,o=(0,u.T7)(i.getContext("2d"));if(i.width=t,i.height=n,o.drawImage(e,0,0,t,n),r){o.save();const i=new a.A(r);o.fillStyle=i.toHex(),o.globalCompositeOperation="multiply",o.fillRect(0,0,t,n),o.globalCompositeOperation="destination-atop",o.drawImage(e,0,0,t,n),o.restore()}return new Uint32Array(o.getImageData(0,0,t,n).data.buffer)}_getRasterizedResource(e,t,n,r,i,o){let a,c,s;const l=null,f=null;if("text"===e.type)return this._rasterizeTextResource(e,t,r,i,o);({analyzedCIM:a,hash:c}=v(e,t,i,o));const h=w(r);if("CIMPictureMarker"===e.cim.type){const n=(0,m.s4)(e.size,t,i,o)*h,{image:r,width:a,height:c}=(0,u.T7)(this._getPictureResource(e,n,(0,m.s4)(e.color,t,i,o)));return s={image:r,size:[a,c],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0},s}(0,p.mR)(a,h,{preserveOutlineWidth:!1});const g=a;c+=n,r&&(c+=JSON.stringify(r));const d=this._resourceCache;return d.has(c)?d.get(c):(s=this._rasterizer.rasterizeJSONResource({cim:g,type:e.type,url:e.url,mosaicHash:c,size:l,path:f},window.devicePixelRatio||1,this._avoidSDF),d.set(c,s),s)}_rasterizeTextResource(e,t,n,r,i){const o=w(n),a=(0,m.s4)(e.text,t,r,i);if(!a||0===a.length)return null;const c=e.cim,u=(0,m.s4)(c?.fontFamilyName||e.fontName,t,r,i),s=(0,m.s4)(c?.font?.style||e.style,t,r,i),l=(0,m.s4)(c?.font?.weight||e.weight,t,r,i),f=(0,m.s4)(c?.font?.decoration||e.decoration,t,r,i),h=(0,m.s4)(e.size,t,r,i)*o,g=(0,m.s4)(e.horizontalAlignment,t,r,i),d=(0,m.s4)(e.verticalAlignment,t,r,i),p=(0,m.G9)((0,m.s4)(e.color,t,r,i)),y=(0,m.G9)((0,m.s4)(e.outlineColor,t,r,i)),C=(0,m.s4)(e.outlineSize,t,r,i),R=null!=e.backgroundColor?(0,m.G9)(e.backgroundColor):null,P=null!=e.borderLineColor?(0,m.G9)(e.borderLineColor):null,v=null!=e.borderLineWidth?e.borderLineWidth:null,b={color:p,size:h,horizontalAlignment:g,verticalAlignment:d,font:{family:u,style:s,weight:l,decoration:f},halo:{size:C||0,color:y,style:s},backgroundColor:R,borderLine:null!=P&&null!=v?{color:P,size:v}:null,pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(a,b)}_getPictureResource(e,t,n){const r=this._pictureMarkerCache.get(e.materialHash);if(!r)return null;const o=r.height/r.width,a=t?o>1?(0,i.Lz)(t):(0,i.Lz)(t)/o:r.width,c=t?o>1?(0,i.Lz)(t)*o:(0,i.Lz)(t):r.height;return{image:this._imageTo32Array(r,a,c,n),width:a,height:c}}}function P(e,t,n,r){const i=1,o=-t/2+i,a=t/2-i,c=n/2-i,u=-n/2+i;switch(e){case"esriGeometryPoint":return{x:0,y:0};case"esriGeometryPolyline":return{paths:[[[o,0],[0,0],[a,0]]]};default:return"legend"===r?{rings:[[[o,c],[a,0],[a,u],[o,u],[o,c]]]}:{rings:[[[o,c],[a,c],[a,u],[o,u],[o,c]]]}}}function v(e,t,n,r){let i,o;return"function"==typeof e.materialHash?(i=(0,e.materialHash)(t,n,r),o=(0,l.G)(e.cim,e.materialOverrides)):(i=e.materialHash,o=e.cim),{analyzedCIM:o,hash:i}}var b=n(53659),S=n(15485);const M=new R(null,!0),T=(0,i.PN)(b.CB.size),L=(0,i.PN)(b.CB.maxSize),x=(0,i.PN)(b.CB.lineWidth),A=1;function B(e){const t=e?.size;return"number"==typeof t?{width:t,height:t}:{width:null!=t&&"object"==typeof t&&"width"in t?t.width:null,height:null!=t&&"object"==typeof t&&"height"in t?t.height:null}}async function D(e,t={}){const{node:n,opacity:a,symbolConfig:c}=t,u=null!=c&&"object"==typeof c&&"isSquareFill"in c&&c.isSquareFill,s=t.cimOptions||t,l=s.geometryType||(0,m.n5)(e?.data?.symbol),f=B(t),{feature:h,fieldMap:g}=s;if(null==f.width||null==f.height){const t=await o.$N.resolveSymbolOverrides(e.data,h,null,g,l);if(!t)return null;(e=e.clone()).data={type:"CIMSymbolReference",symbol:t},e.data.primitiveOverrides=void 0;const n=[];o.wp.fetchResources(t,M.resourceManager,n),o.wp.fetchFonts(t,M.resourceManager,n),n.length>0&&await Promise.all(n);const r=o.wp.getEnvelope(t,null,M.resourceManager),i=r?.width,a=r?.height;f.width="esriGeometryPolygon"===l?T:"esriGeometryPolyline"===l?x:null!=i&&isFinite(i)?Math.min(i,L):T,f.height="esriGeometryPolygon"===l?T:null!=a&&isFinite(a)?Math.max(Math.min(a,L),A):T}const d=await M.rasterizeCIMSymbolAsync(e,h,f,u||"esriGeometryPolygon"!==l?r.Preview:r.Legend,g,l);if(!d)return null;const{width:p,height:y}=d,w=document.createElement("canvas");w.width=p,w.height=y,w.getContext("2d").putImageData(d,0,0);const C=(0,i.Lz)(f.width),R=(0,i.Lz)(f.height),P=new Image(C,R);P.src=w.toDataURL(),P.ariaLabel=t.ariaLabel??null,P.alt=t.ariaLabel??"",null!=a&&(P.style.opacity=`${a}`);let v=P;if(null!=t.effectView){const e={shape:{type:"image",x:0,y:0,width:C,height:R,src:P.src},fill:null,stroke:null,offset:[0,0]};v=(0,S.fz)([[e]],[C,R],{effectView:t.effectView,ariaLabel:t.ariaLabel})}return n&&v&&n.appendChild(v),v}},71945:function(e,t,n){var r,i;function o(e){switch(e){case"left":return r.Left;case"right":return r.Right;case"center":return r.Center}}function a(e){switch(e){case"top":return i.Top;case"middle":return i.Center;case"baseline":return i.Baseline;case"bottom":return i.Bottom}}function c(e){switch(e){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[r.Right,i.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[r.Center,i.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[r.Left,i.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[r.Right,i.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[r.Center,i.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[r.Left,i.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[r.Right,i.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[r.Center,i.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[r.Left,i.Top];default:return console.debug(`Found invalid placement type ${e}`),[r.Center,i.Center]}}function u(e){switch(e){case r.Right:return-1;case r.Center:return 0;case r.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${e}`),0}}function s(e){switch(e){case i.Top:return 1;case i.Center:return 0;case i.Bottom:case i.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${e}`),0}}function l(e){switch(e){case"left":return r.Left;case"right":return r.Right;case"center":return r.Center}}function f(e){switch(e){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}n.d(t,{Dy:function(){return s},UD:function(){return a},fO:function(){return c},gy:function(){return i},iT:function(){return u},nE:function(){return f},oX:function(){return r},p1:function(){return l},xy:function(){return o}}),function(e){e[e.Left=-1]="Left",e[e.Center=0]="Center",e[e.Right=1]="Right"}(r||(r={})),function(e){e[e.Top=1]="Top",e[e.Center=0]="Center",e[e.Bottom=-1]="Bottom",e[e.Baseline=2]="Baseline"}(i||(i={}))},17:function(e,t,n){n.d(t,{Aq:function(){return q},D8:function(){return W},ER:function(){return A},EU:function(){return le},GW:function(){return w},Ge:function(){return E},HX:function(){return C},Ig:function(){return $},Jn:function(){return ne},MB:function(){return V},ML:function(){return I},MO:function(){return re},OZ:function(){return l},Ot:function(){return S},Oz:function(){return R},QK:function(){return p},Qf:function(){return O},R6:function(){return z},R9:function(){return y},Rs:function(){return D},S_:function(){return s},Sy:function(){return se},T4:function(){return Q},Tp:function(){return N},UQ:function(){return T},Vb:function(){return P},Vw:function(){return b},Z:function(){return L},_Q:function(){return J},_p:function(){return te},aQ:function(){return v},ah:function(){return i},b$:function(){return K},bu:function(){return X},c7:function(){return Y},cj:function(){return m},dn:function(){return a},eS:function(){return oe},ev:function(){return f},ft:function(){return u},hx:function(){return B},jG:function(){return ie},k3:function(){return d},k6:function(){return ue},kn:function(){return ce},lE:function(){return j},lt:function(){return g},lx:function(){return ae},mZ:function(){return _},oQ:function(){return Z},of:function(){return k},pK:function(){return F},qd:function(){return c},qj:function(){return h},rr:function(){return H},sg:function(){return M},st:function(){return G},ts:function(){return ee},vl:function(){return U},xL:function(){return o},xd:function(){return x}});var r=n(51020);const i=1e-30,o=4294967295,a=512,c=128,u=511,s=16777216,l=8,f=10,h=29,g=24,d=8,m={metrics:{width:15,height:17,left:0,top:-7,advance:14}},p=0,y=0,w=0,C=1,R=2,P=3,v=4,b=5,S=6,M=12,T=5,L=6,x=5,A=6,B=0,D=1,O=2,F=3,I=4,z=2,_=1,N=2,k=4,E=1.05,U=(0,r.A)("featurelayer-force-marker-text-draw-order")?.5:3,W=5,G=6,H=1.15,X=2,Y=128-2*X,q=8,j=500,Q=10,Z=1024,J=2,$=0,V=1,K=4,ee=8,te=16,ne=4,re=1,ie=4,oe=8,ae=32,ce=64,ue=128,se=4,le=2},45978:function(e,t,n){n.d(t,{M9:function(){return o},Pl:function(){return i},Ss:function(){return a}});n(16573),n(78100),n(77936),n(37467),n(44732),n(79577);const r=new Float32Array(1);new Uint32Array(r.buffer);function i(e){return[255&e,(65280&e)>>>8,(16711680&e)>>>16,(4278190080&e)>>>24]}function o(e,t){return 65535&e|t<<16}function a(e,t,n,r){return 255&e|(255&t)<<8|(255&n)<<16|r<<24}}}]);
//# sourceMappingURL=9446.946ef2fb.js.map