{"version":3,"file":"js/6063.a01aa0e2.js","mappings":"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","sources":["webpack://sun-glare-project/./node_modules/@geoscene/core/rest/query/operations/queryAttachments.js","webpack://sun-glare-project/./node_modules/@geoscene/core/rest/query/support/AttachmentInfo.js","webpack://sun-glare-project/./node_modules/@geoscene/core/layers/support/exifUtils.js"],"sourcesContent":["/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport{addTokenParameter as t}from\"../../../kernel.js\";import o from\"../../../request.js\";import{addProxy as e}from\"../../../core/urlUtils.js\";import{mapParameters as n}from\"../../operations/urlUtils.js\";import r from\"../support/AttachmentInfo.js\";function s(t){const o=t.toJSON();return o.attachmentTypes&&(o.attachmentTypes=o.attachmentTypes.join(\",\")),o.keywords&&(o.keywords=o.keywords.join(\",\")),o.globalIds&&(o.globalIds=o.globalIds.join(\",\")),o.objectIds&&(o.objectIds=o.objectIds.join(\",\")),o.size&&(o.size=o.size.join(\",\")),o}function a(o,n){const s={};for(const a of n){const{parentObjectId:n,parentGlobalId:c,attachmentInfos:m}=a;for(const a of m){const{id:m}=a,p=e(t(`${o.path}/${n}/attachments/${m}`)),i=r.fromJSON(a);i.set({url:p,parentObjectId:n,parentGlobalId:c}),s[n]?s[n].push(i):s[n]=[i]}}return s}function c(t,e,r){let a={query:n({...t.query,f:\"json\",...s(e)})};return r&&(a={...r,...a,query:{...r.query,...a.query}}),o(t.path+\"/queryAttachments\",a).then((t=>t.data.attachmentGroups))}async function m(t,e,n){const{objectIds:r}=e,s=[];for(const a of r)s.push(o(t.path+\"/\"+a+\"/attachments\",n));return Promise.all(s).then((t=>r.map(((o,e)=>({parentObjectId:o,attachmentInfos:t[e].data.attachmentInfos})))))}export{c as executeAttachmentQuery,m as fetchAttachments,a as processAttachmentQueryResult};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{JSONSupport as o}from\"../../../core/JSONSupport.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{Integer as e}from\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{getExifValue as n}from\"../../../layers/support/exifUtils.js\";var s;const p={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let a=s=class extends o{constructor(t){super(t),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:t}=this,o=n({exifName:\"Exif IFD0\",tagName:\"Orientation\",exifInfo:t});return p[o]||null}clone(){return new s({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};t([r({type:String})],a.prototype,\"contentType\",void 0),t([r()],a.prototype,\"exifInfo\",void 0),t([r({readOnly:!0})],a.prototype,\"orientationInfo\",null),t([r({type:e})],a.prototype,\"id\",void 0),t([r({type:String})],a.prototype,\"globalId\",void 0),t([r({type:String})],a.prototype,\"keywords\",void 0),t([r({type:String})],a.prototype,\"name\",void 0),t([r({json:{read:!1}})],a.prototype,\"parentGlobalId\",void 0),t([r({json:{read:!1}})],a.prototype,\"parentObjectId\",void 0),t([r({type:e})],a.prototype,\"size\",void 0),t([r({json:{read:!1}})],a.prototype,\"url\",void 0),a=s=t([i(\"geoscene.layers.support.AttachmentInfo\")],a);const l=a;export{l as default};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nfunction n(n){const{exifInfo:e,exifName:a,tagName:u}=n;if(!e||!a||!u)return null;const f=e.find((n=>n.name===a));return f?t({tagName:u,tags:f.tags}):null}function t(n){const{tagName:t,tags:e}=n;if(!e||!t)return null;const a=e.find((n=>n.name===t));return a&&a.value||null}export{n as getExifValue};"],"names":["s","t","o","toJSON","attachmentTypes","join","keywords","globalIds","objectIds","size","a","n","parentObjectId","parentGlobalId","c","attachmentInfos","m","id","p","e","path","i","r","fromJSON","set","url","push","query","f","then","data","attachmentGroups","async","Promise","all","map","exifInfo","exifName","tagName","u","find","name","tags","value","rotation","mirrored","constructor","super","this","contentType","globalId","orientationInfo","clone","type","String","prototype","readOnly","json","read","l"],"sourceRoot":""}