{"version":3,"file":"js/7312.ca51a373.js","mappings":"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","sources":["webpack://sun-glare-project/./node_modules/@geoscene/core/rest/geometryService/cut.js","webpack://sun-glare-project/./node_modules/@geoscene/core/rest/geometryService/simplify.js","webpack://sun-glare-project/./node_modules/@geoscene/core/geometry/support/normalizeUtils.js","webpack://sun-glare-project/./node_modules/@geoscene/core/geometry/support/normalizeUtilsCommon.js","webpack://sun-glare-project/./node_modules/@geoscene/core/layers/graphics/editingSupport.js"],"sourcesContent":["/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport\"../../geometry.js\";import e from\"../../request.js\";import{getJsonType as t,fromJSON as r}from\"../../geometry/support/jsonUtils.js\";import{parseUrl as s}from\"../utils.js\";async function o(o,i,n,m){const a=s(o),p=i[0].spatialReference,u={...m,query:{...a.query,f:\"json\",sr:JSON.stringify(p),target:JSON.stringify({geometryType:t(i[0]),geometries:i}),cutter:JSON.stringify(n)}},c=await e(a.path+\"/cut\",u),{cutIndexes:f,geometries:g=[]}=c.data;return{cutIndexes:f,geometries:g.map((e=>{const t=r(e);return t.spatialReference=p,t}))}}export{o as cut};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport r from\"../../request.js\";import{urlToObject as t}from\"../../core/urlUtils.js\";import{getJsonType as s}from\"../../geometry/support/jsonUtils.js\";import{encodeGeometries as e,decodeGeometries as i}from\"./utils.js\";async function o(o,m,f){const n=\"string\"==typeof o?t(o):o,p=m[0].spatialReference,a=s(m[0]),u={...f,query:{...n.query,f:\"json\",sr:p.wkid??JSON.stringify(p),geometries:JSON.stringify(e(m))}},{data:y}=await r(n.path+\"/simplify\",u);return i(y.geometries,a,p)}export{o as simplify};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport e from\"../../config.js\";import t from\"../../core/Error.js\";import n from\"../../core/Logger.js\";import o from\"../Polygon.js\";import s from\"../Polyline.js\";import{getGeometryParts as r,cutParams as i,offsetMagnitude as l,updatePolyGeometry as f}from\"./normalizeUtilsCommon.js\";import{getInfo as c}from\"./spatialReferenceUtils.js\";import{geographicToWebMercator as p,webMercatorToGeographic as u}from\"./webMercatorUtils.js\";import{cut as a}from\"../../rest/geometryService/cut.js\";import{simplify as h}from\"../../rest/geometryService/simplify.js\";const m=n.getLogger(\"geoscene.geometry.support.normalizeUtils\");function g(e){return\"polygon\"===e.type}function y(e){return\"polygon\"===e[0].type}function x(e){return\"polyline\"===e[0].type}function d(e){const t=[];let n=0,o=0;for(let s=0;s<e.length;s++){const r=e[s];let i=null;for(let e=0;e<r.length;e++)i=r[e],t.push(i),0===e?(n=i[0],o=n):(n=Math.min(n,i[0]),o=Math.max(o,i[0]));i&&t.push([(n+o)/2,0])}return t}function w(e,n){if(!(e instanceof s||e instanceof o)){const e=\"straightLineDensify: the input geometry is neither polyline nor polygon\";throw m.error(e),new t(e)}const i=r(e),l=[];for(const t of i){const e=[];l.push(e),e.push([t[0][0],t[0][1]]);for(let o=0;o<t.length-1;o++){const s=t[o][0],r=t[o][1],i=t[o+1][0],l=t[o+1][1],f=Math.sqrt((i-s)*(i-s)+(l-r)*(l-r)),c=(l-r)/f,p=(i-s)/f,u=f/n;if(u>1){for(let l=1;l<=u-1;l++){const t=l*n,o=p*t+s,i=c*t+r;e.push([o,i])}const t=(f+Math.floor(u-1)*n)/2,o=p*t+s,i=c*t+r;e.push([o,i])}e.push([i,l])}}return g(e)?new o({rings:l,spatialReference:e.spatialReference}):new s({paths:l,spatialReference:e.spatialReference})}function j(e,t,n){if(t){const t=w(e,1e6);e=u(t,!0)}return n&&(e=f(e,n)),e}function M(e,t,n){if(Array.isArray(e)){const o=e[0];if(o>t){const n=l(o,t);e[0]=o+n*(-2*t)}else if(o<n){const t=l(o,n);e[0]=o+t*(-2*n)}}else{const o=e.x;if(o>t){const n=l(o,t);e=e.clone().offset(n*(-2*t),0)}else if(o<n){const t=l(o,n);e=e.clone().offset(t*(-2*n),0)}}return e}function R(e,t){let n=-1;for(let o=0;o<t.cutIndexes.length;o++){const s=t.cutIndexes[o],i=t.geometries[o],f=r(i);for(let e=0;e<f.length;e++){const t=f[e];t.some((n=>{if(n[0]<180)return!0;{let n=0;for(let e=0;e<t.length;e++){const o=t[e][0];n=o>n?o:n}n=Number(n.toFixed(9));const o=-360*l(n,180);for(let s=0;s<t.length;s++){const t=i.getPoint(e,s);i.setPoint(e,s,t.clone().offset(o,0))}return!0}}))}if(s===n){if(y(e))for(const t of r(i))e[s]=e[s].addRing(t);else if(x(e))for(const t of r(i))e[s]=e[s].addPath(t)}else n=s,e[s]=i}return e}async function b(t,n,r){if(!Array.isArray(t))return b([t],n);n&&\"string\"!=typeof n&&m.warn(\"normalizeCentralMeridian()\",\"The url object is deprecated, use the url string instead\");const u=\"string\"==typeof n?n:n?.url??e.geometryServiceUrl;let g,y,x,d,w,P,v,L,U=0;const z=[],A=[];for(const e of t)if(null!=e)if(g||(g=e.spatialReference,y=c(g),x=g.isWebMercator,P=x?102100:4326,d=i[P].maxX,w=i[P].minX,v=i[P].plus180Line,L=i[P].minus180Line),y)if(\"mesh\"===e.type)A.push(e);else if(\"point\"===e.type)A.push(M(e.clone(),d,w));else if(\"multipoint\"===e.type){const t=e.clone();t.points=t.points.map((e=>M(e,d,w))),A.push(t)}else if(\"extent\"===e.type){const t=e.clone()._normalize(!1,!1,y);A.push(t.rings?new o(t):t)}else if(e.extent){const t=e.extent,n=l(t.xmin,w)*(2*d);let o=0===n?e.clone():f(e.clone(),n);t.offset(n,0),t.intersects(v)&&t.xmax!==d?(U=t.xmax>U?t.xmax:U,o=j(o,x),z.push(o),A.push(\"cut\")):t.intersects(L)&&t.xmin!==w?(U=t.xmax*(2*d)>U?t.xmax*(2*d):U,o=j(o,x,360),z.push(o),A.push(\"cut\")):A.push(o)}else A.push(e.clone());else A.push(e);else A.push(e);let S=l(U,d),k=-90;const C=S,I=new s;for(;S>0;){const e=360*S-180;I.addPath([[e,k],[e,-1*k]]),k*=-1,S--}if(z.length>0&&C>0){const e=R(z,await a(u,z,I,r)),n=[],o=[];for(let r=0;r<A.length;r++){const s=A[r];if(\"cut\"!==s)o.push(s);else{const s=e.shift(),i=t[r];null!=i&&\"polygon\"===i.type&&i.rings&&i.rings.length>1&&s.rings.length>=i.rings.length?(n.push(s),o.push(\"simplify\")):o.push(x?p(s):s)}}if(!n.length)return o;const s=await h(u,n,r),i=[];for(let t=0;t<o.length;t++){const e=o[t];\"simplify\"!==e?i.push(e):i.push(x?p(s.shift()):s.shift())}return i}const X=[];for(let e=0;e<A.length;e++){const t=A[e];if(\"cut\"!==t)X.push(t);else{const e=z.shift();X.push(!0===x?p(e):e)}}return X}function P(e){if(!e)return null;const t=e.extent;if(!t)return null;const n=e.spatialReference&&c(e.spatialReference);if(!n)return t;const[o,s]=n.valid,r=2*s,{width:i}=t;let l,{xmin:f,xmax:p}=t;if([f,p]=[p,f],\"extent\"===e.type||0===i||i<=s||i>r||f<o||p>s)return t;switch(e.type){case\"polygon\":if(!(e.rings.length>1))return t;l=d(e.rings);break;case\"polyline\":if(!(e.paths.length>1))return t;l=d(e.paths);break;case\"multipoint\":l=e.points}const u=t.clone();for(let c=0;c<l.length;c++){let e=l[c][0];e<0?(e+=s,p=Math.max(e,p)):(e-=s,f=Math.min(e,f))}return u.xmin=f,u.xmax=p,u.width<i?(u.xmin-=s,u.xmax-=s,u):t}function v(e,t){const n=c(t);if(n){const[t,o]=n.valid,s=o-t;if(e<t)for(;e<t;)e+=s;if(e>o)for(;e>o;)e-=s}return e}export{P as getDenormalizedExtent,b as normalizeCentralMeridian,v as normalizeMapX,w as straightLineDensify};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport e from\"../Polyline.js\";import n from\"../SpatialReference.js\";import{isPolygon as t}from\"./jsonUtils.js\";const r={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new e({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:n.WebMercator}),minus180Line:new e({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:n.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new e({paths:[[[180,-180],[180,180]]],spatialReference:n.WGS84}),minus180Line:new e({paths:[[[-180,-180],[-180,180]]],spatialReference:n.WGS84})}};function i(e,n){return Math.ceil((e-n)/(2*n))}function s(e,n){const t=o(e);for(const r of t)for(const e of r)e[0]+=n;return e}function o(e){return t(e)?e.rings:e.paths}export{r as cutParams,o as getGeometryParts,i as offsetMagnitude,s as updatePolyGeometry};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport e from\"../../Graphic.js\";import t from\"../../core/Collection.js\";import a from\"../../core/Error.js\";import{clone as r}from\"../../core/lang.js\";import s from\"../../core/Logger.js\";import{createResolver as o}from\"../../core/promiseUtils.js\";import{dataComponents as i}from\"../../core/urlUtils.js\";import{normalizeCentralMeridian as n}from\"../../geometry/support/normalizeUtils.js\";import{isEditBusLayer as d,emitApplyEditsEvent as l}from\"../mixins/EditBusLayer.js\";import{getMimeTypeFormatId as u,getFilenameFormatId as p}from\"../support/infoFor3D.js\";import{getEffectiveEditingEnabled as c,getEffectiveLayerCapabilities as h}from\"../support/layerUtils.js\";function m(e){return e&&null!=e.applyEdits}function y(e){return\"object\"==typeof e&&null!=e&&\"objectId\"in e&&!!e.objectId}function f(e){return e.every(y)}function g(e){return\"object\"==typeof e&&null!=e&&\"globalId\"in e&&!!e.globalId}function b(e){return e.every(g)}async function F(e,t,a,s={}){let i;if(d(e)&&e.url)i=l(e.url,e.layerId,\"original-and-current-features\"===s.returnServiceEditsOption);else{i=o(),i.promise.then((t=>{(t.addedFeatures.length||t.updatedFeatures.length||t.deletedFeatures.length||t.addedAttachments.length||t.updatedAttachments.length||t.deletedAttachments.length)&&e.emit(\"edits\",t)}));const t={result:i.promise};e.emit(\"apply-edits\",t)}try{const{results:o,edits:n}=await w(e,t,a,s),d=e=>e.filter((e=>!e.error)).map(r),l={edits:n,addedFeatures:d(o.addFeatureResults),updatedFeatures:d(o.updateFeatureResults),deletedFeatures:d(o.deleteFeatureResults),addedAttachments:d(o.addAttachmentResults),updatedAttachments:d(o.updateAttachmentResults),deletedAttachments:d(o.deleteAttachmentResults),exceededTransferLimit:!1};return o.editedFeatureResults?.length&&(l.editedFeatures=o.editedFeatureResults),i.resolve(l),o}catch(n){throw i.reject(n),n}}async function w(e,t,r,s){if(await e.load(),!m(t))throw new a(`${e.type}-layer:no-editing-support`,\"Layer source does not support applyEdits capability\",{layer:e});if(!c(e))throw new a(`${e.type}-layer:editing-disabled`,\"Editing is disabled for layer\",{layer:e});const{edits:o,options:i}=await A(e,r,s);return o.addFeatures?.length||o.updateFeatures?.length||o.deleteFeatures?.length||o.addAttachments?.length||o.updateAttachments?.length||o.deleteAttachments?.length?{edits:o,results:await t.applyEdits(o,i)}:{edits:o,results:{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}}async function A(e,r,o){const i=r&&(r.addFeatures||r.updateFeatures||r.deleteFeatures),n=r&&(r.addAttachments||r.updateAttachments||r.deleteAttachments),d=null!=e.infoFor3D;if(!r||!i&&!n)throw new a(`${e.type}-layer:missing-parameters`,\"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required\");const l=h(e);if(!l.data.isVersioned&&o?.gdbVersion)throw new a(`${e.type}-layer:invalid-parameter`,\"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'\");if(!l.editing.supportsRollbackOnFailure&&o?.rollbackOnFailureEnabled)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'\");if(!l.editing.supportsGlobalId&&o?.globalIdUsed)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'\");if(!l.editing.supportsGlobalId&&n)throw new a(`${e.type}-layer:invalid-parameter`,\"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'\");if(!o?.globalIdUsed&&n)throw new a(`${e.type}-layer:invalid-parameter`,\"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true\");const u={...o};if(null!=u.rollbackOnFailureEnabled||l.editing.supportsRollbackOnFailure||(u.rollbackOnFailureEnabled=!0),u.rollbackOnFailureEnabled||\"original-and-current-features\"!==u.returnServiceEditsOption||(!1===u.rollbackOnFailureEnabled&&s.getLogger(\"geoscene.layers.graphics.editingSupport\").warn(`${e.type}-layer:invalid-parameter`,\"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true, but 'rollBackOnFailure' was set to false. 'rollBackOnFailure' has been overwrritten and set to true.\"),u.rollbackOnFailureEnabled=!0),!l.editing.supportsReturnServiceEditsInSourceSpatialReference&&u.returnServiceEditsInSourceSR)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'\");if(u.returnServiceEditsInSourceSR&&\"original-and-current-features\"!==u.returnServiceEditsOption)throw new a(`${e.type}-layer:invalid-parameter`,\"'returnServiceEditsInSourceSR' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'\");const p={...r};if(p.addFeatures=r&&t.isCollection(r.addFeatures)?r.addFeatures.toArray():p.addFeatures||[],p.updateFeatures=r&&t.isCollection(r.updateFeatures)?r.updateFeatures.toArray():p.updateFeatures||[],p.deleteFeatures=r&&t.isCollection(r.deleteFeatures)?r.deleteFeatures.toArray():p.deleteFeatures||[],p.addFeatures.length&&!l.operations.supportsAdd)throw new a(`${e.type}-layer:unsupported-operation`,\"Layer does not support adding features.\");if(p.updateFeatures.length&&!l.operations.supportsUpdate)throw new a(`${e.type}-layer:unsupported-operation`,\"Layer does not support updating features.\");if(p.deleteFeatures.length&&!l.operations.supportsDelete)throw new a(`${e.type}-layer:unsupported-operation`,\"Layer does not support deleting features.\");p.addAttachments=p.addAttachments||[],p.updateAttachments=p.updateAttachments||[],p.deleteAttachments=p.deleteAttachments||[],p.addFeatures=p.addFeatures.map(j),p.updateFeatures=p.updateFeatures.map(j),p.addAssetFeatures=[];const c=o?.globalIdUsed||d;p.addFeatures.forEach((t=>E(t,e,c))),p.updateFeatures.forEach((t=>$(t,e,c))),p.deleteFeatures.forEach((t=>S(t,e,c))),p.addAttachments.forEach((t=>R(t,e))),p.updateAttachments.forEach((t=>R(t,e))),d&&await U(p,e);return{edits:await O(p),options:u}}function v(e,t,r){if(r){if(\"attributes\"in e&&!e.attributes[t.globalIdField])throw new a(`${t.type}-layer:invalid-parameter`,\"Feature should have 'globalId' when 'globalIdUsed' is true\");if(!(\"attributes\"in e)&&!e.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"'globalId' of the feature should be passed when 'globalIdUsed' is true\")}if(\"geometry\"in e&&null!=e.geometry){if(e.geometry.hasZ&&!1===t.capabilities?.data.supportsZ)throw new a(`${t.type}-layer:z-unsupported`,\"Layer does not support z values while feature has z values.\");if(e.geometry.hasM&&!1===t.capabilities?.data.supportsM)throw new a(`${t.type}-layer:m-unsupported`,\"Layer does not support m values while feature has m values.\")}}function I(e,t){if(\"geometry\"in e&&\"mesh\"===e.geometry?.type){const{geometry:r}=e;if(r.vertexSpace.isGeoreferenced)throw new a(`${t.type}-layer:georeferenced-mesh-unsupported`,\"Uploading georeferenced meshes to a layer is not supported.\")}}function E(e,t,a){v(e,t,a),I(e,t)}function S(e,t,a){v(e,t,a)}function $(e,t,r){v(e,t,r),I(e,t);const s=h(t);if(\"geometry\"in e&&null!=e.geometry&&!s?.editing.supportsGeometryUpdate)throw new a(`${t.type}-layer:unsupported-operation`,\"Layer does not support geometry updates.\")}function R(e,t){const{feature:r,attachment:s}=e;if(!r||\"attributes\"in r&&!r.attributes[t.globalIdField])throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have reference to a feature with 'globalId'\");if(!(\"attributes\"in r)&&!r.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have reference to 'globalId' of the parent feature\");if(!s.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have 'globalId'\");if(!s.data&&!s.uploadId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have 'data' or 'uploadId'\");if(!(s.data instanceof File&&!!s.data.name)&&!s.name)throw new a(`${t.type}-layer:invalid-parameter`,\"'name' is required when attachment is specified as Base64 encoded string using 'data'\");if(!t.capabilities?.editing.supportsUploadWithItemId&&s.uploadId)throw new a(`${t.type}-layer:invalid-parameter`,\"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'\");if(\"string\"==typeof s.data){const e=i(s.data);if(e&&!e.isBase64)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment 'data' should be a Blob, File or Base64 encoded string\")}}async function O(e){const t=e.addFeatures??[],a=e.updateFeatures??[],r=t.concat(a).map((e=>e.geometry)),s=await n(r),o=t.length,i=a.length;return s.slice(0,o).forEach(((e,a)=>t[a].geometry=e)),s.slice(o,o+i).forEach(((e,t)=>a[t].geometry=e)),e}function j(t){const a=new e;return t.attributes||(t.attributes={}),a.geometry=t.geometry,a.attributes=t.attributes,a}async function U(e,t){if(null==t.infoFor3D)return;const{infoFor3D:r}=t,s=u(\"model/gltf-binary\",r.supportedFormats)??p(\"glb\",r.supportedFormats);if(!(!!s&&r.editFormats.includes(s)))throw new a(`${t.type}-layer:binary-gltf-asset-not-supported`,\"3DObjectFeatureLayer requires binary glTF (.glb) support for updating mesh geometry.\");e.addAssetFeatures??=[];const{addAssetFeatures:o}=e;for(const a of e.addFeatures??[])L(a)&&o.push(a);for(const a of e.updateFeatures??[])L(a)&&o.push(a)}function L(e){return\"mesh\"===e?.geometry?.type}function k(e,t,r,s){if(!m(t))throw new a(`${e.type}-layer:no-editing-support`,\"Layer source does not support applyEdits capability\",{layer:e});if(!t.uploadAssets)throw new a(`${e.type}-layer:no-asset-upload-support`,\"Layer source does not support uploadAssets capability\",{layer:e});return t.uploadAssets(r,s)}export{F as applyEdits,b as isFeatureIdentifierArrayWithGlobalId,f as isFeatureIdentifierArrayWithObjectId,g as isFeatureIdentifierWithGlobalId,y as isFeatureIdentifierWithObjectId,k as uploadAssets};"],"names":["async","o","i","n","m","a","s","p","spatialReference","u","query","f","sr","JSON","stringify","target","geometryType","t","geometries","cutter","c","e","path","cutIndexes","g","data","map","r","wkid","y","getLogger","type","x","w","error","l","push","length","Math","sqrt","floor","rings","paths","j","M","Array","isArray","clone","offset","R","some","Number","toFixed","getPoint","setPoint","addRing","addPath","b","warn","url","geometryServiceUrl","d","P","v","L","U","z","A","isWebMercator","maxX","minX","plus180Line","minus180Line","points","_normalize","extent","xmin","intersects","xmax","S","k","C","I","shift","h","X","valid","WebMercator","WGS84","ceil","applyEdits","objectId","every","globalId","F","layerId","returnServiceEditsOption","promise","then","addedFeatures","updatedFeatures","deletedFeatures","addedAttachments","updatedAttachments","deletedAttachments","emit","result","results","edits","filter","addFeatureResults","updateFeatureResults","deleteFeatureResults","addAttachmentResults","updateAttachmentResults","deleteAttachmentResults","exceededTransferLimit","editedFeatureResults","editedFeatures","resolve","reject","load","layer","options","addFeatures","updateFeatures","deleteFeatures","addAttachments","updateAttachments","deleteAttachments","infoFor3D","isVersioned","gdbVersion","editing","supportsRollbackOnFailure","rollbackOnFailureEnabled","supportsGlobalId","globalIdUsed","supportsReturnServiceEditsInSourceSpatialReference","returnServiceEditsInSourceSR","isCollection","toArray","operations","supportsAdd","supportsUpdate","supportsDelete","addAssetFeatures","forEach","E","$","O","attributes","globalIdField","geometry","hasZ","capabilities","supportsZ","hasM","supportsM","vertexSpace","isGeoreferenced","supportsGeometryUpdate","feature","attachment","uploadId","File","name","supportsUploadWithItemId","isBase64","concat","slice","supportedFormats","editFormats","includes","uploadAssets"],"sourceRoot":""}