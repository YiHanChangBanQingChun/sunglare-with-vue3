"use strict";(self["webpackChunksun_glare_project"]=self["webpackChunksun_glare_project"]||[]).push([[5113],{89226:function(e,t,n){n.d(t,{$:function(){return I},N2:function(){return S},RH:function(){return x},ZD:function(){return P}});n(44114);function r(e){return"r"in e&&"g"in e&&"b"in e}function o(e){return"h"in e&&"s"in e&&"v"in e}function i(e){return"l"in e&&"a"in e&&"b"in e}function c(e){return"l"in e&&"c"in e&&"h"in e}function s(e){return"x"in e&&"y"in e&&"z"in e}const a=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],l=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function u(e,t){const n=[];let r,o;if(e[0].length!==t.length)throw new Error("dimensions do not match");const i=e.length,c=e[0].length;let s=0;for(r=0;r<i;r++){for(s=0,o=0;o<c;o++)s+=e[r][o]*t[o];n.push(s)}return n}function f(e){const t=[e.r/255,e.g/255,e.b/255].map((e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4)),n=u(a,t);return{x:100*n[0],y:100*n[1],z:100*n[2]}}function h(e){const t=u(l,[e.x/100,e.y/100,e.z/100]).map((e=>{const t=e<=.0031308?12.92*e:1.055*e**(1/2.4)-.055;return Math.min(1,Math.max(t,0))}));return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function m(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map((e=>e>(6/29)**3?e**(1/3):1/3*(29/6)**2*e+4/29));return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function p(e){const t=e.l,n=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map((e=>e>6/29?e**3:3*(6/29)**2*(e-4/29)));return{x:95.047*n[0],y:100*n[1],z:108.883*n[2]}}function y(e){const t=e.l,n=e.a,r=e.b,o=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i=i>0?i:i+2*Math.PI,{l:t,c:o,h:i}}function d(e){const t=e.l,n=e.c,r=e.h;return{l:t,a:n*Math.cos(r),b:n*Math.sin(r)}}function b(e){return m(f(e))}function g(e){return h(p(e))}function M(e){return y(m(f(e)))}function k(e){return h(p(d(e)))}function C(e){const t=e.r,n=e.g,r=e.b,o=Math.max(t,n,r),i=o-Math.min(t,n,r);let c=o,s=0===i?0:o===t?(n-r)/i%6:o===n?(r-t)/i+2:(t-n)/i+4,a=0===i?0:i/c;return s<0&&(s+=6),s*=60,a*=100,c*=100/255,{h:s,s:a,v:c}}function w(e){const t=(e.h+360)%360/60,n=e.s/100,r=e.v/100*255,o=r*n,i=o*(1-Math.abs(t%2-1));let c;switch(Math.floor(t)){case 0:c={r:o,g:i,b:0};break;case 1:c={r:i,g:o,b:0};break;case 2:c={r:0,g:o,b:i};break;case 3:c={r:0,g:i,b:o};break;case 4:c={r:i,g:0,b:o};break;case 5:case 6:c={r:o,g:0,b:i};break;default:c={r:0,g:0,b:0}}return c.r=Math.round(c.r+r-o),c.g=Math.round(c.g+r-o),c.b=Math.round(c.b+r-o),c}function I(e){return r(e)?e:c(e)?k(e):i(e)?g(e):s(e)?h(e):o(e)?w(e):e}function S(e){return o(e)?e:C(I(e))}function P(e){return i(e)?e:b(I(e))}function x(e){return c(e)?e:M(I(e))}},42638:function(e,t,n){n.d(t,{el:function(){return x},mT:function(){return L},XX:function(){return w}});n(44114);var r=n(19470),o=n(47966),i=n(15114),c=n(9737),s=n(68491),a=n(43166),l=n(72465),u=n(30075),f=(n(2516),n(86039)),h=n(55772),m=n(42116);async function p(e,t,n,r){const o=(0,m.Dl)(e),i=t[0].spatialReference,c={...r,query:{...o.query,f:"json",sr:JSON.stringify(i),target:JSON.stringify({geometryType:(0,h.$B)(t[0]),geometries:t}),cutter:JSON.stringify(n)}},s=await(0,f["default"])(o.path+"/cut",c),{cutIndexes:a,geometries:l=[]}=s.data;return{cutIndexes:a,geometries:l.map((e=>{const t=(0,h.rS)(e);return t.spatialReference=i,t}))}}var y=n(4244),d=n(63504);async function b(e,t,n){const r="string"==typeof e?(0,y.An)(e):e,o=t[0].spatialReference,i=(0,h.$B)(t[0]),c={...n,query:{...r.query,f:"json",sr:o.wkid??JSON.stringify(o),geometries:JSON.stringify((0,d.X)(t))}},{data:s}=await(0,f["default"])(r.path+"/simplify",c);return(0,d.V)(s.geometries,i,o)}const g=i.A.getLogger("geoscene.geometry.support.normalizeUtils");function M(e){return"polygon"===e.type}function k(e){return"polygon"===e[0].type}function C(e){return"polyline"===e[0].type}function w(e,t){if(!(e instanceof s.A||e instanceof c.A)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw g.error(e),new o.A(e)}const n=(0,a.r8)(e),r=[];for(const o of n){const e=[];r.push(e),e.push([o[0][0],o[0][1]]);for(let n=0;n<o.length-1;n++){const r=o[n][0],i=o[n][1],c=o[n+1][0],s=o[n+1][1],a=Math.sqrt((c-r)*(c-r)+(s-i)*(s-i)),l=(s-i)/a,u=(c-r)/a,f=a/t;if(f>1){for(let s=1;s<=f-1;s++){const n=s*t,o=u*n+r,c=l*n+i;e.push([o,c])}const n=(a+Math.floor(f-1)*t)/2,o=u*n+r,c=l*n+i;e.push([o,c])}e.push([c,s])}}return M(e)?new c.A({rings:r,spatialReference:e.spatialReference}):new s.A({paths:r,spatialReference:e.spatialReference})}function I(e,t,n){if(t){const t=w(e,1e6);e=(0,u.ci)(t,!0)}return n&&(e=(0,a.kS)(e,n)),e}function S(e,t,n){if(Array.isArray(e)){const r=e[0];if(r>t){const n=(0,a.kd)(r,t);e[0]=r+n*(-2*t)}else if(r<n){const t=(0,a.kd)(r,n);e[0]=r+t*(-2*n)}}else{const r=e.x;if(r>t){const n=(0,a.kd)(r,t);e=e.clone().offset(n*(-2*t),0)}else if(r<n){const t=(0,a.kd)(r,n);e=e.clone().offset(t*(-2*n),0)}}return e}function P(e,t){let n=-1;for(let r=0;r<t.cutIndexes.length;r++){const o=t.cutIndexes[r],i=t.geometries[r],c=(0,a.r8)(i);for(let e=0;e<c.length;e++){const t=c[e];t.some((n=>{if(n[0]<180)return!0;{let n=0;for(let e=0;e<t.length;e++){const r=t[e][0];n=r>n?r:n}n=Number(n.toFixed(9));const r=-360*(0,a.kd)(n,180);for(let o=0;o<t.length;o++){const t=i.getPoint(e,o);i.setPoint(e,o,t.clone().offset(r,0))}return!0}}))}if(o===n){if(k(e))for(const t of(0,a.r8)(i))e[o]=e[o].addRing(t);else if(C(e))for(const t of(0,a.r8)(i))e[o]=e[o].addPath(t)}else n=o,e[o]=i}return e}async function x(e,t,n){if(!Array.isArray(e))return x([e],t);t&&"string"!=typeof t&&g.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const o="string"==typeof t?t:t?.url??r.A.geometryServiceUrl;let i,f,h,m,y,d,M,k,C=0;const w=[],L=[];for(const r of e)if(null!=r)if(i||(i=r.spatialReference,f=(0,l.Vp)(i),h=i.isWebMercator,d=h?102100:4326,m=a.j7[d].maxX,y=a.j7[d].minX,M=a.j7[d].plus180Line,k=a.j7[d].minus180Line),f)if("mesh"===r.type)L.push(r);else if("point"===r.type)L.push(S(r.clone(),m,y));else if("multipoint"===r.type){const e=r.clone();e.points=e.points.map((e=>S(e,m,y))),L.push(e)}else if("extent"===r.type){const e=r.clone()._normalize(!1,!1,f);L.push(e.rings?new c.A(e):e)}else if(r.extent){const e=r.extent,t=(0,a.kd)(e.xmin,y)*(2*m);let n=0===t?r.clone():(0,a.kS)(r.clone(),t);e.offset(t,0),e.intersects(M)&&e.xmax!==m?(C=e.xmax>C?e.xmax:C,n=I(n,h),w.push(n),L.push("cut")):e.intersects(k)&&e.xmin!==y?(C=e.xmax*(2*m)>C?e.xmax*(2*m):C,n=I(n,h,360),w.push(n),L.push("cut")):L.push(n)}else L.push(r.clone());else L.push(r);else L.push(r);let A=(0,a.kd)(C,m),z=-90;const G=A,O=new s.A;for(;A>0;){const e=360*A-180;O.addPath([[e,z],[e,-1*z]]),z*=-1,A--}if(w.length>0&&G>0){const t=P(w,await p(o,w,O,n)),r=[],i=[];for(let n=0;n<L.length;n++){const o=L[n];if("cut"!==o)i.push(o);else{const o=t.shift(),c=e[n];null!=c&&"polygon"===c.type&&c.rings&&c.rings.length>1&&o.rings.length>=c.rings.length?(r.push(o),i.push("simplify")):i.push(h?(0,u.Gh)(o):o)}}if(!r.length)return i;const c=await b(o,r,n),s=[];for(let e=0;e<i.length;e++){const t=i[e];"simplify"!==t?s.push(t):s.push(h?(0,u.Gh)(c.shift()):c.shift())}return s}const E=[];for(let r=0;r<L.length;r++){const e=L[r];if("cut"!==e)E.push(e);else{const e=w.shift();E.push(!0===h?(0,u.Gh)(e):e)}}return E}function L(e,t){const n=(0,l.Vp)(t);if(n){const[t,r]=n.valid,o=r-t;if(e<t)for(;e<t;)e+=o;if(e>r)for(;e>r;)e-=o}return e}},43166:function(e,t,n){n.d(t,{j7:function(){return c},kS:function(){return a},kd:function(){return s},r8:function(){return l}});var r=n(68491),o=n(12790),i=n(55772);const c={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new r.A({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:o.A.WebMercator}),minus180Line:new r.A({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:o.A.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new r.A({paths:[[[180,-180],[180,180]]],spatialReference:o.A.WGS84}),minus180Line:new r.A({paths:[[[-180,-180],[-180,180]]],spatialReference:o.A.WGS84})}};function s(e,t){return Math.ceil((e-t)/(2*t))}function a(e,t){const n=l(e);for(const r of n)for(const e of r)e[0]+=t;return e}function l(e){return(0,i.Bi)(e)?e.rings:e.paths}},95049:function(e,t,n){n.d(t,{Bu:function(){return z},DW:function(){return P},FM:function(){return l},G9:function(){return i},Go:function(){return h},Kn:function(){return I},MM:function(){return y},Nl:function(){return G},Ny:function(){return M},O2:function(){return O},P3:function(){return u},UE:function(){return E},ZT:function(){return m},_1:function(){return L},_H:function(){return C},_W:function(){return g},_d:function(){return S},gQ:function(){return a},lO:function(){return f},lW:function(){return p},mA:function(){return d},n5:function(){return T},pM:function(){return x},pV:function(){return w},qJ:function(){return r},s4:function(){return o},xo:function(){return A},yH:function(){return k},zr:function(){return b}});n(44114);function r(e){return"function"==typeof e}function o(e,t,n,o){return r(e)?e(t,n,o):e}function i(e){return[e.r,e.g,e.b,e.a]}const c=" /-,\n";function s(e){let t=e.length;for(;t--;)if(!c.includes(e.charAt(t)))return!1;return!0}function a(e,t){const n=[];let r=0,o=-1;do{if(o=e.indexOf("[",r),o>=r){if(o>r){const t=e.substr(r,o-r);n.push([t,null,s(t)])}if(r=o+1,o=e.indexOf("]",r),o>=r){if(o>r){const i=t[e.substr(r,o-r)];i&&n.push([null,i,!1])}r=o+1}}}while(-1!==o);if(r<e.length-1){const t=e.substr(r);n.push([t,null,s(t)])}return n}function l(e,t,n){let r="",o=null;for(const i of t){const[t,n,c]=i;if(t)c?o=t:(o&&(r+=o,o=null),r+=t);else{const t=e.attributes[n];t&&(o&&(r+=o,o=null),r+=t)}}return f(r,n)}function u(e,t,n){const r=a(t,e);return e=>l(e,r,n)}function f(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function h(e,t,n,r,o,i,c=!0){const s=t/o,a=n/i,l=Math.ceil(s/2),u=Math.ceil(a/2);for(let f=0;f<i;f++)for(let n=0;n<o;n++){const h=4*(n+(c?i-f-1:f)*o);let m=0,p=0,y=0,d=0,b=0,g=0,M=0;const k=(f+.5)*a;for(let r=Math.floor(f*a);r<(f+1)*a;r++){const o=Math.abs(k-(r+.5))/u,i=(n+.5)*s,c=o*o;for(let a=Math.floor(n*s);a<(n+1)*s;a++){let n=Math.abs(i-(a+.5))/l;const o=Math.sqrt(c+n*n);o>=-1&&o<=1&&(m=2*o*o*o-3*o*o+1,m>0&&(n=4*(a+r*t),M+=m*e[n+3],y+=m,e[n+3]<255&&(m=m*e[n+3]/250),d+=m*e[n],b+=m*e[n+1],g+=m*e[n+2],p+=m))}}r[h]=d/p,r[h+1]=b/p,r[h+2]=g/p,r[h+3]=M/y}}function m(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function p(e){return e.data?.symbol??null}function y(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function d(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function b(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const g=(e,t=0)=>null==e||isNaN(e)?t:e,M=e=>e.tintColor?m(e.tintColor):{r:255,g:255,b:255,a:1},k=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function C(){return Promise.all([n.e(8574),n.e(1056)]).then(n.bind(n,68675))}function w(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function I(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function S(e){let t="normal",n="normal";if(e){const r=e.toLowerCase();r.includes("italic")?t="italic":r.includes("oblique")&&(t="oblique"),r.includes("bold")?n="bold":r.includes("light")&&(n="lighter")}return{style:t,weight:n}}function P(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function x(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=x(t);if(null!=e)return e}break;case"CIMTextSymbol":return x(e.symbol);case"CIMSolidFill":return e.color}}function L(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=L(e);if(null!=t)return t}break}case"CIMTextSymbol":return L(e.symbol);case"CIMSolidStroke":return e.color}}function A(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=A(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return A(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function z(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function G(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function O(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const E=e=>e.includes("data:image/svg+xml");function T(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}},49290:function(e,t,n){n.d(t,{Nk:function(){return l},mR:function(){return c}});n(44114);var r=n(37257),o=n(95049);function i(e,t,n,r){if(e)if("CIMTextSymbol"!==e.type){if(n&&e.effects)for(const n of e.effects)a(n,t);if(e.symbolLayers)for(const n of e.symbolLayers)switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":c(n,t,r);break;case"CIMPictureStroke":case"CIMSolidStroke":!r?.preserveOutlineWidth&&n.width&&(n.width*=t);break;case"CIMPictureFill":n.height&&(n.height*=t),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t);break;case"CIMHatchFill":i(n.lineSymbol,t,!0,{...r,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t),n.separation&&(n.separation*=t)}}else null!=e.height&&(e.height*=t)}function c(e,t,n){if(e&&(e.markerPlacement&&s(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=null!=e.size?e.size*t:0,"CIMVectorMarker"===e.type&&e.markerGraphics))for(const r of e.markerGraphics)e.scaleSymbolsProportionally||i(r.symbol,t,!0,n)}function s(e,t){switch((0,o.zr)(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}function a(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const n=e.dashTemplate.map((e=>e*t));e.dashTemplate=n}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function l(e){const t=[];return u((0,o.lW)(e),t),t.length?new r.A((0,o.ZT)(t[0])):null}function u(e,t){if(!e)return;let n;n="CIMTextSymbol"===e.type?e.symbol:e;const r="CIMPolygonSymbol"===e.type;if(n?.symbolLayers)for(const i of n.symbolLayers)if(!(i.colorLocked||r&&((0,o.mA)(i)||(0,o.MM)(i)&&i.markerPlacement&&(0,o.zr)(i.markerPlacement))))switch(i.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":i.tintColor&&f(t,i.tintColor);break;case"CIMVectorMarker":i.markerGraphics?.forEach((e=>{u(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":f(t,i.color);break;case"CIMHatchFill":u(i.lineSymbol,t)}}function f(e,t){for(const n of e)if(n.join(".")===t.join("."))return;e.push(t)}},1570:function(e,t,n){n.d(t,{$4:function(){return g},O1:function(){return M},Sw:function(){return k},eH:function(){return d},rc:function(){return b}});var r=n(8281),o=n(37257),i=n(86039),c=n(46795),s=n(18513),a=n(49290);const l="picture-fill",u="simple-fill",f="simple-line",h="simple-marker",m="text",p="cim",y=new c.q(1e3);function d(e){const t=e.style;let n=null;if(e)switch(e.type){case h:"cross"!==t&&"x"!==t&&(n=e.color);break;case u:"solid"===t?n=e.color:"none"!==t&&(n={type:"pattern",x:0,y:0,src:(0,r.s)(`geoscene/symbols/patterns/${t}.png`),width:5,height:5});break;case l:n={type:"pattern",src:e.url,width:(0,s.Lz)(e.width)*e.xscale,height:(0,s.Lz)(e.height)*e.yscale,x:(0,s.Lz)(e.xoffset),y:(0,s.Lz)(e.yoffset)};break;case m:n=e.color;break;case p:n=(0,a.Nk)(e)}return n}function b(e,t){const n=e+"-"+t;return void 0!==y.get(n)?Promise.resolve(y.get(n)):(0,i["default"])(e,{responseType:"image"}).then((e=>{const r=e.data,o=r.naturalWidth,i=r.naturalHeight,c=document.createElement("canvas");c.width=o,c.height=i;const s=c.getContext("2d");s.fillStyle=t,s.fillRect(0,0,o,i),s.globalCompositeOperation="destination-in",s.drawImage(r,0,0);const a=c.toDataURL();return y.put(n,a),a}))}function g(e){if(!e)return null;let t=null;switch(e.type){case u:case l:case h:t=g(e.outline);break;case f:{const n=(0,s.Lz)(e.width);null!=e.style&&"none"!==e.style&&0!==n&&(t={color:e.color,style:M(e.style),width:n,cap:e.cap,join:"miter"===e.join?(0,s.Lz)(e.miterLimit):e.join});break}default:t=null}return t}const M=(()=>{const e={};return t=>{if(e[t])return e[t];const n=t.replaceAll("-","");return e[t]=n,n}})(),k=new o.A([128,128,128])},45125:function(e,t,n){n.d(t,{$d:function(){return h},GG:function(){return E},N7:function(){return m},Sx:function(){return p},UQ:function(){return O},di:function(){return T},dt:function(){return M},yG:function(){return R}});var r=n(37257),o=n(85092),i=n(49067),c=(n(51020),n(79908)),s=n(456),a=n(37287),l=n(49290),u=(n(1570),n(28252));const f=new r.A("white");function h(e){if(null==e||!("symbolLayers"in e)||null==e.symbolLayers)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((e=>"object"===e.type));case"line-3d":return e.symbolLayers.some((e=>"path"===e.type));case"polygon-3d":return e.symbolLayers.some((e=>"object"===e.type||"extrude"===e.type));default:return!1}}function m(e){return(0,c.T7)(e.resource).href}function p(e,t){if(!e)return null;let n=null;return(0,o.wk)(e)?n=y(e):(0,o.$y)(e)&&(n="cim"===e.type?(0,l.Nk)(e):e.color?new r.A(e.color):null),n?d(n,t):null}function y(e){const t=e.symbolLayers;if(!t)return null;let n=null;return t.forEach((e=>{"object"===e.type&&e.resource?.href||(n="water"===e.type?e.color:e.material?e.material.color:null)})),n?new r.A(n):null}function d(e,t){if(null==t||null==e)return e;const n=e.toRgba();return n[3]=n[3]*t,new r.A(n)}function b(e,t,n){const r=e.symbolLayers;if(!r)return;const o=e=>d(t=t??e??(null!=n?f:null),n);r.forEach((e=>{if("object"!==e.type||!e.resource?.href||t)if("water"===e.type)e.color=o(e.color);else{const t=null!=e.material?e.material.color:null,r=o(t);null==e.material?e.material=new u.N({color:r}):e.material.color=r,null!=n&&"outline"in e&&null!=e.outline&&null!=e.outline.color&&(e.outline.color=d(e.outline.color,n))}}))}function g(e,t,n){(t=t??e.color)&&(e.color=d(t,n)),null!=n&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=d(e.outline.color,n))}function M(e,t,n){e&&(t||null!=n)&&(t&&(t=new r.A(t)),(0,o.wk)(e)?b(e,t,n):(0,o.$y)(e)&&g(e,t,n))}async function k(e,t){const n=e.symbolLayers;n&&await(0,i.jJ)(n,(async e=>C(e,t)))}async function C(e,t){switch(e.type){case"extrude":S(e,t);break;case"icon":case"line":case"text":w(e,t);break;case"path":x(e,t);break;case"object":await P(e,t)}}function w(e,t){const n=I(t);null!=n&&(e.size=n)}function I(e){for(const t of e)if("number"==typeof t)return t;return null}function S(e,t){e.size="number"==typeof t[2]?t[2]:0}async function P(e,t){const{resourceSize:n,symbolSize:r}=await A(e),o=L(t,n,r);e.width=z(t[0],r[0],n[0],o),e.depth=z(t[1],r[1],n[1],o),e.height=z(t[2],r[2],n[2],o)}function x(e,t){const n=L(t,s.O,[e.width,void 0,e.height]);e.width=z(t[0],e.width,1,n),e.height=z(t[2],e.height,1,n)}function L(e,t,n){for(let r=0;r<3;r++){const o=e[r];switch(o){case"symbol-value":{const e=n[r];return null!=e?e/t[r]:1}case"proportional":break;default:if(o&&t[r])return o/t[r]}}return 1}async function A(e){const{computeObjectLayerResourceSize:t}=await n.e(9376).then(n.bind(n,59376)),r=await t(e,10),{width:o,height:i,depth:c}=e,s=[o,c,i];let a=1;for(let n=0;n<3;n++){const e=s[n];if(null!=e){a=e/r[n];break}}for(let n=0;n<3;n++)null==s[n]&&(s[n]=r[n]*a);return{resourceSize:r,symbolSize:s}}function z(e,t,n,r){switch(e){case"proportional":return n*r;case"symbol-value":return null!=t?t:n;default:return e}}function G(e,t){const n=I(t);if(null!=n)switch(e.type){case"simple-marker":e.size=n;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=n,e.height=n*t):(e.width=n*t,e.height=n);break}case"simple-line":e.width=n;break;case"text":e.font.size=n}}async function O(e,t){if(e&&t)return(0,o.wk)(e)?k(e,t):void((0,o.$y)(e)&&G(e,t))}function E(e,t,n){if(e&&null!=t)if((0,o.wk)(e)){const r=e.symbolLayers;r&&r.forEach((e=>{if(e&&"object"===e.type)switch(n){case"tilt":e.tilt=t;break;case"roll":e.roll=t;break;default:e.heading=t}}))}else(0,o.$y)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle=t))}function T(e){if(!e)return null;const t=e.effects.filter((e=>"bloom"!==e.type)).map((e=>e.toJSON()));return(0,a.zu)(t)}async function R(e,t){const n=await e.fetchSymbol(t);return n||e.fetchCIMSymbol(t)}}}]);
//# sourceMappingURL=5113.b486eeb3.js.map