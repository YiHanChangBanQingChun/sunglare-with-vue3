{"version":3,"file":"js/688.f17bb18c.js","mappings":"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","sources":["webpack://sun-glare-project/./node_modules/@geoscene/core/core/ByteSizeUnit.js","webpack://sun-glare-project/./node_modules/@geoscene/core/layers/TileLayer.js","webpack://sun-glare-project/./node_modules/@geoscene/core/layers/mixins/ArcGISCachedService.js","webpack://sun-glare-project/./node_modules/@geoscene/core/layers/support/TileInfoTilemapCache.js","webpack://sun-glare-project/./node_modules/@geoscene/core/layers/support/TilemapCache.js","webpack://sun-glare-project/./node_modules/@geoscene/core/geometry/support/UintArray.js","webpack://sun-glare-project/./node_modules/@geoscene/core/layers/support/Tilemap.js"],"sourcesContent":["/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nvar E;!function(E){E[E.KILOBYTES=1024]=\"KILOBYTES\",E[E.MEGABYTES=1048576]=\"MEGABYTES\",E[E.GIGABYTES=1073741824]=\"GIGABYTES\"}(E||(E={}));export{E as ByteSizeUnit};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport{_ as e}from\"../chunks/tslib.es6.js\";import r from\"../request.js\";import t from\"../core/Error.js\";import{HandleOwnerMixin as s}from\"../core/HandleOwner.js\";import{loadAll as i}from\"../core/loadAll.js\";import{MultiOriginJSONMixin as o}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as a}from\"../core/promiseUtils.js\";import{urlToObject as l,objectToQuery as n,makeAbsolute as p}from\"../core/urlUtils.js\";import{property as c}from\"../core/accessorSupport/decorators/property.js\";import{cast as u}from\"../core/accessorSupport/decorators/cast.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import{reader as m}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as h}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as d}from\"../core/accessorSupport/decorators/writer.js\";import y from\"../geometry/SpatialReference.js\";import f from\"./Layer.js\";import{APIKeyMixin as v}from\"./mixins/APIKeyMixin.js\";import{ArcGISCachedService as g}from\"./mixins/ArcGISCachedService.js\";import{ArcGISMapService as S}from\"./mixins/ArcGISMapService.js\";import{ArcGISService as _}from\"./mixins/ArcGISService.js\";import{BlendLayer as j}from\"./mixins/BlendLayer.js\";import{CustomParametersMixin as T}from\"./mixins/CustomParametersMixin.js\";import{OperationalLayer as b}from\"./mixins/OperationalLayer.js\";import{PortalLayer as w}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as O}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as L}from\"./mixins/ScaleRangeLayer.js\";import{SublayersOwner as R}from\"./mixins/SublayersOwner.js\";import{parse as U,isHostedAgolService as P,isArcGISUrl as x}from\"./support/arcgisLayerUrl.js\";import{url as A}from\"./support/commonProperties.js\";import{createTileBitmap as M}from\"./support/imageBitmapUtils.js\";import I from\"./support/Sublayer.js\";var W;const B=[\"Canvas/World_Dark_Gray_Base\",\"Canvas/World_Dark_Gray_Reference\",\"Canvas/World_Light_Gray_Base\",\"Canvas/World_Light_Gray_Reference\",\"Elevation/World_Hillshade\",\"Elevation/World_Hillshade_Dark\",\"Ocean/World_Ocean_Base\",\"Ocean/World_Ocean_Reference\",\"Ocean_Basemap\",\"Reference/World_Boundaries_and_Places\",\"Reference/World_Boundaries_and_Places_Alternate\",\"Reference/World_Transportation\",\"World_Imagery\",\"World_Street_Map\",\"World_Topo_Map\"];let C=W=class extends(j(L(R(g(S(b(w(_(o(s(O(v(T(f)))))))))))))){constructor(...e){super(...e),this.listMode=\"show\",this.isReference=null,this.operationalLayerType=\"ArcGISTiledMapServiceLayer\",this.resampling=!0,this.sourceJSON=null,this.spatialReference=null,this.path=null,this.sublayers=null,this.type=\"tile\",this.url=null}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}load(e){const r=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Map Service\"]},e).catch(a).then((()=>this._fetchService(r)))),Promise.resolve(this)}get attributionDataUrl(){const e=this.parsedUrl?.path.toLowerCase();return e?this._getDefaultAttribution(this._getMapName(e)):null}readSpatialReference(e,r){return(e=e||r.tileInfo&&r.tileInfo.spatialReference)&&y.fromJSON(e)}writeSublayers(e,r,t,s){if(!this.loaded||!e)return;const i=e.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).toArray(),o=[],a={writeSublayerStructure:!1,...s};i.forEach((e=>{const r=e.write({},a);o.push(r)}));o.some((e=>Object.keys(e).length>1))&&(r.layers=o)}get tileServers(){return this._getDefaultTileServers(this.parsedUrl?.path)}castTileServers(e){return Array.isArray(e)?e.map((e=>l(e).path)):null}fetchTile(e,t,s,i={}){const{signal:o}=i,a=this.getTileUrl(e,t,s),l={responseType:\"image\",signal:o,query:{...this.refreshParameters}};return r(a,l).then((e=>e.data))}async fetchImageBitmapTile(e,t,s,i={}){const{signal:o}=i;if(this.fetchTile!==W.prototype.fetchTile){const r=await this.fetchTile(e,t,s,i);return M(r,e,t,s,o)}const a=this.getTileUrl(e,t,s),l={responseType:\"blob\",signal:o,query:{...this.refreshParameters}},{data:n}=await r(a,l);return M(n,e,t,s,o)}getTileUrl(e,r,t){const s=!this.capabilities.operations.supportsTileMap&&this.supportsBlankTile,i=n({...this.parsedUrl?.query,blankTile:!s&&null,...this.customParameters,token:this.apiKey}),o=this.tileServers;return`${o&&o.length?o[r%o.length]:this.parsedUrl?.path}/tile/${e}/${r}/${t}${i?\"?\"+i:\"\"}`}loadAll(){return i(this,(e=>{e(this.allSublayers)}))}_fetchService(e){return new Promise(((s,i)=>{if(this.sourceJSON){if(null!=this.sourceJSON.bandCount&&null!=this.sourceJSON.pixelSizeX)throw new t(\"tile-layer:unsupported-url\",\"use ImageryTileLayer to open a tiled image service\");return void s({data:this.sourceJSON})}if(!this.parsedUrl)throw new t(\"tile-layer:undefined-url\",\"layer's url is not defined\");const o=U(this.parsedUrl.path);if(null!=o&&\"ImageServer\"===o.serverType)throw new t(\"tile-layer:unsupported-url\",\"use ImageryTileLayer to open a tiled image service\");r(this.parsedUrl.path,{query:{f:\"json\",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},responseType:\"json\",signal:e}).then(s,i)})).then((r=>{let t=this.url;if(r.ssl&&(t=this.url=t.replace(/^http:/i,\"https:\")),this.sourceJSON=r.data,this.read(r.data,{origin:\"service\",url:this.parsedUrl}),10.1===this.version&&!P(t))return this._fetchServerVersion(t,e).then((e=>{this.read({currentVersion:e})})).catch((()=>{}))}))}_fetchServerVersion(e,s){if(!x(e))return Promise.reject();const i=e.replace(/(.*\\/rest)\\/.*/i,\"$1\")+\"/info\";return r(i,{query:{f:\"json\",...this.customParameters,token:this.apiKey},responseType:\"json\",signal:s}).then((e=>{if(e.data&&e.data.currentVersion)return e.data.currentVersion;throw new t(\"tile-layer:version-not-available\")}))}_getMapName(e){const r=e.match(/^(?:https?:)?\\/\\/(server\\.arcgisonline\\.com|services\\.arcgisonline\\.com|ibasemaps-api\\.arcgis\\.com)\\/arcgis\\/rest\\/services\\/([^\\/]+(\\/[^\\/]+)*)\\/mapserver/i);return r?r[2]:void 0}_getDefaultAttribution(e){if(null==e)return null;let r;e=e.toLowerCase();for(let t=0,s=B.length;t<s;t++)if(r=B[t],r.toLowerCase().includes(e))return p(\"//static.arcgis.com/attribution/\"+r);return null}_getDefaultTileServers(e){if(null==e)return[];const r=-1!==e.search(/^(?:https?:)?\\/\\/server\\.arcgisonline\\.com/i),t=-1!==e.search(/^(?:https?:)?\\/\\/services\\.arcgisonline\\.com/i);return r||t?[e,e.replace(r?/server\\.arcgisonline/i:/services\\.arcgisonline/i,r?\"services.arcgisonline\":\"server.arcgisonline\")]:[]}get hasOverriddenFetchTile(){return!this.fetchTile[N]}};e([c({readOnly:!0})],C.prototype,\"attributionDataUrl\",null),e([c({type:[\"show\",\"hide\",\"hide-children\"]})],C.prototype,\"listMode\",void 0),e([c({json:{read:!0,write:!0}})],C.prototype,\"blendMode\",void 0),e([c({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],C.prototype,\"isReference\",void 0),e([c({readOnly:!0,type:[\"ArcGISTiledMapServiceLayer\"]})],C.prototype,\"operationalLayerType\",void 0),e([c({type:Boolean})],C.prototype,\"resampling\",void 0),e([c()],C.prototype,\"sourceJSON\",void 0),e([c({type:y})],C.prototype,\"spatialReference\",void 0),e([m(\"spatialReference\",[\"spatialReference\",\"tileInfo\"])],C.prototype,\"readSpatialReference\",null),e([c({type:String,json:{origins:{\"web-scene\":{read:!0,write:!0}},read:!1}})],C.prototype,\"path\",void 0),e([c({readOnly:!0})],C.prototype,\"sublayers\",void 0),e([d(\"sublayers\",{layers:{type:[I]}})],C.prototype,\"writeSublayers\",null),e([c({json:{read:!1,write:!1}})],C.prototype,\"popupEnabled\",void 0),e([c()],C.prototype,\"tileServers\",null),e([u(\"tileServers\")],C.prototype,\"castTileServers\",null),e([c({readOnly:!0,json:{read:!1}})],C.prototype,\"type\",void 0),e([c(A)],C.prototype,\"url\",void 0),C=W=e([h(\"geoscene.layers.TileLayer\")],C);const N=Symbol(\"default-fetch-tile\");C.prototype.fetchTile[N]=!0;const k=C;export{k as default};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../geometry.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{reader as r}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import l from\"../support/TileInfo.js\";import i from\"../support/TileInfoTilemapCache.js\";import{TilemapCache as s}from\"../support/TilemapCache.js\";import a from\"../../geometry/SpatialReference.js\";const p=p=>{let n=class extends p{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}destroy(){this.tilemapCache?.destroy?.()}readMinScale(e,o){return null!=o.minLOD&&null!=o.maxLOD?e:0}readMaxScale(e,o){return null!=o.minLOD&&null!=o.maxLOD?e:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(e,o,r){const t=o.capabilities?.includes(\"Tilemap\");let{minLOD:a,maxLOD:p,minScale:n,maxScale:c}=o;if(null==a&&null==p&&0!==n&&0!==c){const e=e=>Math.round(1e4*e)/1e4;n=e(n||o.tileInfo.lods[0].scale),c=e(c||o.tileInfo.lods[o.tileInfo.lods.length-1].scale);for(const r of o.tileInfo.lods){const o=e(r.scale);a=o>=n?r.level:a,p=o>=c?r.level:p}}if(t)return new s({layer:this,minLOD:a,maxLOD:p});if(o.tileInfo){const e=new l;return e.read(o.tileInfo,r),new i(e,a,p)}return null}};return e([o({json:{read:{source:\"copyrightText\"}}})],n.prototype,\"copyright\",void 0),e([o()],n.prototype,\"minScale\",void 0),e([r(\"service\",\"minScale\")],n.prototype,\"readMinScale\",null),e([o()],n.prototype,\"maxScale\",void 0),e([r(\"service\",\"maxScale\")],n.prototype,\"readMaxScale\",null),e([o({type:a})],n.prototype,\"spatialReference\",void 0),e([o({readOnly:!0})],n.prototype,\"supportsBlankTile\",null),e([o({type:l})],n.prototype,\"tileInfo\",void 0),e([o()],n.prototype,\"tilemapCache\",void 0),e([r(\"service\",\"tilemapCache\",[\"capabilities\",\"tileInfo\"])],n.prototype,\"readTilemapCache\",null),e([o()],n.prototype,\"version\",void 0),n=e([t(\"geoscene.layers.mixins.ArcGISCachedService\")],n),n};export{p as ArcGISCachedService};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport t from\"../../core/Error.js\";import{waitTick as i,isAbortError as l}from\"../../core/promiseUtils.js\";class e{constructor(t,i=0,l=t.lods.length-1){this.tileInfo=t,this.minLOD=i,this.maxLOD=l}get effectiveMinLOD(){return this.minLOD??this.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(t,i,l){const e=this.tileInfo?.lodAt(t);return!e||t<this.minLOD||t>this.maxLOD?\"unavailable\":e.cols&&e.rows?l>=e.cols[0]&&l<=e.cols[1]&&i>=e.rows[0]&&i<=e.rows[1]?\"unknown\":\"unavailable\":\"unknown\"}async fetchAvailability(l,e,a,o){await i(o);const s=this.getAvailability(l,e,a);if(\"unavailable\"===s)throw new t(\"tile-map:tile-unavailable\",\"Tile is not available\",{level:l,row:e,col:a});return s}async fetchAvailabilityUpsample(t,e,a,o,s){await i(s),o.level=t,o.row=e,o.col=a;const n=this.tileInfo;return n.updateTileInfo(o),this.fetchAvailability(t,e,a,s).catch((t=>{if(l(t))throw t;if(n.upsampleTile(o))return this.fetchAvailabilityUpsample(o.level,o.row,o.col,o,s);throw t}))}}export{e as default};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../request.js\";import i from\"../../core/Accessor.js\";import{ByteSizeUnit as r}from\"../../core/ByteSizeUnit.js\";import s from\"../../core/Error.js\";import{makeHandle as l}from\"../../core/handleUtils.js\";import{LRUCache as o}from\"../../core/LRUCache.js\";import a from\"../../core/PooledArray.js\";import{onAbort as n,createAbortError as c,isAbortError as h,isAborted as p}from\"../../core/promiseUtils.js\";import{watch as m,initial as f}from\"../../core/reactiveUtils.js\";import{waitTicks as u}from\"../../core/scheduling.js\";import{objectToQuery as v}from\"../../core/urlUtils.js\";import{property as y}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as d}from\"../../core/accessorSupport/decorators/subclass.js\";import{TileKey as _}from\"./TileKey.js\";import{tilemapDefinitionId as b,Tilemap as g}from\"./Tilemap.js\";var w;let T=w=class extends i{constructor(e){super(e),this._pendingTilemapRequests={},this.request=t,this.size=32,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new o(2*r.MEGABYTES),this.addHandles([m((()=>{const{layer:e}=this;return[e?.parsedUrl,e?.tileServers,e?.apiKey,e?.customParameters]}),(()=>this._initializeTilemapDefinition()),f)])}get effectiveMinLOD(){return this.minLOD??this.layer.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}fetchTilemap(e,t,i,r){if(!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD)return Promise.reject(new s(\"tilemap-cache:level-unavailable\",`Level ${e} is unavailable in the service`));const l=this._tmpTilemapDefinition,o=this._tilemapFromCache(e,t,i,l);if(o)return Promise.resolve(o);const a=r&&r.signal;return r={...r,signal:null},new Promise(((e,t)=>{n(a,(()=>t(c())));const i=b(l);let s=this._pendingTilemapRequests[i];if(!s){s=g.fromDefinition(l,r).then((e=>(this._tilemapCache.put(i,e,e.byteSize),e)));const e=()=>delete this._pendingTilemapRequests[i];this._pendingTilemapRequests[i]=s,s.then(e,e)}s.then(e,t)}))}getAvailability(e,t,i){if(!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD)return\"unavailable\";const r=this._tilemapFromCache(e,t,i,this._tmpTilemapDefinition);return r?r.getAvailability(t,i):\"unknown\"}fetchAvailability(e,t,i,r){return!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD?Promise.reject(new s(\"tile-map:tile-unavailable\",\"Tile is not available\",{level:e,row:t,col:i})):this.fetchTilemap(e,t,i,r).catch((e=>e)).then((r=>{if(r instanceof g){const l=r.getAvailability(t,i);if(\"unavailable\"===l)throw new s(\"tile-map:tile-unavailable\",\"Tile is not available\",{level:e,row:t,col:i});return l}if(h(r))throw r;return\"unknown\"}))}fetchAvailabilityUpsample(e,t,i,r,s){r.level=e,r.row=t,r.col=i;const l=this.layer.tileInfo;l.updateTileInfo(r);const o=this.fetchAvailability(e,t,i,s).catch((e=>{if(h(e))throw e;if(l.upsampleTile(r))return this.fetchAvailabilityUpsample(r.level,r.row,r.col,r,s);throw e}));return this._fetchAvailabilityUpsamplePrefetch(r.id,e,t,i,s,o),o}async _fetchAvailabilityUpsamplePrefetch(e,t,i,r,s,o){if(!this._prefetchingEnabled||null==e)return;const a=`prefetch-${e}`;if(this.hasHandles(a))return;const n=new AbortController;o.then((()=>n.abort()),(()=>n.abort()));let c=!1;const h=l((()=>{c||(c=!0,n.abort())}));if(this.addHandles(h,a),await u(10,n.signal).catch((()=>{})),c||(c=!0,this.removeHandles(a)),p(n))return;const m=new _(e,t,i,r),f={...s,signal:n.signal},v=this.layer.tileInfo;for(let l=0;w._prefetches.length<w._maxPrefetch&&v.upsampleTile(m);++l){const e=this.fetchAvailability(m.level,m.row,m.col,f);w._prefetches.push(e);const t=()=>{w._prefetches.removeUnordered(e)};e.then(t,t)}}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const{parsedUrl:e,apiKey:t,customParameters:i}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:v({...e.query,...i,token:t??e.query?.token}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,i,r){r.level=e,r.row=t-t%this.size,r.col=i-i%this.size;const s=b(r);return this._tilemapCache.get(s)}get test(){const e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:(t,i,r)=>!!e._tilemapFromCache(t,i,r,e._tmpTilemapDefinition)}}};T._maxPrefetch=4,T._prefetches=new a({initialSize:w._maxPrefetch}),e([y({constructOnly:!0})],T.prototype,\"layer\",void 0),e([y({constructOnly:!0})],T.prototype,\"minLOD\",void 0),e([y({constructOnly:!0})],T.prototype,\"maxLOD\",void 0),e([y({constructOnly:!0})],T.prototype,\"request\",void 0),e([y({constructOnly:!0})],T.prototype,\"size\",void 0),T=w=e([d(\"geoscene.layers.support.TilemapCache\")],T);export{T as TilemapCache};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport{NATIVE_ARRAY_MAX_SIZE as r,isArray as n}from\"../../core/typedArrayUtil.js\";function t(n,t=!1){return n<=r?t?new Array(n).fill(0):new Array(n):new Uint32Array(n)}function e(t){return(n(t)?t.length:t.byteLength/8)<=r?Array.from(t):new Uint32Array(t)}function y(r,n,t){return Array.isArray(r)?r.slice(n,n+t):r.subarray(n,n+t)}export{t as newUintArray,e as uintArrayFrom,y as uintSubArray};","/*\r\nAll material copyright GeoScene, All Rights Reserved, unless otherwise specified.\r\nSee https://js.geoscene.cn/4.27/geoscene/copyright.txt for details.\r\n*/\r\nimport t from\"../../request.js\";import{constant as i}from\"../../core/arrayUtils.js\";import e from\"../../core/Error.js\";import{clone as a}from\"../../core/lang.js\";import{estimateSize as o}from\"../../core/typedArrayUtil.js\";import{newUintArray as l}from\"../../geometry/support/UintArray.js\";class r{constructor(t){this._validateJSON(t);const{location:i,data:e}=t;this.location=Object.freeze(a(i));const r=this.location.width,n=this.location.height;let s=!0,h=!0;const c=Math.ceil(r*n/32),m=l(c);let f=0;for(let a=0;a<e.length;a++){const t=a%32;e[a]?(h=!1,m[f]|=1<<t):s=!1,31===t&&++f}h?(this._availability=\"unavailable\",this.byteSize=40):s?(this._availability=\"available\",this.byteSize=40):(this._availability=m,this.byteSize=40+o(m))}getAvailability(t,i){if(\"unavailable\"===this._availability||\"available\"===this._availability)return this._availability;const e=(t-this.location.top)*this.location.width+(i-this.location.left),a=e%32,o=e>>5,l=this._availability;return o<0||o>l.length?\"unknown\":l[o]&1<<a?\"available\":\"unavailable\"}static fromDefinition(a,o){const l=a.service.request||t,{row:n,col:h,width:c,height:m}=a,f={query:{f:\"json\"}};return o=o?{...f,...o}:f,l(s(a),o).then((t=>t.data)).catch((t=>{if(t&&t.details&&422===t.details.httpStatus)return{location:{top:n,left:h,width:c,height:m},valid:!0,data:i(c*m,0)};throw t})).then((t=>{if(t.location&&(t.location.top!==n||t.location.left!==h||t.location.width!==c||t.location.height!==m))throw new e(\"tilemap:location-mismatch\",\"Tilemap response for different location than requested\",{response:t,definition:{top:n,left:h,width:c,height:m}});return r.fromJSON(t)}))}static fromJSON(t){return Object.freeze(new r(t))}_validateJSON(t){if(!t||!t.location)throw new e(\"tilemap:missing-location\",\"Location missing from tilemap response\");if(!1===t.valid)throw new e(\"tilemap:invalid\",\"Tilemap response was marked as invalid\");if(!t.data)throw new e(\"tilemap:missing-data\",\"Data missing from tilemap response\");if(!Array.isArray(t.data))throw new e(\"tilemap:data-mismatch\",\"Data must be an array of numbers\");if(t.data.length!==t.location.width*t.location.height)throw new e(\"tilemap:data-mismatch\",\"Number of data items does not match width/height of tilemap\")}}function n(t){return`${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}function s(t){let i;if(t.service.tileServers?.length){const e=t.service.tileServers;i=`${e&&e.length?e[t.row%e.length]:t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}else i=`${t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`;const e=t.service.query;return e&&(i=`${i}?${e}`),i}export{r as Tilemap,n as tilemapDefinitionId};"],"names":["E","KILOBYTES","MEGABYTES","GIGABYTES","W","B","C","j","L","R","g","S","b","w","_","o","s","O","v","T","f","constructor","e","super","this","listMode","isReference","operationalLayerType","resampling","sourceJSON","spatialReference","path","sublayers","type","url","normalizeCtorArgs","r","load","signal","addResolvingPromise","loadFromPortal","supportedTypes","catch","a","then","_fetchService","Promise","resolve","attributionDataUrl","parsedUrl","toLowerCase","_getDefaultAttribution","_getMapName","readSpatialReference","tileInfo","y","fromJSON","writeSublayers","t","loaded","i","slice","reverse","flatten","toArray","writeSublayerStructure","forEach","write","push","some","Object","keys","length","layers","tileServers","_getDefaultTileServers","castTileServers","Array","isArray","map","l","fetchTile","getTileUrl","responseType","query","refreshParameters","data","fetchImageBitmapTile","prototype","M","n","capabilities","operations","supportsTileMap","supportsBlankTile","blankTile","customParameters","token","apiKey","loadAll","allSublayers","bandCount","pixelSizeX","U","serverType","ssl","replace","read","origin","version","P","_fetchServerVersion","currentVersion","x","reject","match","includes","p","search","hasOverriddenFetchTile","N","c","readOnly","json","Boolean","enabled","overridePolicy","m","String","origins","d","I","u","A","h","Symbol","k","arguments","copyright","minScale","maxScale","tilemapCache","destroy","readMinScale","minLOD","maxLOD","readMaxScale","readTilemapCache","Math","round","lods","scale","level","layer","source","effectiveMinLOD","effectiveMaxLOD","getAvailability","lodAt","cols","rows","fetchAvailability","row","col","fetchAvailabilityUpsample","updateTileInfo","upsampleTile","fill","Uint32Array","_validateJSON","location","freeze","width","height","ceil","_availability","byteSize","top","left","fromDefinition","service","request","details","httpStatus","valid","response","definition","_pendingTilemapRequests","size","_prefetchingEnabled","initialize","_tilemapCache","addHandles","_initializeTilemapDefinition","fetchTilemap","_tmpTilemapDefinition","_tilemapFromCache","put","_fetchAvailabilityUpsamplePrefetch","id","hasHandles","AbortController","abort","removeHandles","_prefetches","_maxPrefetch","removeUnordered","clear","get","test","prefetchingEnabled","hasTilemap","initialSize","constructOnly"],"sourceRoot":""}