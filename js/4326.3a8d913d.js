"use strict";(self["webpackChunksun_glare_project"]=self["webpackChunksun_glare_project"]||[]).push([[4326],{21730:function(e,t,n){function r(e){return e&&"function"==typeof e.highlight}n.d(t,{Of:function(){return r}})},86466:function(e,t,n){n.d(t,{CU:function(){return y},LY:function(){return p},LZ:function(){return f},Ve:function(){return c},l:function(){return d},n4:function(){return h},of:function(){return g},qD:function(){return s},uW:function(){return b}});n(44114),n(17642),n(58004),n(33853),n(45876),n(32475),n(15024),n(31698),n(38730);var r=n(69292),i=n(79547),a=n(56126),o=(n(59792),n(30104));n(22774);const u=(e,t)=>null!=e&&e.input?.type===t,s=e=>null!=e&&(u(e,"text-box")||u(e,"text-area")),l={typeFieldName:null,types:[]};function f(e,t,n){const a=Object.keys(t).filter((t=>(0,i.mk)(e,t))),o=a.map((e=>t[e])),u=a.map((e=>n.get(e))).filter(r.Ru);return m(e,c(o,u))}function c(e,t){const n=t.map(((t,n)=>{let r=e[n];if(t.domain&&"coded-value"===t.domain.type){const e=t.domain.codedValues.find((e=>e.code===r));e?.name&&(r=e.name)}return(0,o.vE)(t)&&(r=p(t,r)),[t.name,r]}));return Object.fromEntries(n)}function p(e,t){if(!e||null==t)return null;switch(e.type){case"date":return(0,a.Yq)(t);case"date-only":return(0,a.iS)(t);case"time-only":return(0,a.F8)(t);case"timestamp-offset":return(0,a.Ey)(t);default:return null}}const d=new Set(["date-only","time-only","timestamp-offset"]);function m(e,t){return(0,i.HC)((0,i.HC)(e,(e=>`{${e.toLowerCase()}}`)),Object.fromEntries(Object.entries(t).map((([e,t])=>[e.toLowerCase(),t]))))}const y=e=>e?"subtype-sublayer"===e.type?{typeFieldName:e.parent?.subtypeField,types:e.parent?.subtypes??[]}:"types"in e&&e.types?{typeFieldName:e.typeIdField,types:e.types.map((({id:e,name:t,domains:n})=>({code:e,name:t,domains:n})))}:l:l,g=(e,t)=>{if(!e)return!0;const{operations:n}=e;switch(t){case"INSERT":return n.supportsAdd;case"UPDATE":case"DELETE":return n.supportsUpdate;default:return!0}};var b;!function(e){e.TOO_SHORT="length-validation-error::too-short"}(b||(b={}));const h=e=>{const t=[];if(e.formTemplate){const{description:n,title:r}=e.formTemplate;e.fields?.forEach((e=>{const a=r&&(0,i.mk)(r,e.name),o=n&&(0,i.mk)(n,e.name);(a||o)&&t.push(e.name)}))}return t}},8234:function(e,t,n){n.d(t,{A4:function(){return j},AB:function(){return E},Ao:function(){return me},DU:function(){return ae},J9:function(){return X},JF:function(){return A},MK:function(){return H},Tt:function(){return C},Uu:function(){return ne},a$:function(){return W},bG:function(){return te},bV:function(){return x},c3:function(){return ue},cS:function(){return ge},gd:function(){return D},kX:function(){return $},ld:function(){return ee},lm:function(){return B},q6:function(){return ye},s$:function(){return se},sS:function(){return Q},u2:function(){return M},x1:function(){return ie},xL:function(){return k}});n(44114);var r=n(15114),i=n(79547),a=n(56126),o=n(14811),u=n(30104),s=n(46759),l=n(66552),f=n(86630);const c="geoscene.widgets.Feature.support.featureUtils",p=r.A.getLogger(c),d=/href=(""|'')/gi,m=/(\{([^\{\r\n]+)\})/g,y=/\'/g,g=/^\s*expression\//i,b=/(\n)/gi,h=/[\u00A0-\u9999<>\&]/gim,I=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,F=/^(?:mailto:|tel:)/,N="relationships/",w=(0,a.J2)("short-date-short-time");function A(e){if(null!=e)return e.get("sourceLayer")||e.get("layer")}async function E(e,t){return"function"==typeof e?e(t):e}function $(e=""){if(e)return!F.test(e.trim().toLowerCase())}function C(e){return!!e&&g.test(e)}function T(e,t){if(!C(t)||!e)return null;const n=t.replace(g,"").toLowerCase();let r=null;return e.some((e=>e.name.toLowerCase()===n&&(r=e,!0))),r}function x(e,t){const n=T(t,e?.fieldName);return n?n.title||null:e?e.label||e.fieldName:null}function v(e,t){const n=t.get(e.toLowerCase());return`{${n&&n.fieldName||e}}`}function q(e){return e.replaceAll(d,"")}function j(e,t){const n=L(t,e);return n?n.name:e}function k(e,t){return e&&e.map((e=>j(e,t)))}function L(e,t){return e&&"function"==typeof e.getField&&t?e.getField(t)??null:null}function R(e){return`${e}`.trim()}function M({attributes:e,globalAttributes:t,layer:n,text:r,expressionAttributes:i,fieldInfoMap:a}){return r?D({formattedAttributes:t,template:P(r,{...t,...i,...e},n),fieldInfoMap:a}):""}function D({formattedAttributes:e,template:t,fieldInfoMap:n}){return R(q((0,i.HC)((0,i.HC)(t,(e=>v(e,n))),e)))}function S(e,t,n=!1){const r=t[e];if("string"==typeof r){const i="%27",a=(n?encodeURIComponent(r):r).replaceAll(y,i);t[e]=a}}function O(e,t=!1){const n={...e};return Object.keys(n).forEach((e=>S(e,n,t))),n}function U(e,t,n){const r=(t=R(t))&&"{"!==t[0];return(0,i.HC)(e,O(n,r||!1))}function H(e,t){return e.replaceAll(m,((e,n,r)=>{const i=L(t,r);return i?`{${i.name}}`:n}))}function P(e,t,n){const r=H(e,n);return r?r.replaceAll(I,((e,n,r)=>U(e,n||r,t))):r}function _(e,t){if("string"==typeof e&&t&&null==t.dateFormat&&(null!=t.places||null!=t.digitSeparator)){const t=Number(e);if(!isNaN(t))return t}return e}function G(e){return null!=e&&"object"==typeof e&&"layer"in e&&!!e.layer}function J(e){return null!=e&&"object"==typeof e&&"type"in e&&"map-image"===e.type}function V(e){return null!=e&&"object"==typeof e&&"fieldsIndex"in e&&"geometryType"in e&&"getField"in e&&"load"in e&&"loaded"in e&&"objectIdField"in e&&"spatialReference"in e&&"type"in e&&"feature"===e.type&&"when"in e}function Y(e){return null!=e&&"object"==typeof e&&"createQuery"in e&&"queryFeatureCount"in e&&"queryObjectIds"in e&&"queryRelatedFeatures"in e&&"queryRelatedFeaturesCount"in e&&"relationships"in e}function Q(e){return V(e)&&Y(e)}function Z(e,t){const{fieldInfos:n,fieldName:r,preventPlacesFormatting:i,layer:a}=t,f=B(n,r),c=f?.clone(),p=L(a,r);if(c&&!(0,u.JL)(r)){const t=p?.type;if("date"===t||"date-only"===t||"time-only"===t||"timestamp-offset"===t||c.format?.dateFormat){const n=c.format??new l.A;if(n.dateFormat??="date-only"===t?"short-date":"short-date-short-time","number"==typeof e){const t=!G(a)&&(0,s.yZ)(a)&&a.datesInUnknownTimezone||G(a)&&J(a.layer)&&a.layer.datesInUnknownTimezone;return n.formatDate(e,t)}switch(t){case"date-only":return n.formatDateOnly(e);case"time-only":return n.formatTimeOnly(e);case"timestamp-offset":return n.formatTimestamp(e)}}}const d=c?.format;return"string"==typeof e&&(0,u.JL)(r)&&d?d.formatRasterPixelValue(e):"string"==typeof(e=_(e,d))||null==e||null==d?ne(e):i?(0,o.ZV)(e,{...(0,o.yx)(d),minimumFractionDigits:0,maximumFractionDigits:20}):d.formatNumber(e)}function B(e,t){if(e&&e.length&&t)return e.find((e=>e.fieldName?.toLowerCase()===t.toLowerCase()))}function z({fieldName:e,graphic:t,layer:n}){if(se(e))return null;if(!n||"function"!=typeof n.getFeatureType)return null;const{typeIdField:r}=n;if(!r||e!==r)return null;const i=n.getFeatureType(t);return i?i.name:null}function K({fieldName:e,value:t,graphic:n,layer:r}){if(se(e))return null;if(!r||"function"!=typeof r.getFieldDomain)return null;const i=n&&r.getFieldDomain(e,{feature:n});return i&&"coded-value"===i.type?i.getName(t):null}function W(e,t){const{creatorField:n,creationDateField:r,editorField:i,editDateField:o}=e;if(!t)return;const u=t[o];if("number"==typeof u){const e=t[i];return{type:"edit",date:(0,a.Yq)(u,w),user:e}}const s=t[r];if("number"==typeof s){const e=t[n];return{type:"create",date:(0,a.Yq)(s,w),user:e}}return null}function X(e,t){const n=new Map;return e?(e.forEach((e=>{const r=j(e.fieldName,t);e.fieldName=r,n.set(r.toLowerCase(),e)})),n):n}function ee(e){const t=[];if(!e)return t;const{fieldInfos:n,content:r}=e;return n&&t.push(...n),r&&Array.isArray(r)?(r.forEach((e=>{if("fields"===e.type){const n=e&&e.fieldInfos;n&&t.push(...n)}})),t):t}function te(e){return e.replaceAll(h,(e=>`&#${e.charCodeAt(0)};`))}function ne(e){return"string"==typeof e?e.replaceAll(b,'<br class="geoscene-text-new-line" />'):e}function re(e){const{value:t,fieldName:n,fieldInfos:r,fieldInfoMap:i,layer:o,graphic:u}=e;if(null==t)return"";const s=K({fieldName:n,value:t,graphic:u,layer:o});if(s)return s;const l=z({fieldName:n,graphic:u,layer:o});if(l)return l;if(i.get(n.toLowerCase()))return Z(t,{fieldInfos:r||Array.from(i.values()),fieldName:n,layer:o});switch(o?.fieldsIndex?.get(n)?.type){case"date":return(0,a.Yq)(t);case"date-only":return(0,a.iS)(t);case"time-only":return(0,a.F8)(t);case"timestamp-offset":return(0,a.Ey)(t)}return ne(t)}function ie({fieldInfos:e,attributes:t,layer:n,graphic:r,fieldInfoMap:i,relatedInfos:a}){const o={};return a?.forEach((t=>ce({attributes:o,relatedInfo:t,fieldInfoMap:i,fieldInfos:e,layer:n}))),t&&Object.keys(t).forEach((a=>{const u=t[a];o[a]=re({fieldName:a,fieldInfos:e,fieldInfoMap:i,layer:n,value:u,graphic:r})})),o}async function ae(e,t){const{layer:n,graphic:r,outFields:i,objectIds:a,returnGeometry:o,spatialReference:u}=e,l=a[0];if("number"!=typeof l&&"string"!=typeof l){const e="Could not query required fields for the specified feature. The feature's ID is invalid.",t={layer:n,graphic:r,objectId:l,requiredFields:i};return p.warn(e,t),null}if(!(0,s.BR)(n)?.operations?.supportsQuery){const e="The specified layer cannot be queried. The following fields will not be available.",t={layer:n,graphic:r,requiredFields:i,returnGeometry:o};return p.warn(e,t),null}const f=n.createQuery();return f.objectIds=a,f.outFields=i?.length?i:[n.objectIdField],f.returnGeometry=!!o,f.returnZ=!!o,f.returnM=!!o,f.outSpatialReference=u,(await n.queryFeatures(f,t)).features[0]}async function oe(e){if(!e.expressionInfos?.length)return!1;const t=await(0,f.lw)(),{arcadeUtils:{hasGeometryFunctions:n}}=t;return n(e)}async function ue({graphic:e,popupTemplate:t,layer:n,spatialReference:r},i){if(!n||!t)return;if("function"==typeof n.load&&await n.load(i),!e.attributes)return;const a=e.attributes[n.objectIdField];if(null==a)return;const o=[a],s=await t.getRequiredFields(n.fieldsIndex),l=(0,u.Kl)(s,e),f=l?[]:s,c=t.returnGeometry||await oe(t);if(l&&!c)return;const p=await ae({layer:n,graphic:e,outFields:f,objectIds:o,returnGeometry:c,spatialReference:r},i);p&&(p.geometry&&(e.geometry=p.geometry),p.attributes&&(e.attributes={...e.attributes,...p.attributes}))}function se(e=""){return!!e&&e.includes(N)}function le(e){return e?`${N}${e.layerId}/${e.fieldName}`:""}function fe({attributes:e,graphic:t,relatedInfo:n,fieldInfos:r,fieldInfoMap:i,layer:a}){e&&t&&n&&Object.keys(t.attributes).forEach((o=>{const u=le({layerId:n.relation.id.toString(),fieldName:o}),s=t.attributes[o];e[u]=re({fieldName:u,fieldInfos:r,fieldInfoMap:i,layer:a,value:s,graphic:t})}))}function ce({attributes:e,relatedInfo:t,fieldInfoMap:n,fieldInfos:r,layer:i}){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach((a=>fe({attributes:e,graphic:a,relatedInfo:t,fieldInfoMap:n,fieldInfos:r,layer:i}))),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach((a=>fe({attributes:e,graphic:a,relatedInfo:t,fieldInfoMap:n,fieldInfos:r,layer:i}))))}const pe=e=>{if(!e)return!1;const t=e.toUpperCase();return t.includes("CURRENT_TIMESTAMP")||t.includes("CURRENT_DATE")||t.includes("CURRENT_TIME")},de=({layer:e,method:t,query:n,definitionExpression:r})=>{if(!e.capabilities?.query?.supportsCacheHint||"attachments"===t)return;const i=null!=n.where?n.where:null,a=null!=n.geometry?n.geometry:null;pe(r)||pe(i)||"extent"===a?.type||"tile"===n.resultType||(n.cacheHint=!0)},me=({query:e,layer:t,method:n})=>{de({layer:t,method:n,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},ye=({queryPayload:e,layer:t,method:n})=>{de({layer:t,method:n,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})};function ge(e,t,n){return e&&t&&n?be(e.allLayers,t,n)||be(e.allTables,t,n):null}function be(e,t,n){return e.filter(Q).find((e=>e!==t&&e.url===t.url&&e.layerId===n.relatedTableId))}},81293:function(e,t,n){n.d(t,{Q:function(){return o}});var r=n(79547);const i=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function a(e){let t=null;return i.some((n=>(n.pattern.test(e)&&(t=n),!!t))),t}function o(e,t){if("string"!=typeof t||!t)return t;const n=a(t);if(!n)return t;const i=t.match(n.pattern),o=i&&i[2],u=(0,r.HC)((0,r.HC)(n.label,{messages:e,hierPart:o}),{appName:n.appName}),s=n.target?` target="${n.target}"`:"",l="_blank"===n.target?' rel="noreferrer"':"";return t.replace(n.pattern,`<a${s} href="$1"${l}>${u}</a>`)}}}]);
//# sourceMappingURL=4326.3a8d913d.js.map