"use strict";(self["webpackChunksun_glare_project"]=self["webpackChunksun_glare_project"]||[]).push([[3576],{44240:function(t,e,o){o.d(e,{lO:function(){return u}});var r=o(48585),s=o(12790),n=o(72465);const a=new s.A(r.fv),i=new s.A(r.FY),p=new s.A(r.LJ);new s.A(r.Ro);function u(t){return t&&((0,n.q8)(t)||(0,n.aI)(t,i))?i:t&&((0,n.KQ)(t)||(0,n.aI)(t,p))?p:a}},61792:function(t,e,o){o.d(e,{c:function(){return u}});var r=o(31745),s=o(86039),n=o(71120),a=o(3949),i=o(67681),p=o(66476);class u{constructor(t,e,o,r){this._parsedUrl=t,this._portalItem=e,this._apiKey=o,this.signal=r,this._rootDocument=null;const s=this._parsedUrl?.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);s&&(this._urlParts={root:s[1],layerId:parseInt(s[2],10)})}async fetch(){if(!this._urlParts)return null;const t=this._portalItem??await this._portalItemFromServiceItemId();if(null==t)return this._loadFromUrl();const e=await this._findAndLoadRelatedPortalItem(t);return null==e?null:this._loadFeatureLayerFromPortalItem(e)}async fetchPortalItem(){if(!this._urlParts)return null;const t=this._portalItem??await this._portalItemFromServiceItemId();return null==t?null:this._findAndLoadRelatedPortalItem(t)}async _fetchRootDocument(){if(null!=this._rootDocument)return this._rootDocument;if(null==this._urlParts)return this._rootDocument={},{};const t={query:{f:"json",token:this._apiKey},responseType:"json",signal:this.signal},e=`${this._urlParts.root}/SceneServer`;try{const o=await(0,s["default"])(e,t);this._rootDocument=o.data}catch{this._rootDocument={}}return this._rootDocument}async _fetchServiceOwningPortalUrl(){const t=this._parsedUrl?.path,e=t?r.id?.findServerInfo(t):null;if(e?.owningSystemUrl)return e.owningSystemUrl;const o=t?t.replace(/(.*\/rest)\/.*/i,"$1")+"/info":null;try{const t=(await(0,s["default"])(o,{query:{f:"json"},responseType:"json",signal:this.signal})).data.owningSystemUrl;if(t)return t}catch(u){(0,n.QP)(u)}return null}async _findAndLoadRelatedPortalItem(t){try{return(await t.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:this.signal})).find((t=>"Feature Service"===t.type))||null}catch(e){return(0,n.QP)(e),null}}async _loadFeatureLayerFromPortalItem(t){await t.load({signal:this.signal});const e=await this._findMatchingAssociatedSublayerUrl(t.url??"");return new a["default"]({url:e,portalItem:t}).load({signal:this.signal})}async _loadFromUrl(){const t=await this._findMatchingAssociatedSublayerUrl(`${this._urlParts?.root}/FeatureServer`);return new a["default"]({url:t}).load({signal:this.signal})}async _findMatchingAssociatedSublayerUrl(t){const e=t.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1"),o=this._urlParts?.layerId,r=this._fetchRootDocument(),n=t=>{const o={query:{f:"json"},responseType:"json",authMode:t,signal:this.signal};return(0,s["default"])(e,o)},a=n("anonymous").catch((()=>n("no-prompt"))),[i,p]=await Promise.all([a,r]),u=p&&p.layers,l=i.data&&i.data.layers;if(!Array.isArray(l))throw new Error("expected layers array");if(Array.isArray(u)){for(let s=0;s<Math.min(u.length,l.length);s++)if(u[s].id===o)return`${e}/${l[s].id}`}else if(null!=o&&o<l.length)return`${e}/${l[o].id}`;throw new Error("could not find matching associated sublayer")}async _portalItemFromServiceItemId(){const t=(await this._fetchRootDocument()).serviceItemId;if(!t)return null;const e=new p["default"]({id:t,apiKey:this._apiKey}),o=await this._fetchServiceOwningPortalUrl();null!=o&&(e.portal=new i.A({url:o}));try{return e.load({signal:this.signal})}catch(u){return(0,n.QP)(u),null}}}},921:function(t,e,o){o.d(e,{L0:function(){return _},Ot:function(){return y},W4:function(){return p},uV:function(){return c}});var r=o(71457),s=o(28920),n=o(76543),a=(o(37679),o(69292),o(51020),o(42267)),i=o(29916);let p=class extends s.oY{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};(0,r._)([(0,n.MZ)({type:Number})],p.prototype,"nodesPerPage",void 0),(0,r._)([(0,n.MZ)({type:Number})],p.prototype,"rootIndex",void 0),(0,r._)([(0,n.MZ)({type:String})],p.prototype,"lodSelectionMetricType",void 0),p=(0,r._)([(0,i.$)("geoscene.layer.support.I3SNodePageDefinition")],p);let u=class extends s.oY{constructor(){super(...arguments),this.factor=1}};(0,r._)([(0,n.MZ)({type:Number,json:{read:{source:"textureSetDefinitionId"}}})],u.prototype,"id",void 0),(0,r._)([(0,n.MZ)({type:Number})],u.prototype,"factor",void 0),u=(0,r._)([(0,i.$)("geoscene.layer.support.I3SMaterialTexture")],u);let l=class extends s.oY{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};(0,r._)([(0,n.MZ)({type:[Number]})],l.prototype,"baseColorFactor",void 0),(0,r._)([(0,n.MZ)({type:u})],l.prototype,"baseColorTexture",void 0),(0,r._)([(0,n.MZ)({type:u})],l.prototype,"metallicRoughnessTexture",void 0),(0,r._)([(0,n.MZ)({type:Number})],l.prototype,"metallicFactor",void 0),(0,r._)([(0,n.MZ)({type:Number})],l.prototype,"roughnessFactor",void 0),l=(0,r._)([(0,i.$)("geoscene.layer.support.I3SMaterialPBRMetallicRoughness")],l);let c=class extends s.oY{constructor(){super(...arguments),this.alphaMode="opaque",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace="none",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};(0,r._)([(0,a.e)({opaque:"opaque",mask:"mask",blend:"blend"})],c.prototype,"alphaMode",void 0),(0,r._)([(0,n.MZ)({type:Number})],c.prototype,"alphaCutoff",void 0),(0,r._)([(0,n.MZ)({type:Boolean})],c.prototype,"doubleSided",void 0),(0,r._)([(0,a.e)({none:"none",back:"back",front:"front"})],c.prototype,"cullFace",void 0),(0,r._)([(0,n.MZ)({type:u})],c.prototype,"normalTexture",void 0),(0,r._)([(0,n.MZ)({type:u})],c.prototype,"occlusionTexture",void 0),(0,r._)([(0,n.MZ)({type:u})],c.prototype,"emissiveTexture",void 0),(0,r._)([(0,n.MZ)({type:[Number]})],c.prototype,"emissiveFactor",void 0),(0,r._)([(0,n.MZ)({type:l})],c.prototype,"pbrMetallicRoughness",void 0),c=(0,r._)([(0,i.$)("geoscene.layer.support.I3SMaterialDefinition")],c);let d=class extends s.oY{};(0,r._)([(0,n.MZ)({type:String,json:{read:{source:["name","index"],reader:(t,e)=>null!=t?t:`${e.index}`}}})],d.prototype,"name",void 0),(0,r._)([(0,a.e)({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2",ktx2:"ktx2",basis:"basis"})],d.prototype,"format",void 0),d=(0,r._)([(0,i.$)("geoscene.layer.support.I3STextureFormat")],d);let y=class extends s.oY{constructor(){super(...arguments),this.atlas=!1}};(0,r._)([(0,n.MZ)({type:[d]})],y.prototype,"formats",void 0),(0,r._)([(0,n.MZ)({type:Boolean})],y.prototype,"atlas",void 0),y=(0,r._)([(0,i.$)("geoscene.layer.support.I3STextureSetDefinition")],y);let h=class extends s.oY{};(0,r._)([(0,a.e)({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],h.prototype,"type",void 0),(0,r._)([(0,n.MZ)({type:Number})],h.prototype,"component",void 0),h=(0,r._)([(0,i.$)("geoscene.layer.support.I3SGeometryAttribute")],h);let f=class extends s.oY{};(0,r._)([(0,a.e)({draco:"draco"})],f.prototype,"encoding",void 0),(0,r._)([(0,n.MZ)({type:[String]})],f.prototype,"attributes",void 0),f=(0,r._)([(0,i.$)("geoscene.layer.support.I3SGeometryCompressedAttributes")],f);let m=class extends s.oY{constructor(){super(...arguments),this.offset=0}};(0,r._)([(0,n.MZ)({type:Number})],m.prototype,"offset",void 0),(0,r._)([(0,n.MZ)({type:h})],m.prototype,"position",void 0),(0,r._)([(0,n.MZ)({type:h})],m.prototype,"normal",void 0),(0,r._)([(0,n.MZ)({type:h})],m.prototype,"uv0",void 0),(0,r._)([(0,n.MZ)({type:h})],m.prototype,"color",void 0),(0,r._)([(0,n.MZ)({type:h})],m.prototype,"uvRegion",void 0),(0,r._)([(0,n.MZ)({type:h})],m.prototype,"featureId",void 0),(0,r._)([(0,n.MZ)({type:h})],m.prototype,"faceRange",void 0),(0,r._)([(0,n.MZ)({type:f})],m.prototype,"compressedAttributes",void 0),m=(0,r._)([(0,i.$)("geoscene.layer.support.I3SGeometryBuffer")],m);let _=class extends s.oY{};(0,r._)([(0,a.e)({triangle:"triangle"})],_.prototype,"topology",void 0),(0,r._)([(0,n.MZ)()],_.prototype,"geometryBuffers",void 0),_=(0,r._)([(0,i.$)("geoscene.layer.support.I3SGeometryDefinition")],_)},96979:function(t,e,o){o.d(e,{P:function(){return r}});const r={analytics:{supportsCacheHint:!1},attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1,supportsCacheHint:!1,supportsResize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsAsyncApplyEdits:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1,supportsAsyncConvert3D:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsCompactGeometry:!1,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsStatistics:!1,tileMaxRecordCount:0}}},42149:function(t,e,o){o.d(e,{s1:function(){return S}});o(44114);var r=o(86039),s=(o(69292),o(47966),o(51020),o(79908),o(71120)),n=o(48119),a=(o(13030),o(37072)),i=(o(90183),o(26671)),p=(o(34350),o(39107)),u=(o(67886),o(456)),l=(o(48585),o(39582),o(12790),o(44240),o(99359)),c=(o(72465),o(10403),o(67039));o(37257);var d,y=o(18439);function h(t){return{...f,...t,type:"solid"}}!function(t){t[t.INVISIBLE=0]="INVISIBLE",t[t.TRANSPARENT=1]="TRANSPARENT",t[t.OPAQUE=2]="OPAQUE"}(d||(d={}));const f={color:(0,y.f)(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:d.OPAQUE,hasSlicePlane:!1};(0,y.f)(0,0,0,.2),d.OPAQUE;o(36268),o(16573),o(78100),o(77936),o(37467),o(44732),o(79577);var m=o(71784),_=o(67779);o(22095),o(32604),o(67336),o(79515);(0,m.a)(),(0,u.c)(),(0,u.c)(),(0,y.c)(),(0,a.c)();function I(t=[0,0,0],e=[-1,-1,-1],o=(0,m.a)()){return{center:(0,u.a)(t),halfSize:(0,_.b)(e),quaternion:(0,p.b)(o)}}(()=>{const t=new Int8Array(162);let e=0;const o=o=>{for(let r=0;r<o.length;r++)t[e+r]=o[r];e+=6};o([6,2,3,1,5,4]),o([0,2,3,1,5,4]),o([0,2,3,7,5,4]),o([0,1,3,2,6,4]),o([0,1,3,2,0,0]),o([0,1,5,7,3,2]),o([0,1,3,7,6,4]),o([0,1,3,7,6,2]),o([0,1,5,7,6,2]),o([0,1,5,4,6,2]),o([0,1,5,4,0,0]),o([0,1,3,7,5,4]),o([0,2,6,4,0,0]),o([0,0,0,0,0,0]),o([1,3,7,5,0,0]),o([2,3,7,6,4,0]),o([2,3,7,6,0,0]),o([2,3,1,5,7,6]),o([0,1,5,7,6,2]),o([0,1,5,7,6,4]),o([0,1,3,7,6,4]),o([4,5,7,6,2,0]),o([4,5,7,6,0,0]),o([4,5,1,3,7,6]),o([0,2,3,7,5,4]),o([6,2,3,7,5,4]),o([6,2,3,1,5,4])})();(0,u.c)(),(0,u.c)(),(0,u.c)(),(0,m.a)();var g=o(65246);(0,l.vt)();var v;function S(t,e,o,n,a){const i=[];for(const r of e)if(r&&a.includes(r.name)){const e=`${t}/nodes/${o}/attributes/${r.key}/0`;i.push({url:e,storageInfo:r})}return(0,s.Lx)(i.map((t=>(0,r["default"])(t.url,{responseType:"array-buffer"}).then((e=>(0,c.m0)(t.storageInfo,e.data)))))).then((t=>{const e=[];for(const o of n){const r={};for(let e=0;e<t.length;e++){const s=t[e].value;null!=s&&(r[i[e].storageInfo.name]=x(s,o))}e.push(r)}return e}))}!function(t){t[t.OUTSIDE=0]="OUTSIDE",t[t.INTERSECTS_CENTER_OUTSIDE=1]="INTERSECTS_CENTER_OUTSIDE",t[t.INTERSECTS_CENTER_INSIDE=2]="INTERSECTS_CENTER_INSIDE",t[t.INSIDE=3]="INSIDE"}(v||(v={}));const T=-32768,M=-(2**31);function x(t,e){if(!t)return null;const o=t[e];return(0,n.IY)(t)?o===T?null:o:(0,n._G)(t)?o===M?null:o:o!=o?null:o}h({color:[0,0,0,0],opacity:0});const b=new Array(24);new g.n(b,3,!0),(0,u.c)(),(0,u.c)(),(0,a.c)();(0,i.c)(),(0,p.c)(),(0,l.vt)(),(0,l.vt)(),I(),(0,u.c)(),new Array(72),(0,i.c)()},36268:function(t,e,o){o.d(e,{k5:function(){return r}});var r;o(26011);!function(t){t[t.Multiply=1]="Multiply",t[t.Ignore=2]="Ignore",t[t.Replace=3]="Replace",t[t.Tint=4]="Tint"}(r||(r={}))},65246:function(t,e,o){o.d(e,{n:function(){return r}});class r{constructor(t,e,o=!1,r=e){this.data=t,this.size=e,this.exclusive=o,this.stride=r}}},76035:function(t,e,o){o.d(e,{D8:function(){return n},TO:function(){return s}});o(44114);var r=o(30104);async function s(t,e=t.popupTemplate){if(null==e)return[];const o=await e.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:s}=e,{objectIdField:n,typeIdField:a,globalIdField:i,relationships:p}=t;if(o.includes("*"))return["*"];const u=s?await(0,r.eX)(t):[],l=(0,r.DB)(t.fieldsIndex,[...o,...u]);return a&&l.push(a),l&&n&&t.fieldsIndex?.has(n)&&!l.includes(n)&&l.push(n),l&&i&&t.fieldsIndex?.has(i)&&!l.includes(i)&&l.push(i),p&&p.forEach((e=>{const{keyField:o}=e;l&&o&&t.fieldsIndex?.has(o)&&!l.includes(o)&&l.push(o)})),l}function n(t,e){return t.popupTemplate?t.popupTemplate:null!=e&&e.defaultPopupTemplateEnabled&&null!=t.defaultPopupTemplate?t.defaultPopupTemplate:null}}}]);
//# sourceMappingURL=3576.6ba9b277.js.map